(function(n,b){function m(d){var q=d.length,b=k.type(d);return k.isWindow(d)?!1:1===d.nodeType&&q?!0:"array"===b||"function"!==b&&(0===q||"number"==typeof q&&0<q&&q-1 in d)}function h(d){var q=Ua[d]={};return k.each(d.match(ca)||[],function(d,b){q[b]=!0}),q}function a(d,q,a,c){if(k.acceptData(d)){var e,f,g=k.expando,l=d.nodeType,h=l?k.cache:d,p=l?d[g]:d[g]&&g;if(p&&h[p]&&(c||h[p].data)||a!==b||"string"!=typeof q)return p||(p=l?d[g]=na.pop()||k.guid++:g),h[p]||(h[p]=l?{}:{toJSON:k.noop}),("object"==
typeof q||"function"==typeof q)&&(c?h[p]=k.extend(h[p],q):h[p].data=k.extend(h[p].data,q)),f=h[p],c||(f.data||(f.data={}),f=f.data),a!==b&&(f[k.camelCase(q)]=a),"string"==typeof q?(e=f[q],null==e&&(e=f[k.camelCase(q)])):e=f,e}}function c(d,q,b){if(k.acceptData(d)){var a,c,e=d.nodeType,f=e?k.cache:d,l=e?d[k.expando]:k.expando;if(f[l]){if(q&&(a=b?f[l]:f[l].data)){k.isArray(q)?q=q.concat(k.map(q,k.camelCase)):q in a?q=[q]:(q=k.camelCase(q),q=q in a?[q]:q.split(" "));for(c=q.length;c--;)delete a[q[c]];
if(b?!g(a):!k.isEmptyObject(a))return}(b||(delete f[l].data,g(f[l])))&&(e?k.cleanData([d],!0):k.support.deleteExpando||f!=f.window?delete f[l]:f[l]=null)}}}function e(d,q,a){if(a===b&&1===d.nodeType){var c="data-"+q.replace(ub,"-$1").toLowerCase();if(a=d.getAttribute(c),"string"==typeof a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:vb.test(a)?k.parseJSON(a):a}catch(e){}k.data(d,q,a)}else a=b}return a}function g(d){for(var q in d)if(("data"!==q||!k.isEmptyObject(d[q]))&&"toJSON"!==
q)return!1;return!0}function f(){return!0}function l(){return!1}function r(){try{return B.activeElement}catch(d){}}function p(d,q){do d=d[q];while(d&&1!==d.nodeType);return d}function u(d,q,a){if(k.isFunction(q))return k.grep(d,function(d,b){return!!q.call(d,b,d)!==a});if(q.nodeType)return k.grep(d,function(d){return d===q!==a});if("string"==typeof q){if(wb.test(q))return k.filter(q,d,a);q=k.filter(q,d)}return k.grep(d,function(d){return 0<=k.inArray(d,q)!==a})}function s(d){var q=Wa.split("|");d=
d.createDocumentFragment();if(d.createElement)for(;q.length;)d.createElement(q.pop());return d}function t(d,q){return k.nodeName(d,"table")&&k.nodeName(1===q.nodeType?q:q.firstChild,"tr")?d.getElementsByTagName("tbody")[0]||d.appendChild(d.ownerDocument.createElement("tbody")):d}function v(d){return d.type=(null!==k.find.attr(d,"type"))+"/"+d.type,d}function z(d){var q=xb.exec(d.type);return q?d.type=q[1]:d.removeAttribute("type"),d}function D(d,q){for(var a,b=0;null!=(a=d[b]);b++)k._data(a,"globalEval",
!q||k._data(q[b],"globalEval"))}function x(d,q){if(1===q.nodeType&&k.hasData(d)){var a,b,c;b=k._data(d);var e=k._data(q,b),f=b.events;if(f)for(a in delete e.handle,e.events={},f)for(b=0,c=f[a].length;c>b;b++)k.event.add(q,a,f[a][b]);e.data&&(e.data=k.extend({},e.data))}}function w(d,q){var a,c,e=0,f=typeof d.getElementsByTagName!==H?d.getElementsByTagName(q||"*"):typeof d.querySelectorAll!==H?d.querySelectorAll(q||"*"):b;if(!f)for(f=[],a=d.childNodes||d;null!=(c=a[e]);e++)!q||k.nodeName(c,q)?f.push(c):
k.merge(f,w(c,q));return q===b||q&&k.nodeName(d,q)?k.merge([d],f):f}function C(d){Fa.test(d.type)&&(d.defaultChecked=d.checked)}function J(d,q){if(q in d)return q;for(var a=q.charAt(0).toUpperCase()+q.slice(1),b=q,k=Xa.length;k--;)if(q=Xa[k]+a,q in d)return q;return b}function A(d,q){return d=q||d,"none"===k.css(d,"display")||!k.contains(d.ownerDocument,d)}function K(d,q){for(var a,b,c,e=[],f=0,g=d.length;g>f;f++)b=d[f],b.style&&(e[f]=k._data(b,"olddisplay"),a=b.style.display,q?(e[f]||"none"!==a||
(b.style.display=""),""===b.style.display&&A(b)&&(e[f]=k._data(b,"olddisplay",F(b.nodeName)))):e[f]||(c=A(b),(a&&"none"!==a||!c)&&k._data(b,"olddisplay",c?a:k.css(b,"display"))));for(f=0;g>f;f++)b=d[f],b.style&&(q&&"none"!==b.style.display&&""!==b.style.display||(b.style.display=q?e[f]||"":"none"));return d}function T(d,q,b){return(d=yb.exec(q))?Math.max(0,d[1]-(b||0))+(d[2]||"px"):q}function y(d,q,b,a,c){q=b===(a?"border":"content")?4:"width"===q?1:0;for(var e=0;4>q;q+=2)"margin"===b&&(e+=k.css(d,
b+ja[q],!0,c)),a?("content"===b&&(e-=k.css(d,"padding"+ja[q],!0,c)),"margin"!==b&&(e-=k.css(d,"border"+ja[q]+"Width",!0,c))):(e+=k.css(d,"padding"+ja[q],!0,c),"padding"!==b&&(e+=k.css(d,"border"+ja[q]+"Width",!0,c)));return e}function P(d,q,b){var a=!0,c="width"===q?d.offsetWidth:d.offsetHeight,e=ea(d),f=k.support.boxSizing&&"border-box"===k.css(d,"boxSizing",!1,e);if(0>=c||null==c){if(c=da(d,q,e),(0>c||null==c)&&(c=d.style[q]),ya.test(c))return c;a=f&&(k.support.boxSizingReliable||c===d.style[q]);
c=parseFloat(c)||0}return c+y(d,q,b||(f?"border":"content"),a,e)+"px"}function F(d){var q=B,b=Ya[d];return b||(b=Q(d,q),"none"!==b&&b||(sa=(sa||k("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(q.documentElement),q=(sa[0].contentWindow||sa[0].contentDocument).document,q.write("<!doctype html><html><body>"),q.close(),b=Q(d,q),sa.detach()),Ya[d]=b),b}function Q(d,q){var b=k(q.createElement(d)).appendTo(q.body),a=k.css(b[0],"display");return b.remove(),
a}function M(d,q,b,a){var c;if(k.isArray(q))k.each(q,function(q,c){b||zb.test(d)?a(d,c):M(d+"["+("object"==typeof c?q:"")+"]",c,b,a)});else if(b||"object"!==k.type(q))a(d,q);else for(c in q)M(d+"["+c+"]",q[c],b,a)}function R(d){return function(q,b){"string"!=typeof q&&(b=q,q="*");var a,c=0,e=q.toLowerCase().match(ca)||[];if(k.isFunction(b))for(;a=e[c++];)"+"===a[0]?(a=a.slice(1)||"*",(d[a]=d[a]||[]).unshift(b)):(d[a]=d[a]||[]).push(b)}}function E(d,q,a,c){function e(l){var h;return f[l]=!0,k.each(d[l]||
[],function(d,k){var l=k(q,a,c);return"string"!=typeof l||g||f[l]?g?!(h=l):b:(q.dataTypes.unshift(l),e(l),!1)}),h}var f={},g=d===Ga;return e(q.dataTypes[0])||!f["*"]&&e("*")}function Y(d,q){var a,c,e=k.ajaxSettings.flatOptions||{};for(c in q)q[c]!==b&&((e[c]?d:a||(a={}))[c]=q[c]);return a&&k.extend(!0,d,a),d}function N(){try{return new n.XMLHttpRequest}catch(d){}}function U(){return setTimeout(function(){oa=b}),oa=k.now()}function Z(d,q,b){for(var a,c=(ta[q]||[]).concat(ta["*"]),e=0,k=c.length;k>
e;e++)if(a=c[e].call(b,q,d))return a}function fa(d,q,b){var a,c=0,e=Aa.length,f=k.Deferred().always(function(){delete g.elem}),g=function(){if(a)return!1;for(var q=oa||U(),q=Math.max(0,l.startTime+l.duration-q),b=1-(q/l.duration||0),c=0,e=l.tweens.length;e>c;c++)l.tweens[c].run(b);return f.notifyWith(d,[l,b,q]),1>b&&e?q:(f.resolveWith(d,[l]),!1)},l=f.promise({elem:d,props:k.extend({},q),opts:k.extend(!0,{specialEasing:{}},b),originalProperties:q,originalOptions:b,startTime:oa||U(),duration:b.duration,
tweens:[],createTween:function(q,b){var a=k.Tween(d,l.opts,q,b,l.opts.specialEasing[q]||l.opts.easing);return l.tweens.push(a),a},stop:function(q){var b=0,c=q?l.tweens.length:0;if(a)return this;for(a=!0;c>b;b++)l.tweens[b].run(1);return q?f.resolveWith(d,[l,q]):f.rejectWith(d,[l,q]),this}});b=l.props;for(L(b,l.opts.specialEasing);e>c;c++)if(q=Aa[c].call(l,d,b,l.opts))return q;return k.map(b,Z,l),k.isFunction(l.opts.start)&&l.opts.start.call(d,l),k.fx.timer(k.extend(g,{elem:d,anim:l,queue:l.opts.queue})),
l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(d,q){var b,a,c,e,f;for(b in d)if(a=k.camelCase(b),c=q[a],e=d[b],k.isArray(e)&&(c=e[1],e=d[b]=e[0]),b!==a&&(d[a]=e,delete d[b]),f=k.cssHooks[a],f&&"expand"in f)for(b in e=f.expand(e),delete d[a],e)b in d||(d[b]=e[b],q[b]=c);else q[a]=c}function S(d,q,b,a,c){return new S.prototype.init(d,q,b,a,c)}function O(d,q){var b,a={height:d},c=0;for(q=q?1:0;4>c;c+=2-q)b=ja[c],a["margin"+b]=a["padding"+
b]=d;return q&&(a.opacity=a.width=d),a}function X(d){return k.isWindow(d)?d:9===d.nodeType?d.defaultView||d.parentWindow:!1}var ba,I,H=typeof b,G=n.location,B=n.document,V=B.documentElement,Ha=n.jQuery,Ia=n.$,wa={},na=[],Ba=na.concat,za=na.push,ga=na.slice,Za=na.indexOf,Ab=wa.toString,ha=wa.hasOwnProperty,Ja="1.10.2".trim,k=function(d,q){return new k.fn.init(d,q,I)},Ca=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ca=/\S+/g,Bb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Cb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
$a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Db=/^[\],:{}\s]*$/,Eb=/(?:^|:|,)(?:\s*\[)+/g,Fb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Gb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,Hb=/^-ms-/,Ib=/-([\da-z])/gi,Jb=function(d,q){return q.toUpperCase()},$=function(d){(B.addEventListener||"load"===d.type||"complete"===B.readyState)&&(ab(),k.ready())},ab=function(){B.addEventListener?(B.removeEventListener("DOMContentLoaded",$,!1),n.removeEventListener("load",$,!1)):(B.detachEvent("onreadystatechange",
$),n.detachEvent("onload",$))};k.fn=k.prototype={jquery:"1.10.2",constructor:k,init:function(d,q,a){var c,e;if(!d)return this;if("string"==typeof d){if(c="<"===d.charAt(0)&&">"===d.charAt(d.length-1)&&3<=d.length?[null,d,null]:Cb.exec(d),!c||!c[1]&&q)return!q||q.jquery?(q||a).find(d):this.constructor(q).find(d);if(c[1]){if(q=q instanceof k?q[0]:q,k.merge(this,k.parseHTML(c[1],q&&q.nodeType?q.ownerDocument||q:B,!0)),$a.test(c[1])&&k.isPlainObject(q))for(c in q)k.isFunction(this[c])?this[c](q[c]):this.attr(c,
q[c]);return this}if(e=B.getElementById(c[2]),e&&e.parentNode){if(e.id!==c[2])return a.find(d);this.length=1;this[0]=e}return this.context=B,this.selector=d,this}return d.nodeType?(this.context=this[0]=d,this.length=1,this):k.isFunction(d)?a.ready(d):(d.selector!==b&&(this.selector=d.selector,this.context=d.context),k.makeArray(d,this))},selector:"",length:0,toArray:function(){return ga.call(this)},get:function(d){return null==d?this.toArray():0>d?this[this.length+d]:this[d]},pushStack:function(d){d=
k.merge(this.constructor(),d);return d.prevObject=this,d.context=this.context,d},each:function(d,q){return k.each(this,d,q)},ready:function(d){return k.ready.promise().done(d),this},slice:function(){return this.pushStack(ga.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(d){var q=this.length;d=+d+(0>d?q:0);return this.pushStack(0<=d&&q>d?[this[d]]:[])},map:function(d){return this.pushStack(k.map(this,function(q,b){return d.call(q,b,q)}))},
end:function(){return this.prevObject||this.constructor(null)},push:za,sort:[].sort,splice:[].splice};k.fn.init.prototype=k.fn;k.extend=k.fn.extend=function(){var d,q,a,c,e,f,g=arguments[0]||{},l=1,h=arguments.length,p=!1;"boolean"==typeof g&&(p=g,g=arguments[1]||{},l=2);"object"==typeof g||k.isFunction(g)||(g={});for(h===l&&(g=this,--l);h>l;l++)if(null!=(e=arguments[l]))for(c in e)d=g[c],a=e[c],g!==a&&(p&&a&&(k.isPlainObject(a)||(q=k.isArray(a)))?(q?(q=!1,f=d&&k.isArray(d)?d:[]):f=d&&k.isPlainObject(d)?
d:{},g[c]=k.extend(p,f,a)):a!==b&&(g[c]=a));return g};k.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(d){return n.$===k&&(n.$=Ia),d&&n.jQuery===k&&(n.jQuery=Ha),k},isReady:!1,readyWait:1,holdReady:function(d){d?k.readyWait++:k.ready(!0)},ready:function(d){if(!0===d?!--k.readyWait:!k.isReady){if(!B.body)return setTimeout(k.ready);k.isReady=!0;!0!==d&&0<--k.readyWait||(ba.resolveWith(B,[k]),k.fn.trigger&&k(B).trigger("ready").off("ready"))}},isFunction:function(d){return"function"===
k.type(d)},isArray:Array.isArray||function(d){return"array"===k.type(d)},isWindow:function(d){return null!=d&&d==d.window},isNumeric:function(d){return!isNaN(parseFloat(d))&&isFinite(d)},type:function(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?wa[Ab.call(d)]||"object":typeof d},isPlainObject:function(d){var q;if(!d||"object"!==k.type(d)||d.nodeType||k.isWindow(d))return!1;try{if(d.constructor&&!ha.call(d,"constructor")&&!ha.call(d.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}if(k.support.ownLast)for(q in d)return ha.call(d,
q);for(q in d);return q===b||ha.call(d,q)},isEmptyObject:function(d){for(var q in d)return!1;return!0},error:function(d){throw Error(d);},parseHTML:function(d,q,b){if(!d||"string"!=typeof d)return null;"boolean"==typeof q&&(b=q,q=!1);q=q||B;var a=$a.exec(d);b=!b&&[];return a?[q.createElement(a[1])]:(a=k.buildFragment([d],q,b),b&&k(b).remove(),k.merge([],a.childNodes))},parseJSON:function(d){return n.JSON&&n.JSON.parse?n.JSON.parse(d):null===d?d:"string"==typeof d&&(d=k.trim(d),d&&Db.test(d.replace(Fb,
"@").replace(Gb,"]").replace(Eb,"")))?Function("return "+d)():(k.error("Invalid JSON: "+d),b)},parseXML:function(d){var q,a;if(!d||"string"!=typeof d)return null;try{n.DOMParser?(a=new DOMParser,q=a.parseFromString(d,"text/xml")):(q=new ActiveXObject("Microsoft.XMLDOM"),q.async="false",q.loadXML(d))}catch(c){q=b}return q&&q.documentElement&&!q.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+d),q},noop:function(){},globalEval:function(d){d&&k.trim(d)&&(n.execScript||function(d){n.eval.call(n,
d)})(d)},camelCase:function(d){return d.replace(Hb,"ms-").replace(Ib,Jb)},nodeName:function(d,b){return d.nodeName&&d.nodeName.toLowerCase()===b.toLowerCase()},each:function(d,b,a){var c,e=0,k=d.length,f=m(d);if(a)if(f)for(;k>e&&(c=b.apply(d[e],a),!1!==c);e++);else for(e in d){if(c=b.apply(d[e],a),!1===c)break}else if(f)for(;k>e&&(c=b.call(d[e],e,d[e]),!1!==c);e++);else for(e in d)if(c=b.call(d[e],e,d[e]),!1===c)break;return d},trim:Ja&&!Ja.call("\ufeff\u00a0")?function(d){return null==d?"":Ja.call(d)}:
function(d){return null==d?"":(d+"").replace(Bb,"")},makeArray:function(d,b){var a=b||[];return null!=d&&(m(Object(d))?k.merge(a,"string"==typeof d?[d]:d):za.call(a,d)),a},inArray:function(d,b,a){var c;if(b){if(Za)return Za.call(b,d,a);c=b.length;for(a=a?0>a?Math.max(0,c+a):a:0;c>a;a++)if(a in b&&b[a]===d)return a}return-1},merge:function(d,a){var c=a.length,e=d.length,k=0;if("number"==typeof c)for(;c>k;k++)d[e++]=a[k];else for(;a[k]!==b;)d[e++]=a[k++];return d.length=e,d},grep:function(d,a,b){var c,
e=[],k=0,f=d.length;for(b=!!b;f>k;k++)c=!!a(d[k],k),b!==c&&e.push(d[k]);return e},map:function(d,a,b){var c,e=0,k=d.length,f=[];if(m(d))for(;k>e;e++)c=a(d[e],e,b),null!=c&&(f[f.length]=c);else for(e in d)c=a(d[e],e,b),null!=c&&(f[f.length]=c);return Ba.apply([],f)},guid:1,proxy:function(d,a){var c,e,f;return"string"==typeof a&&(f=d[a],a=d,d=f),k.isFunction(d)?(c=ga.call(arguments,2),e=function(){return d.apply(a||this,c.concat(ga.call(arguments)))},e.guid=d.guid=d.guid||k.guid++,e):b},access:function(d,
a,c,e,f,g,l){var h=0,p=d.length,r=null==c;if("object"===k.type(c))for(h in f=!0,c)k.access(d,a,h,c[h],!0,g,l);else if(e!==b&&(f=!0,k.isFunction(e)||(l=!0),r&&(l?(a.call(d,e),a=null):(r=a,a=function(d,a,b){return r.call(k(d),b)})),a))for(;p>h;h++)a(d[h],c,l?e:e.call(d[h],h,a(d[h],c)));return f?d:r?a.call(d):p?a(d[0],c):g},now:function(){return(new Date).getTime()},swap:function(d,a,b,c){var e,k={};for(e in a)k[e]=d.style[e],d.style[e]=a[e];b=b.apply(d,c||[]);for(e in a)d.style[e]=k[e];return b}});
k.ready.promise=function(d){if(!ba)if(ba=k.Deferred(),"complete"===B.readyState)setTimeout(k.ready);else if(B.addEventListener)B.addEventListener("DOMContentLoaded",$,!1),n.addEventListener("load",$,!1);else{B.attachEvent("onreadystatechange",$);n.attachEvent("onload",$);var a=!1;try{a=null==n.frameElement&&B.documentElement}catch(b){}a&&a.doScroll&&function xa(){if(!k.isReady){try{a.doScroll("left")}catch(d){return setTimeout(xa,50)}ab();k.ready()}}()}return ba.promise(d)};k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(d,a){wa["[object "+a+"]"]=a.toLowerCase()});I=k(B);(function(d,a){function b(d,a,c,q){var e,k,f,g,l;if((a?a.ownerDocument||a:Z)!==E&&U(a),a=a||E,c=c||[],!d||"string"!=typeof d)return c;if(1!==(g=a.nodeType)&&9!==g)return[];if(A&&!q){if(e=ra.exec(d))if(f=e[1])if(9===g){if(k=a.getElementById(f),!k||!k.parentNode)return c;if(k.id===f)return c.push(k),c}else{if(a.ownerDocument&&(k=a.ownerDocument.getElementById(f))&&S(a,k)&&k.id===f)return c.push(k),c}else{if(e[2])return W.apply(c,a.getElementsByTagName(d)),
c;if((f=e[3])&&H.getElementsByClassName&&a.getElementsByClassName)return W.apply(c,a.getElementsByClassName(f)),c}if(H.qsa&&(!x||!x.test(d))){if(k=e=V,f=a,l=9===g&&d,1===g&&"object"!==a.nodeName.toLowerCase()){g=n(d);(e=a.getAttribute("id"))?k=e.replace(ua,"\\$&"):a.setAttribute("id",k);k="[id='"+k+"'] ";for(f=g.length;f--;)g[f]=k+m(g[f]);f=ga.test(d)&&a.parentNode||a;l=g.join(",")}if(l)try{return W.apply(c,f.querySelectorAll(l)),c}catch(h){}finally{e||a.removeAttribute("id")}}}var p;a:{d=d.replace(da,
"$1");var aa,r;k=n(d);if(!q&&1===k.length){if(p=k[0]=k[0].slice(0),2<p.length&&"ID"===(aa=p[0]).type&&H.getById&&9===a.nodeType&&A&&G.relative[p[1].type]){if(a=(G.find.ID(aa.matches[0].replace(pa,qa),a)||[])[0],!a){p=c;break a}d=d.slice(p.shift().value.length)}for(g=ha.needsContext.test(d)?0:p.length;g--&&(aa=p[g],!G.relative[e=aa.type]);)if((r=G.find[e])&&(q=r(aa.matches[0].replace(pa,qa),ga.test(p[0].type)&&a.parentNode||a))){if(p.splice(g,1),d=q.length&&m(p),!d){p=(W.apply(c,q),c);break a}break}}p=
(X(d,k)(q,a,!A,c,ga.test(d)),c)}return p}function c(){function d(b,c){return a.push(b+=" ")>G.cacheLength&&delete d[a.shift()],d[b]=c}var a=[];return d}function e(d){return d[V]=!0,d}function f(d){var a=E.createElement("div");try{return!!d(a)}catch(b){return!1}finally{a.parentNode&&a.parentNode.removeChild(a)}}function g(d,a){for(var b=d.split("|"),c=d.length;c--;)G.attrHandle[b[c]]=a}function l(d,a){var b=a&&d,c=b&&1===d.nodeType&&1===a.nodeType&&(~a.sourceIndex||P)-(~d.sourceIndex||P);if(c)return c;
if(b)for(;b=b.nextSibling;)if(b===a)return-1;return d?1:-1}function h(d){return function(a){return"input"===a.nodeName.toLowerCase()&&a.type===d}}function p(d){return function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&a.type===d}}function r(d){return e(function(a){return a=+a,e(function(b,c){for(var q,e=d([],b.length,a),k=e.length;k--;)b[q=e[k]]&&(b[q]=!(c[q]=b[q]))})})}function s(){}function n(d,a){var c,q,e,k,f,g,l;if(f=K[d+" "])return a?0:f.slice(0);f=d;g=[];for(l=G.preFilter;f;){c&&
!(q=Ba.exec(f))||(q&&(f=f.slice(q[0].length)||f),g.push(e=[]));c=!1;(q=za.exec(f))&&(c=q.shift(),e.push({value:c,type:q[0].replace(da," ")}),f=f.slice(c.length));for(k in G.filter)!(q=ha[k].exec(f))||l[k]&&!(q=l[k](q))||(c=q.shift(),e.push({value:c,type:k,matches:q}),f=f.slice(c.length));if(!c)break}return a?f.length:f?b.error(d):K(d,g).slice(0)}function m(d){for(var a=0,b=d.length,c="";b>a;a++)c+=d[a].value;return c}function t(d,a,b){var c=a.dir,q=b&&"parentNode"===c,e=Ha++;return a.first?function(a,
b,e){for(;a=a[c];)if(1===a.nodeType||q)return d(a,b,e)}:function(a,b,k){var f,g,l,h=L+" "+e;if(k)for(;a=a[c];){if((1===a.nodeType||q)&&d(a,b,k))return!0}else for(;a=a[c];)if(1===a.nodeType||q)if(l=a[V]||(a[V]={}),(g=l[c])&&g[0]===h){if(!0===(f=g[1])||f===B)return!0===f}else if(g=l[c]=[h],g[1]=d(a,b,k)||B,!0===g[1])return!0}}function u(d){return 1<d.length?function(a,b,c){for(var q=d.length;q--;)if(!d[q](a,b,c))return!1;return!0}:d[0]}function v(d,a,b,c,q){for(var e,k=[],f=0,g=d.length,l=null!=a;g>
f;f++)(e=d[f])&&(!b||b(e,c,q))&&(k.push(e),l&&a.push(f));return k}function ba(d,a,c,q,k,f){return q&&!q[V]&&(q=ba(q)),k&&!k[V]&&(k=ba(k,f)),e(function(e,f,g,l){var h,p,r=[],s=[],n=f.length,m;if(!(m=e)){m=a||"*";for(var t=g.nodeType?[g]:g,u=[],va=0,xa=t.length;xa>va;va++)b(m,t[va],u);m=u}m=!d||!e&&a?m:v(m,r,d,g,l);t=c?k||(e?d:n||q)?[]:f:m;if(c&&c(m,t,g,l),q)for(h=v(t,s),q(h,[],g,l),g=h.length;g--;)(p=h[g])&&(t[s[g]]=!(m[s[g]]=p));if(e){if(k||d){if(k){h=[];for(g=t.length;g--;)(p=t[g])&&h.push(m[g]=
p);k(null,t=[],h,l)}for(g=t.length;g--;)(p=t[g])&&-1<(h=k?$.call(e,p):r[g])&&(e[h]=!(f[h]=p))}}else t=v(t===f?t.splice(n,t.length):t),k?k(null,f,t,l):W.apply(f,t)})}function w(d){var a,b,c,q=d.length,e=G.relative[d[0].type];b=e||G.relative[" "];for(var k=e?1:0,f=t(function(d){return d===a},b,!0),g=t(function(d){return-1<$.call(a,d)},b,!0),l=[function(d,b,c){return!e&&(c||b!==D)||((a=b).nodeType?f(d,b,c):g(d,b,c))}];q>k;k++)if(b=G.relative[d[k].type])l=[t(u(l),b)];else{if(b=G.filter[d[k].type].apply(null,
d[k].matches),b[V]){for(c=++k;q>c&&!G.relative[d[c].type];c++);return ba(1<k&&u(l),1<k&&m(d.slice(0,k-1).concat({value:" "===d[k-2].type?"*":""})).replace(da,"$1"),b,c>k&&w(d.slice(k,c)),q>c&&w(d=d.slice(c)),q>c&&m(d))}l.push(b)}return u(l)}function z(d,a){var c=0,q=0<a.length,k=0<d.length,f=function(e,f,g,l,h){var p,r,s=[],n=0,m="0",t=e&&[],u=null!=h,va=D,xa=e||k&&G.find.TAG("*",h&&f.parentNode||f),Va=L+=null==va?1:Math.random()||.1;for(u&&(D=f!==E&&f,B=c);null!=(h=xa[m]);m++){if(k&&h){for(p=0;r=
d[p++];)if(r(h,f,g)){l.push(h);break}u&&(L=Va,B=++c)}q&&((h=!r&&h)&&n--,e&&t.push(h))}if(n+=m,q&&m!==n){for(p=0;r=a[p++];)r(t,s,f,g);if(e){if(0<n)for(;m--;)t[m]||s[m]||(s[m]=wa.call(l));s=v(s)}W.apply(l,s);u&&!e&&0<s.length&&1<n+a.length&&b.uniqueSort(l)}return u&&(L=Va,D=va),t};return q?e(f):f}var I,H,B,G,C,Y,X,D,J,U,E,N,A,x,F,y,S,V="sizzle"+-new Date,Z=d.document,L=0,Ha=0,O=c(),K=c(),fa=c(),Q=!1,M=function(d,a){return d===a?(Q=!0,0):0},T=typeof a,P=-2147483648,Ia={}.hasOwnProperty,R=[],wa=R.pop,
na=R.push,W=R.push,ca=R.slice,$=R.indexOf||function(d){for(var a=0,b=this.length;b>a;a++)if(this[a]===d)return a;return-1},ia="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ja="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ia+")|)|)[\\x20\\t\\r\\n\\f]*\\]",ea=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ja.replace(3,8)+")*)|.*)\\)|)",
da=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Ba=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,za=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ga=/[\x20\t\r\n\f]*[+~]/,la=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*)[\\x20\\t\\r\\n\\f]*\\]","g"),ma=RegExp(ea),oa=RegExp("^"+ia+"$"),ha={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+ja),PSEUDO:RegExp("^"+
ea),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},ka=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/^(?:input|select|textarea|button)$/i,ta=/^h\d$/i,ua=/'|\\/g,pa=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),qa=function(d,a,b){d="0x"+a-65536;return d!==d||b?a:0>d?String.fromCharCode(d+65536):String.fromCharCode(55296|d>>10,56320|1023&d)};try{W.apply(R=ca.call(Z.childNodes),Z.childNodes),R[Z.childNodes.length].nodeType}catch(ya){W={apply:R.length?function(d,a){na.apply(d,ca.call(a))}:function(d,
a){for(var b=d.length,c=0;d[b++]=a[c++];);d.length=b-1}}}Y=b.isXML=function(d){return(d=d&&(d.ownerDocument||d).documentElement)?"HTML"!==d.nodeName:!1};H=b.support={};U=b.setDocument=function(d){var b=d?d.ownerDocument||d:Z;d=b.defaultView;return b!==E&&9===b.nodeType&&b.documentElement?(E=b,N=b.documentElement,A=!Y(b),d&&d.attachEvent&&d!==d.top&&d.attachEvent("onbeforeunload",function(){U()}),H.attributes=f(function(d){return d.className="i",!d.getAttribute("className")}),H.getElementsByTagName=
f(function(d){return d.appendChild(b.createComment("")),!d.getElementsByTagName("*").length}),H.getElementsByClassName=f(function(d){return d.innerHTML="<div class='a'></div><div class='a i'></div>",d.firstChild.className="i",2===d.getElementsByClassName("i").length}),H.getById=f(function(d){return N.appendChild(d).id=V,!b.getElementsByName||!b.getElementsByName(V).length}),H.getById?(G.find.ID=function(d,a){if(typeof a.getElementById!==T&&A){var b=a.getElementById(d);return b&&b.parentNode?[b]:[]}},
G.filter.ID=function(d){var a=d.replace(pa,qa);return function(d){return d.getAttribute("id")===a}}):(delete G.find.ID,G.filter.ID=function(d){var a=d.replace(pa,qa);return function(d){return(d=typeof d.getAttributeNode!==T&&d.getAttributeNode("id"))&&d.value===a}}),G.find.TAG=H.getElementsByTagName?function(d,b){return typeof b.getElementsByTagName!==T?b.getElementsByTagName(d):a}:function(d,a){var b,c=[],q=0,e=a.getElementsByTagName(d);if("*"===d){for(;b=e[q++];)1===b.nodeType&&c.push(b);return c}return e},
G.find.CLASS=H.getElementsByClassName&&function(d,b){return typeof b.getElementsByClassName!==T&&A?b.getElementsByClassName(d):a},F=[],x=[],(H.qsa=ka.test(b.querySelectorAll))&&(f(function(d){d.innerHTML="<select><option selected=''></option></select>";d.querySelectorAll("[selected]").length||x.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");d.querySelectorAll(":checked").length||x.push(":checked")}),
f(function(d){var a=b.createElement("input");a.setAttribute("type","hidden");d.appendChild(a).setAttribute("t","");d.querySelectorAll("[t^='']").length&&x.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");d.querySelectorAll(":enabled").length||x.push(":enabled",":disabled");d.querySelectorAll("*,:x");x.push(",.*:")})),(H.matchesSelector=ka.test(y=N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&f(function(d){H.disconnectedMatch=y.call(d,"div");y.call(d,"[s!='']:x");
F.push("!=",ea)}),x=x.length&&RegExp(x.join("|")),F=F.length&&RegExp(F.join("|")),S=ka.test(N.contains)||N.compareDocumentPosition?function(d,a){var b=9===d.nodeType?d.documentElement:d,c=a&&a.parentNode;return d===c||!(!c||1!==c.nodeType||!(b.contains?b.contains(c):d.compareDocumentPosition&&16&d.compareDocumentPosition(c)))}:function(d,a){if(a)for(;a=a.parentNode;)if(a===d)return!0;return!1},M=N.compareDocumentPosition?function(d,a){if(d===a)return Q=!0,0;var c=a.compareDocumentPosition&&d.compareDocumentPosition&&
d.compareDocumentPosition(a);return c?1&c||!H.sortDetached&&a.compareDocumentPosition(d)===c?d===b||S(Z,d)?-1:a===b||S(Z,a)?1:J?$.call(J,d)-$.call(J,a):0:4&c?-1:1:d.compareDocumentPosition?-1:1}:function(d,a){var c,q=0;c=d.parentNode;var e=a.parentNode,k=[d],f=[a];if(d===a)return Q=!0,0;if(!c||!e)return d===b?-1:a===b?1:c?-1:e?1:J?$.call(J,d)-$.call(J,a):0;if(c===e)return l(d,a);for(c=d;c=c.parentNode;)k.unshift(c);for(c=a;c=c.parentNode;)f.unshift(c);for(;k[q]===f[q];)q++;return q?l(k[q],f[q]):k[q]===
Z?-1:f[q]===Z?1:0},b):E};b.matches=function(d,a){return b(d,null,null,a)};b.matchesSelector=function(d,a){if((d.ownerDocument||d)!==E&&U(d),a=a.replace(la,"='$1']"),!(!H.matchesSelector||!A||F&&F.test(a)||x&&x.test(a)))try{var c=y.call(d,a);if(c||H.disconnectedMatch||d.document&&11!==d.document.nodeType)return c}catch(q){}return 0<b(a,E,null,[d]).length};b.contains=function(d,a){return(d.ownerDocument||d)!==E&&U(d),S(d,a)};b.attr=function(d,b){(d.ownerDocument||d)!==E&&U(d);var c=G.attrHandle[b.toLowerCase()],
c=c&&Ia.call(G.attrHandle,b.toLowerCase())?c(d,b,!A):a;return c===a?H.attributes||!A?d.getAttribute(b):(c=d.getAttributeNode(b))&&c.specified?c.value:null:c};b.error=function(d){throw Error("Syntax error, unrecognized expression: "+d);};b.uniqueSort=function(d){var a,b=[],c=0,q=0;if(Q=!H.detectDuplicates,J=!H.sortStable&&d.slice(0),d.sort(M),Q){for(;a=d[q++];)a===d[q]&&(c=b.push(q));for(;c--;)d.splice(b[c],1)}return d};C=b.getText=function(d){var a,b="",c=0;if(a=d.nodeType)if(1===a||9===a||11===a){if("string"==
typeof d.textContent)return d.textContent;for(d=d.firstChild;d;d=d.nextSibling)b+=C(d)}else{if(3===a||4===a)return d.nodeValue}else for(;a=d[c];c++)b+=C(a);return b};G=b.selectors={cacheLength:50,createPseudo:e,match:ha,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(d){return d[1]=d[1].replace(pa,qa),d[3]=(d[4]||d[5]||"").replace(pa,qa),"~="===d[2]&&(d[3]=" "+d[3]+" "),
d.slice(0,4)},CHILD:function(d){return d[1]=d[1].toLowerCase(),"nth"===d[1].slice(0,3)?(d[3]||b.error(d[0]),d[4]=+(d[4]?d[5]+(d[6]||1):2*("even"===d[3]||"odd"===d[3])),d[5]=+(d[7]+d[8]||"odd"===d[3])):d[3]&&b.error(d[0]),d},PSEUDO:function(d){var b,c=!d[5]&&d[2];return ha.CHILD.test(d[0])?null:(d[3]&&d[4]!==a?d[2]=d[4]:c&&ma.test(c)&&(b=n(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(d[0]=d[0].slice(0,b),d[2]=c.slice(0,b)),d.slice(0,3))}},filter:{TAG:function(d){var a=d.replace(pa,qa).toLowerCase();
return"*"===d?function(){return!0}:function(d){return d.nodeName&&d.nodeName.toLowerCase()===a}},CLASS:function(d){var a=O[d+" "];return a||(a=RegExp("(^|[\\x20\\t\\r\\n\\f])"+d+"([\\x20\\t\\r\\n\\f]|$)"))&&O(d,function(d){return a.test("string"==typeof d.className&&d.className||typeof d.getAttribute!==T&&d.getAttribute("class")||"")})},ATTR:function(d,a,c){return function(q){q=b.attr(q,d);return null==q?"!="===a:a?(q+="","="===a?q===c:"!="===a?q!==c:"^="===a?c&&0===q.indexOf(c):"*="===a?c&&-1<q.indexOf(c):
"$="===a?c&&q.slice(-c.length)===c:"~="===a?-1<(" "+q+" ").indexOf(c):"|="===a?q===c||q.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(d,a,b,c,q){var e="nth"!==d.slice(0,3),k="last"!==d.slice(-4),f="of-type"===a;return 1===c&&0===q?function(d){return!!d.parentNode}:function(a,b,g){var l,h,p,aa,r;b=e!==k?"nextSibling":"previousSibling";var s=a.parentNode,n=f&&a.nodeName.toLowerCase();g=!g&&!f;if(s){if(e){for(;b;){for(h=a;h=h[b];)if(f?h.nodeName.toLowerCase()===n:1===h.nodeType)return!1;r=b="only"===
d&&!r&&"nextSibling"}return!0}if(r=[k?s.firstChild:s.lastChild],k&&g)for(g=s[V]||(s[V]={}),l=g[d]||[],aa=l[0]===L&&l[1],p=l[0]===L&&l[2],h=aa&&s.childNodes[aa];h=++aa&&h&&h[b]||(p=aa=0)||r.pop();){if(1===h.nodeType&&++p&&h===a){g[d]=[L,aa,p];break}}else if(g&&(l=(a[V]||(a[V]={}))[d])&&l[0]===L)p=l[1];else for(;(h=++aa&&h&&h[b]||(p=aa=0)||r.pop())&&((f?h.nodeName.toLowerCase()!==n:1!==h.nodeType)||!++p||(g&&((h[V]||(h[V]={}))[d]=[L,p]),h!==a)););return p-=q,p===c||0===p%c&&0<=p/c}}},PSEUDO:function(d,
a){var c,q=G.pseudos[d]||G.setFilters[d.toLowerCase()]||b.error("unsupported pseudo: "+d);return q[V]?q(a):1<q.length?(c=[d,d,"",a],G.setFilters.hasOwnProperty(d.toLowerCase())?e(function(d,b){for(var c,e=q(d,a),k=e.length;k--;)c=$.call(d,e[k]),d[c]=!(b[c]=e[k])}):function(d){return q(d,0,c)}):q}},pseudos:{not:e(function(d){var a=[],b=[],c=X(d.replace(da,"$1"));return c[V]?e(function(d,a,b,q){var e;b=c(d,null,q,[]);for(q=d.length;q--;)(e=b[q])&&(d[q]=!(a[q]=e))}):function(d,q,e){return a[0]=d,c(a,
null,e,b),!b.pop()}}),has:e(function(d){return function(a){return 0<b(d,a).length}}),contains:e(function(d){return function(a){return-1<(a.textContent||a.innerText||C(a)).indexOf(d)}}),lang:e(function(d){return oa.test(d||"")||b.error("unsupported lang: "+d),d=d.replace(pa,qa).toLowerCase(),function(a){var b;do if(b=A?a.lang:a.getAttribute("xml:lang")||a.getAttribute("lang"))return b=b.toLowerCase(),b===d||0===b.indexOf(d+"-");while((a=a.parentNode)&&1===a.nodeType);return!1}}),target:function(a){var b=
d.location&&d.location.hash;return b&&b.slice(1)===a.id},root:function(d){return d===N},focus:function(d){return d===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(d.type||d.href||~d.tabIndex)},enabled:function(d){return!1===d.disabled},disabled:function(d){return!0===d.disabled},checked:function(d){var a=d.nodeName.toLowerCase();return"input"===a&&!!d.checked||"option"===a&&!!d.selected},selected:function(d){return d.parentNode&&d.parentNode.selectedIndex,!0===d.selected},empty:function(d){for(d=
d.firstChild;d;d=d.nextSibling)if("@"<d.nodeName||3===d.nodeType||4===d.nodeType)return!1;return!0},parent:function(d){return!G.pseudos.empty(d)},header:function(d){return ta.test(d.nodeName)},input:function(d){return sa.test(d.nodeName)},button:function(d){var a=d.nodeName.toLowerCase();return"input"===a&&"button"===d.type||"button"===a},text:function(d){var a;return"input"===d.nodeName.toLowerCase()&&"text"===d.type&&(null==(a=d.getAttribute("type"))||a.toLowerCase()===d.type)},first:r(function(){return[0]}),
last:r(function(d,a){return[a-1]}),eq:r(function(d,a,b){return[0>b?b+a:b]}),even:r(function(d,a){for(var b=0;a>b;b+=2)d.push(b);return d}),odd:r(function(d,a){for(var b=1;a>b;b+=2)d.push(b);return d}),lt:r(function(d,a,b){for(a=0>b?b+a:b;0<=--a;)d.push(a);return d}),gt:r(function(d,a,b){for(b=0>b?b+a:b;a>++b;)d.push(b);return d})}};G.pseudos.nth=G.pseudos.eq;for(I in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})G.pseudos[I]=h(I);for(I in{submit:!0,reset:!0})G.pseudos[I]=p(I);s.prototype=G.filters=
G.pseudos;G.setFilters=new s;X=b.compile=function(d,a){var b,c=[],q=[],e=fa[d+" "];if(!e){a||(a=n(d));for(b=a.length;b--;)e=w(a[b]),e[V]?c.push(e):q.push(e);e=fa(d,z(q,c))}return e};H.sortStable=V.split("").sort(M).join("")===V;H.detectDuplicates=Q;U();H.sortDetached=f(function(d){return 1&d.compareDocumentPosition(E.createElement("div"))});f(function(d){return d.innerHTML="<a href='#'></a>","#"===d.firstChild.getAttribute("href")})||g("type|href|height|width",function(d,b,c){return c?a:d.getAttribute(b,
"type"===b.toLowerCase()?1:2)});H.attributes&&f(function(d){return d.innerHTML="<input/>",d.firstChild.setAttribute("value",""),""===d.firstChild.getAttribute("value")})||g("value",function(d,b,c){return c||"input"!==d.nodeName.toLowerCase()?a:d.defaultValue});f(function(d){return null==d.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(d,b,c){var e;return c?a:(e=d.getAttributeNode(b))&&
e.specified?e.value:!0===d[b]?b.toLowerCase():null});k.find=b;k.expr=b.selectors;k.expr[":"]=k.expr.pseudos;k.unique=b.uniqueSort;k.text=b.getText;k.isXMLDoc=b.isXML;k.contains=b.contains})(n);var Ua={};k.Callbacks=function(d){d="string"==typeof d?Ua[d]||h(d):k.extend({},d);var a,c,e,f,g,l,p=[],r=!d.once&&[],s=function(b){c=d.memory&&b;e=!0;g=l||0;l=0;f=p.length;for(a=!0;p&&f>g;g++)if(!1===p[g].apply(b[0],b[1])&&d.stopOnFalse){c=!1;break}a=!1;p&&(r?r.length&&s(r.shift()):c?p=[]:n.disable())},n={add:function(){if(p){var b=
p.length;(function Kb(a){k.each(a,function(a,b){var c=k.type(b);"function"===c?d.unique&&n.has(b)||p.push(b):b&&b.length&&"string"!==c&&Kb(b)})})(arguments);a?f=p.length:c&&(l=b,s(c))}return this},remove:function(){return p&&k.each(arguments,function(d,b){for(var c;-1<(c=k.inArray(b,p,c));)p.splice(c,1),a&&(f>=c&&f--,g>=c&&g--)}),this},has:function(d){return d?-1<k.inArray(d,p):!(!p||!p.length)},empty:function(){return p=[],f=0,this},disable:function(){return p=r=c=b,this},disabled:function(){return!p},
lock:function(){return r=b,c||n.disable(),this},locked:function(){return!r},fireWith:function(d,b){return!p||e&&!r||(b=b||[],b=[d,b.slice?b.slice():b],a?r.push(b):s(b)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!e}};return n};k.extend({Deferred:function(d){var a=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify","progress",k.Callbacks("memory")]],b="pending",c={state:function(){return b},
always:function(){return e.done(arguments).fail(arguments),this},then:function(){var d=arguments;return k.Deferred(function(b){k.each(a,function(a,q){var f=q[0],g=k.isFunction(d[a])&&d[a];e[q[1]](function(){var d=g&&g.apply(this,arguments);d&&k.isFunction(d.promise)?d.promise().done(b.resolve).fail(b.reject).progress(b.notify):b[f+"With"](this===c?b.promise():this,g?[d]:arguments)})});d=null}).promise()},promise:function(d){return null!=d?k.extend(d,c):c}},e={};return c.pipe=c.then,k.each(a,function(d,
k){var f=k[2],g=k[3];c[k[1]]=f.add;g&&f.add(function(){b=g},a[1^d][2].disable,a[2][2].lock);e[k[0]]=function(){return e[k[0]+"With"](this===e?c:this,arguments),this};e[k[0]+"With"]=f.fireWith}),c.promise(e),d&&d.call(e,e),e},when:function(d){var a=0,b=ga.call(arguments),c=b.length,e=1!==c||d&&k.isFunction(d.promise)?c:0,f=1===e?d:k.Deferred(),g=function(d,a,b){return function(c){a[d]=this;b[d]=1<arguments.length?ga.call(arguments):c;b===l?f.notifyWith(a,b):--e||f.resolveWith(a,b)}},l,h,p;if(1<c)for(l=
Array(c),h=Array(c),p=Array(c);c>a;a++)b[a]&&k.isFunction(b[a].promise)?b[a].promise().done(g(a,p,b)).fail(f.reject).progress(g(a,h,l)):--e;return e||f.resolveWith(p,b),f.promise()}});k.support=function(d){var a,b,c,e,f,g,l=B.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=l.getElementsByTagName("*")||[],b=l.getElementsByTagName("a")[0],!b||!b.style||!a.length)return d;c=B.createElement("select");e=c.appendChild(B.createElement("option"));
a=l.getElementsByTagName("input")[0];b.style.cssText="top:1px;float:left;opacity:.5";d.getSetAttribute="t"!==l.className;d.leadingWhitespace=3===l.firstChild.nodeType;d.tbody=!l.getElementsByTagName("tbody").length;d.htmlSerialize=!!l.getElementsByTagName("link").length;d.style=/top/.test(b.getAttribute("style"));d.hrefNormalized="/a"===b.getAttribute("href");d.opacity=/^0.5/.test(b.style.opacity);d.cssFloat=!!b.style.cssFloat;d.checkOn=!!a.value;d.optSelected=e.selected;d.enctype=!!B.createElement("form").enctype;
d.html5Clone="<:nav></:nav>"!==B.createElement("nav").cloneNode(!0).outerHTML;d.inlineBlockNeedsLayout=!1;d.shrinkWrapBlocks=!1;d.pixelPosition=!1;d.deleteExpando=!0;d.noCloneEvent=!0;d.reliableMarginRight=!0;d.boxSizingReliable=!0;a.checked=!0;d.noCloneChecked=a.cloneNode(!0).checked;c.disabled=!0;d.optDisabled=!e.disabled;try{delete l.test}catch(p){d.deleteExpando=!1}a=B.createElement("input");a.setAttribute("value","");d.input=""===a.getAttribute("value");a.value="t";a.setAttribute("type","radio");
d.radioValue="t"===a.value;a.setAttribute("checked","t");a.setAttribute("name","t");b=B.createDocumentFragment();b.appendChild(a);d.appendChecked=a.checked;d.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;l.attachEvent&&(l.attachEvent("onclick",function(){d.noCloneEvent=!1}),l.cloneNode(!0).click());for(g in{submit:!0,change:!0,focusin:!0})l.setAttribute(b="on"+g,"t"),d[g+"Bubbles"]=b in n||!1===l.attributes[b].expando;l.style.backgroundClip="content-box";l.cloneNode(!0).style.backgroundClip=
"";d.clearCloneStyle="content-box"===l.style.backgroundClip;for(g in k(d))break;return d.ownLast="0"!==g,k(function(){var a,b,c,e=B.getElementsByTagName("body")[0];e&&(a=B.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(a).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=l.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",f=0===c[0].offsetHeight,c[0].style.display=
"",c[1].style.display="none",d.reliableHiddenOffsets=f&&0===c[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",k.swap(e,null!=e.style.zoom?{zoom:1}:{},function(){d.boxSizing=4===l.offsetWidth}),n.getComputedStyle&&(d.pixelPosition="1%"!==(n.getComputedStyle(l,null)||{}).top,d.boxSizingReliable="4px"===(n.getComputedStyle(l,null)||{width:"4px"}).width,
b=l.appendChild(B.createElement("div")),b.style.cssText=l.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",b.style.marginRight=b.style.width="0",l.style.width="1px",d.reliableMarginRight=!parseFloat((n.getComputedStyle(b,null)||{}).marginRight)),typeof l.style.zoom!==H&&(l.innerHTML="",l.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",
d.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",d.shrinkWrapBlocks=3!==l.offsetWidth,d.inlineBlockNeedsLayout&&(e.style.zoom=1)),e.removeChild(a),a=l=c=b=null)}),a=c=b=e=b=a=null,d}({});var vb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ub=/([A-Z])/g;k.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(d){return d=d.nodeType?k.cache[d[k.expando]]:d[k.expando],!!d&&!g(d)},data:function(d,
b,c){return a(d,b,c)},removeData:function(d,a){return c(d,a)},_data:function(d,b,c){return a(d,b,c,!0)},_removeData:function(d,a){return c(d,a,!0)},acceptData:function(d){if(d.nodeType&&1!==d.nodeType&&9!==d.nodeType)return!1;var a=d.nodeName&&k.noData[d.nodeName.toLowerCase()];return!a||!0!==a&&d.getAttribute("classid")===a}});k.fn.extend({data:function(d,a){var c,f,g=null,l=0,p=this[0];if(d===b){if(this.length&&(g=k.data(p),1===p.nodeType&&!k._data(p,"parsedAttrs"))){for(c=p.attributes;c.length>
l;l++)f=c[l].name,0===f.indexOf("data-")&&(f=k.camelCase(f.slice(5)),e(p,f,g[f]));k._data(p,"parsedAttrs",!0)}return g}return"object"==typeof d?this.each(function(){k.data(this,d)}):1<arguments.length?this.each(function(){k.data(this,d,a)}):p?e(p,d,k.data(p,d)):null},removeData:function(d){return this.each(function(){k.removeData(this,d)})}});k.extend({queue:function(d,a,c){var e;return d?(a=(a||"fx")+"queue",e=k._data(d,a),c&&(!e||k.isArray(c)?e=k._data(d,a,k.makeArray(c)):e.push(c)),e||[]):b},dequeue:function(d,
a){a=a||"fx";var b=k.queue(d,a),c=b.length,e=b.shift(),f=k._queueHooks(d,a),g=function(){k.dequeue(d,a)};"inprogress"===e&&(e=b.shift(),c--);e&&("fx"===a&&b.unshift("inprogress"),delete f.stop,e.call(d,g,f));!c&&f&&f.empty.fire()},_queueHooks:function(d,a){var b=a+"queueHooks";return k._data(d,b)||k._data(d,b,{empty:k.Callbacks("once memory").add(function(){k._removeData(d,a+"queue");k._removeData(d,b)})})}});k.fn.extend({queue:function(d,a){var c=2;return"string"!=typeof d&&(a=d,d="fx",c--),c>arguments.length?
k.queue(this[0],d):a===b?this:this.each(function(){var b=k.queue(this,d,a);k._queueHooks(this,d);"fx"===d&&"inprogress"!==b[0]&&k.dequeue(this,d)})},dequeue:function(d){return this.each(function(){k.dequeue(this,d)})},delay:function(d,a){return d=k.fx?k.fx.speeds[d]||d:d,a=a||"fx",this.queue(a,function(a,b){var c=setTimeout(a,d);b.stop=function(){clearTimeout(c)}})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,a){var c,e=1,f=k.Deferred(),g=this,l=this.length,p=function(){--e||
f.resolveWith(g,[g])};"string"!=typeof d&&(a=d,d=b);for(d=d||"fx";l--;)(c=k._data(g[l],d+"queueHooks"))&&c.empty&&(e++,c.empty.add(p));return p(),f.promise(a)}});var ka,bb,Ka=/[\t\r\n\f]/g,Lb=/\r/g,Mb=/^(?:input|select|textarea|button|object)$/i,Nb=/^(?:a|area)$/i,La=/^(?:checked|selected)$/i,la=k.support.getSetAttribute,Da=k.support.input;k.fn.extend({attr:function(d,a){return k.access(this,k.attr,d,a,1<arguments.length)},removeAttr:function(d){return this.each(function(){k.removeAttr(this,d)})},
prop:function(d,a){return k.access(this,k.prop,d,a,1<arguments.length)},removeProp:function(d){return d=k.propFix[d]||d,this.each(function(){try{this[d]=b,delete this[d]}catch(a){}})},addClass:function(d){var a,b,c,e,f,g=0,l=this.length;a="string"==typeof d&&d;if(k.isFunction(d))return this.each(function(a){k(this).addClass(d.call(this,a,this.className))});if(a)for(a=(d||"").match(ca)||[];l>g;g++)if(b=this[g],c=1===b.nodeType&&(b.className?(" "+b.className+" ").replace(Ka," "):" ")){for(f=0;e=a[f++];)0>
c.indexOf(" "+e+" ")&&(c+=e+" ");b.className=k.trim(c)}return this},removeClass:function(d){var a,b,c,e,f,g=0,l=this.length;a=0===arguments.length||"string"==typeof d&&d;if(k.isFunction(d))return this.each(function(a){k(this).removeClass(d.call(this,a,this.className))});if(a)for(a=(d||"").match(ca)||[];l>g;g++)if(b=this[g],c=1===b.nodeType&&(b.className?(" "+b.className+" ").replace(Ka," "):"")){for(f=0;e=a[f++];)for(;0<=c.indexOf(" "+e+" ");)c=c.replace(" "+e+" "," ");b.className=d?k.trim(c):""}return this},
toggleClass:function(d,a){var b=typeof d;return"boolean"==typeof a&&"string"===b?a?this.addClass(d):this.removeClass(d):k.isFunction(d)?this.each(function(b){k(this).toggleClass(d.call(this,b,this.className,a),a)}):this.each(function(){if("string"===b)for(var a,c=0,e=k(this),f=d.match(ca)||[];a=f[c++];)e.hasClass(a)?e.removeClass(a):e.addClass(a);else(b===H||"boolean"===b)&&(this.className&&k._data(this,"__className__",this.className),this.className=this.className||!1===d?"":k._data(this,"__className__")||
"")})},hasClass:function(d){d=" "+d+" ";for(var a=0,b=this.length;b>a;a++)if(1===this[a].nodeType&&0<=(" "+this[a].className+" ").replace(Ka," ").indexOf(d))return!0;return!1},val:function(d){var a,c,e,f=this[0];if(arguments.length)return e=k.isFunction(d),this.each(function(a){var f;1===this.nodeType&&(f=e?d.call(this,a,k(this).val()):d,null==f?f="":"number"==typeof f?f+="":k.isArray(f)&&(f=k.map(f,function(d){return null==d?"":d+""})),c=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],
c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=k.valHooks[f.type]||k.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(a=c.get(f,"value"))!==b?a:(a=f.value,"string"==typeof a?a.replace(Lb,""):null==a?"":a)}});k.extend({valHooks:{option:{get:function(d){var a=k.find.attr(d,"value");return null!=a?a:d.text}},select:{get:function(d){for(var a,b=d.options,c=d.selectedIndex,e="select-one"===d.type||0>c,f=e?null:[],g=e?c+1:b.length,l=0>c?g:e?c:0;g>l;l++)if(a=b[l],!(!a.selected&&
l!==c||(k.support.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||a.parentNode.disabled&&k.nodeName(a.parentNode,"optgroup"))){if(d=k(a).val(),e)return d;f.push(d)}return f},set:function(d,a){for(var b,c,e=d.options,f=k.makeArray(a),g=e.length;g--;)c=e[g],(c.selected=0<=k.inArray(k(c).val(),f))&&(b=!0);return b||(d.selectedIndex=-1),f}}},attr:function(d,a,c){var e,f,g=d.nodeType;if(d&&3!==g&&8!==g&&2!==g)return typeof d.getAttribute===H?k.prop(d,a,c):(1===g&&k.isXMLDoc(d)||(a=a.toLowerCase(),
e=k.attrHooks[a]||(k.expr.match.bool.test(a)?bb:ka)),c===b?e&&"get"in e&&null!==(f=e.get(d,a))?f:(f=k.find.attr(d,a),null==f?b:f):null!==c?e&&"set"in e&&(f=e.set(d,c,a))!==b?f:(d.setAttribute(a,c+""),c):(k.removeAttr(d,a),b))},removeAttr:function(d,a){var b,c,e=0,f=a&&a.match(ca);if(f&&1===d.nodeType)for(;b=f[e++];)c=k.propFix[b]||b,k.expr.match.bool.test(b)?Da&&la||!La.test(b)?d[c]=!1:d[k.camelCase("default-"+b)]=d[c]=!1:k.attr(d,b,""),d.removeAttribute(la?b:c)},attrHooks:{type:{set:function(d,a){if(!k.support.radioValue&&
"radio"===a&&k.nodeName(d,"input")){var b=d.value;return d.setAttribute("type",a),b&&(d.value=b),a}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(d,a,c){var e,f,g,l=d.nodeType;if(d&&3!==l&&8!==l&&2!==l)return g=1!==l||!k.isXMLDoc(d),g&&(a=k.propFix[a]||a,f=k.propHooks[a]),c!==b?f&&"set"in f&&(e=f.set(d,c,a))!==b?e:d[a]=c:f&&"get"in f&&null!==(e=f.get(d,a))?e:d[a]},propHooks:{tabIndex:{get:function(d){var a=k.find.attr(d,"tabindex");return a?parseInt(a,10):Mb.test(d.nodeName)||Nb.test(d.nodeName)&&
d.href?0:-1}}}});bb={set:function(d,a,b){return!1===a?k.removeAttr(d,b):Da&&la||!La.test(b)?d.setAttribute(!la&&k.propFix[b]||b,b):d[k.camelCase("default-"+b)]=d[b]=!0,b}};k.each(k.expr.match.bool.source.match(/\w+/g),function(d,a){var c=k.expr.attrHandle[a]||k.find.attr;k.expr.attrHandle[a]=Da&&la||!La.test(a)?function(d,a,e){var f=k.expr.attrHandle[a];d=e?b:(k.expr.attrHandle[a]=b)!=c(d,a,e)?a.toLowerCase():null;return k.expr.attrHandle[a]=f,d}:function(d,a,c){return c?b:d[k.camelCase("default-"+
a)]?a.toLowerCase():null}});Da&&la||(k.attrHooks.value={set:function(d,a,c){return k.nodeName(d,"input")?(d.defaultValue=a,b):ka&&ka.set(d,a,c)}});la||(ka={set:function(d,a,c){var e=d.getAttributeNode(c);return e||d.setAttributeNode(e=d.ownerDocument.createAttribute(c)),e.value=a+="","value"===c||a===d.getAttribute(c)?a:b}},k.expr.attrHandle.id=k.expr.attrHandle.name=k.expr.attrHandle.coords=function(d,a,c){var e;return c?b:(e=d.getAttributeNode(a))&&""!==e.value?e.value:null},k.valHooks.button={get:function(d,
a){var c=d.getAttributeNode(a);return c&&c.specified?c.value:b},set:ka.set},k.attrHooks.contenteditable={set:function(d,a,b){ka.set(d,""===a?!1:a,b)}},k.each(["width","height"],function(d,a){k.attrHooks[a]={set:function(d,c){return""===c?(d.setAttribute(a,"auto"),c):b}}}));k.support.hrefNormalized||k.each(["href","src"],function(d,a){k.propHooks[a]={get:function(d){return d.getAttribute(a,4)}}});k.support.style||(k.attrHooks.style={get:function(d){return d.style.cssText||b},set:function(d,a){return d.style.cssText=
a+""}});k.support.optSelected||(k.propHooks.selected={get:function(d){d=d.parentNode;return d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex),null}});k.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){k.propFix[this.toLowerCase()]=this});k.support.enctype||(k.propFix.enctype="encoding");k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(d,a){return k.isArray(a)?d.checked=0<=k.inArray(k(d).val(),
a):b}};k.support.checkOn||(k.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Ma=/^(?:input|select|textarea)$/i,Ob=/^key/,Pb=/^(?:mouse|contextmenu)|click/,cb=/^(?:focusinfocus|focusoutblur)$/,db=/^([^.]*)(?:\.(.+)|)$/;k.event={global:{},add:function(d,a,c,e,f){var g,l,p,h,r,s,n,m,t,u;if(p=k._data(d)){c.handler&&(h=c,c=h.handler,f=h.selector);c.guid||(c.guid=k.guid++);(l=p.events)||(l=p.events={});(s=p.handle)||(s=p.handle=function(d){return typeof k===H||
d&&k.event.triggered===d.type?b:k.event.dispatch.apply(s.elem,arguments)},s.elem=d);a=(a||"").match(ca)||[""];for(p=a.length;p--;)g=db.exec(a[p])||[],t=u=g[1],g=(g[2]||"").split(".").sort(),t&&(r=k.event.special[t]||{},t=(f?r.delegateType:r.bindType)||t,r=k.event.special[t]||{},n=k.extend({type:t,origType:u,data:e,handler:c,guid:c.guid,selector:f,needsContext:f&&k.expr.match.needsContext.test(f),namespace:g.join(".")},h),(m=l[t])||(m=l[t]=[],m.delegateCount=0,r.setup&&!1!==r.setup.call(d,e,g,s)||
(d.addEventListener?d.addEventListener(t,s,!1):d.attachEvent&&d.attachEvent("on"+t,s))),r.add&&(r.add.call(d,n),n.handler.guid||(n.handler.guid=c.guid)),f?m.splice(m.delegateCount++,0,n):m.push(n),k.event.global[t]=!0);d=null}},remove:function(d,a,b,c,e){var f,g,l,p,h,r,s,n,m,t,u,v=k.hasData(d)&&k._data(d);if(v&&(r=v.events)){a=(a||"").match(ca)||[""];for(h=a.length;h--;)if(l=db.exec(a[h])||[],m=u=l[1],t=(l[2]||"").split(".").sort(),m){s=k.event.special[m]||{};m=(c?s.delegateType:s.bindType)||m;n=
r[m]||[];l=l[2]&&RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)");for(p=f=n.length;f--;)g=n[f],!e&&u!==g.origType||b&&b.guid!==g.guid||l&&!l.test(g.namespace)||c&&c!==g.selector&&("**"!==c||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,s.remove&&s.remove.call(d,g));p&&!n.length&&(s.teardown&&!1!==s.teardown.call(d,t,v.handle)||k.removeEvent(d,m,v.handle),delete r[m])}else for(m in r)k.event.remove(d,m+a[h],b,c,!0);k.isEmptyObject(r)&&(delete v.handle,k._removeData(d,"events"))}},trigger:function(d,
a,c,e){var f,g,l,p,h,r,s=[c||B],m=ha.call(d,"type")?d.type:d;r=ha.call(d,"namespace")?d.namespace.split("."):[];if(l=f=c=c||B,3!==c.nodeType&&8!==c.nodeType&&!cb.test(m+k.event.triggered)&&(0<=m.indexOf(".")&&(r=m.split("."),m=r.shift(),r.sort()),g=0>m.indexOf(":")&&"on"+m,d=d[k.expando]?d:new k.Event(m,"object"==typeof d&&d),d.isTrigger=e?2:3,d.namespace=r.join("."),d.namespace_re=d.namespace?RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=b,d.target||(d.target=c),a=null==a?[d]:
k.makeArray(a,[d]),h=k.event.special[m]||{},e||!h.trigger||!1!==h.trigger.apply(c,a))){if(!e&&!h.noBubble&&!k.isWindow(c)){p=h.delegateType||m;for(cb.test(p+m)||(l=l.parentNode);l;l=l.parentNode)s.push(l),f=l;f===(c.ownerDocument||B)&&s.push(f.defaultView||f.parentWindow||n)}for(r=0;(l=s[r++])&&!d.isPropagationStopped();)d.type=1<r?p:h.bindType||m,(f=(k._data(l,"events")||{})[d.type]&&k._data(l,"handle"))&&f.apply(l,a),(f=g&&l[g])&&k.acceptData(l)&&f.apply&&!1===f.apply(l,a)&&d.preventDefault();if(d.type=
m,!(e||d.isDefaultPrevented()||h._default&&!1!==h._default.apply(s.pop(),a))&&k.acceptData(c)&&g&&c[m]&&!k.isWindow(c)){(f=c[g])&&(c[g]=null);k.event.triggered=m;try{c[m]()}catch(t){}k.event.triggered=b;f&&(c[g]=f)}return d.result}},dispatch:function(d){d=k.event.fix(d);var a,c,e,f,g,l=[],p=ga.call(arguments);a=(k._data(this,"events")||{})[d.type]||[];var h=k.event.special[d.type]||{};if(p[0]=d,d.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,d)){l=k.event.handlers.call(this,d,a);
for(a=0;(f=l[a++])&&!d.isPropagationStopped();)for(d.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!d.isImmediatePropagationStopped();)d.namespace_re&&!d.namespace_re.test(e.namespace)||(d.handleObj=e,d.data=e.data,c=((k.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,p),c===b||!1!==(d.result=c)||(d.preventDefault(),d.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,d),d.result}},handlers:function(d,a){var c,e,f,g,l=[],p=a.delegateCount,h=d.target;if(p&&h.nodeType&&
(!d.button||"click"!==d.type))for(;h!=this;h=h.parentNode||this)if(1===h.nodeType&&(!0!==h.disabled||"click"!==d.type)){f=[];for(g=0;p>g;g++)e=a[g],c=e.selector+" ",f[c]===b&&(f[c]=e.needsContext?0<=k(c,this).index(h):k.find(c,this,null,[h]).length),f[c]&&f.push(e);f.length&&l.push({elem:h,handlers:f})}return a.length>p&&l.push({elem:this,handlers:a.slice(p)}),l},fix:function(d){if(d[k.expando])return d;var a,b,c;a=d.type;var e=d,f=this.fixHooks[a];f||(this.fixHooks[a]=f=Pb.test(a)?this.mouseHooks:
Ob.test(a)?this.keyHooks:{});c=f.props?this.props.concat(f.props):this.props;d=new k.Event(e);for(a=c.length;a--;)b=c[a],d[b]=e[b];return d.target||(d.target=e.srcElement||B),3===d.target.nodeType&&(d.target=d.target.parentNode),d.metaKey=!!d.metaKey,f.filter?f.filter(d,e):d},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(d,a){return null==
d.which&&(d.which=null!=a.charCode?a.charCode:a.keyCode),d}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(d,a){var c,e,f,k=a.button,g=a.fromElement;return null==d.pageX&&null!=a.clientX&&(e=d.target.ownerDocument||B,f=e.documentElement,c=e.body,d.pageX=a.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),d.pageY=a.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||
c&&c.clientTop||0)),!d.relatedTarget&&g&&(d.relatedTarget=g===d.target?a.toElement:g),d.which||k===b||(d.which=1&k?1:2&k?3:4&k?2:0),d}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==r()&&this.focus)try{return this.focus(),!1}catch(d){}},delegateType:"focusin"},blur:{trigger:function(){return this===r()&&this.blur?(this.blur(),!1):b},delegateType:"focusout"},click:{trigger:function(){return k.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):b},_default:function(d){return k.nodeName(d.target,
"a")}},beforeunload:{postDispatch:function(d){d.result!==b&&(d.originalEvent.returnValue=d.result)}}},simulate:function(d,a,b,c){d=k.extend(new k.Event,b,{type:d,isSimulated:!0,originalEvent:{}});c?k.event.trigger(d,null,a):k.event.dispatch.call(a,d);d.isDefaultPrevented()&&b.preventDefault()}};k.removeEvent=B.removeEventListener?function(d,a,b){d.removeEventListener&&d.removeEventListener(a,b,!1)}:function(d,a,b){a="on"+a;d.detachEvent&&(typeof d[a]===H&&(d[a]=null),d.detachEvent(a,b))};k.Event=
function(d,a){return this instanceof k.Event?(d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||!1===d.returnValue||d.getPreventDefault&&d.getPreventDefault()?f:l):this.type=d,a&&k.extend(this,a),this.timeStamp=d&&d.timeStamp||k.now(),this[k.expando]=!0,b):new k.Event(d,a)};k.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=f;d&&(d.preventDefault?
d.preventDefault():d.returnValue=!1)},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=f;d&&(d.stopPropagation&&d.stopPropagation(),d.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()}};k.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(d,a){k.event.special[d]={delegateType:a,bindType:a,handle:function(d){var b,c=d.relatedTarget,e=d.handleObj;return(!c||c!==this&&!k.contains(this,c))&&(d.type=
e.origType,b=e.handler.apply(this,arguments),d.type=a),b}}});k.support.submitBubbles||(k.event.special.submit={setup:function(){return k.nodeName(this,"form")?!1:(k.event.add(this,"click._submit keypress._submit",function(d){d=d.target;(d=k.nodeName(d,"input")||k.nodeName(d,"button")?d.form:b)&&!k._data(d,"submitBubbles")&&(k.event.add(d,"submit._submit",function(d){d._submit_bubble=!0}),k._data(d,"submitBubbles",!0))}),b)},postDispatch:function(d){d._submit_bubble&&(delete d._submit_bubble,this.parentNode&&
!d.isTrigger&&k.event.simulate("submit",this.parentNode,d,!0))},teardown:function(){return k.nodeName(this,"form")?!1:(k.event.remove(this,"._submit"),b)}});k.support.changeBubbles||(k.event.special.change={setup:function(){return Ma.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(k.event.add(this,"propertychange._change",function(d){"checked"===d.originalEvent.propertyName&&(this._just_changed=!0)}),k.event.add(this,"click._change",function(d){this._just_changed&&!d.isTrigger&&
(this._just_changed=!1);k.event.simulate("change",this,d,!0)})),!1):(k.event.add(this,"beforeactivate._change",function(d){d=d.target;Ma.test(d.nodeName)&&!k._data(d,"changeBubbles")&&(k.event.add(d,"change._change",function(d){!this.parentNode||d.isSimulated||d.isTrigger||k.event.simulate("change",this.parentNode,d,!0)}),k._data(d,"changeBubbles",!0))}),b)},handle:function(d){var a=d.target;return this!==a||d.isSimulated||d.isTrigger||"radio"!==a.type&&"checkbox"!==a.type?d.handleObj.handler.apply(this,
arguments):b},teardown:function(){return k.event.remove(this,"._change"),!Ma.test(this.nodeName)}});k.support.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(d,a){var b=0,c=function(d){k.event.simulate(a,d.target,k.event.fix(d),!0)};k.event.special[a]={setup:function(){0===b++&&B.addEventListener(d,c,!0)},teardown:function(){0===--b&&B.removeEventListener(d,c,!0)}}});k.fn.extend({on:function(d,a,c,e,f){var g,p;if("object"==typeof d){"string"!=typeof a&&(c=c||a,a=b);for(g in d)this.on(g,
a,c,d[g],f);return this}if(null==c&&null==e?(e=a,c=a=b):null==e&&("string"==typeof a?(e=c,c=b):(e=c,c=a,a=b)),!1===e)e=l;else if(!e)return this;return 1===f&&(p=e,e=function(d){return k().off(d),p.apply(this,arguments)},e.guid=p.guid||(p.guid=k.guid++)),this.each(function(){k.event.add(this,d,e,c,a)})},one:function(d,a,b,c){return this.on(d,a,b,c,1)},off:function(d,a,c){var e,f;if(d&&d.preventDefault&&d.handleObj)return e=d.handleObj,k(d.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:
e.origType,e.selector,e.handler),this;if("object"==typeof d){for(f in d)this.off(f,a,d[f]);return this}return(!1===a||"function"==typeof a)&&(c=a,a=b),!1===c&&(c=l),this.each(function(){k.event.remove(this,d,c,a)})},trigger:function(d,a){return this.each(function(){k.event.trigger(d,a,this)})},triggerHandler:function(d,a){var c=this[0];return c?k.event.trigger(d,a,c,!0):b}});var wb=/^.[^:#\[\.,]*$/,Qb=/^(?:parents|prev(?:Until|All))/,eb=k.expr.match.needsContext,Rb={children:!0,contents:!0,next:!0,
prev:!0};k.fn.extend({find:function(d){var a,b=[],c=this,e=c.length;if("string"!=typeof d)return this.pushStack(k(d).filter(function(){for(a=0;e>a;a++)if(k.contains(c[a],this))return!0}));for(a=0;e>a;a++)k.find(d,c[a],b);return b=this.pushStack(1<e?k.unique(b):b),b.selector=this.selector?this.selector+" "+d:d,b},has:function(d){var a,b=k(d,this),c=b.length;return this.filter(function(){for(a=0;c>a;a++)if(k.contains(this,b[a]))return!0})},not:function(d){return this.pushStack(u(this,d||[],!0))},filter:function(d){return this.pushStack(u(this,
d||[],!1))},is:function(d){return!!u(this,"string"==typeof d&&eb.test(d)?k(d):d||[],!1).length},closest:function(d,a){for(var b,c=0,e=this.length,f=[],g=eb.test(d)||"string"!=typeof d?k(d,a||this.context):0;e>c;c++)for(b=this[c];b&&b!==a;b=b.parentNode)if(11>b.nodeType&&(g?-1<g.index(b):1===b.nodeType&&k.find.matchesSelector(b,d))){f.push(b);break}return this.pushStack(1<f.length?k.unique(f):f)},index:function(d){return d?"string"==typeof d?k.inArray(this[0],k(d)):k.inArray(d.jquery?d[0]:d,this):
this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,a){var b="string"==typeof d?k(d,a):k.makeArray(d&&d.nodeType?[d]:d),b=k.merge(this.get(),b);return this.pushStack(k.unique(b))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}});k.each({parent:function(d){return(d=d.parentNode)&&11!==d.nodeType?d:null},parents:function(d){return k.dir(d,"parentNode")},parentsUntil:function(d,a,b){return k.dir(d,"parentNode",b)},next:function(d){return p(d,
"nextSibling")},prev:function(d){return p(d,"previousSibling")},nextAll:function(d){return k.dir(d,"nextSibling")},prevAll:function(d){return k.dir(d,"previousSibling")},nextUntil:function(d,a,b){return k.dir(d,"nextSibling",b)},prevUntil:function(d,a,b){return k.dir(d,"previousSibling",b)},siblings:function(d){return k.sibling((d.parentNode||{}).firstChild,d)},children:function(d){return k.sibling(d.firstChild)},contents:function(d){return k.nodeName(d,"iframe")?d.contentDocument||d.contentWindow.document:
k.merge([],d.childNodes)}},function(d,a){k.fn[d]=function(b,c){var e=k.map(this,a,b);return"Until"!==d.slice(-5)&&(c=b),c&&"string"==typeof c&&(e=k.filter(c,e)),1<this.length&&(Rb[d]||(e=k.unique(e)),Qb.test(d)&&(e=e.reverse())),this.pushStack(e)}});k.extend({filter:function(d,a,b){var c=a[0];return b&&(d=":not("+d+")"),1===a.length&&1===c.nodeType?k.find.matchesSelector(c,d)?[c]:[]:k.find.matches(d,k.grep(a,function(d){return 1===d.nodeType}))},dir:function(d,a,c){var e=[];for(d=d[a];d&&9!==d.nodeType&&
(c===b||1!==d.nodeType||!k(d).is(c));)1===d.nodeType&&e.push(d),d=d[a];return e},sibling:function(d,a){for(var b=[];d;d=d.nextSibling)1===d.nodeType&&d!==a&&b.push(d);return b}});var Wa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Sb=/ jQuery\d+="(?:null|\d+)"/g,fb=RegExp("<(?:"+Wa+")[\\s/>]","i"),Na=/^\s+/,gb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,hb=
/<([\w:]+)/,ib=/<tbody/i,Tb=/<|&#?\w+;/,Ub=/<(?:script|style|link)/i,Fa=/^(?:checkbox|radio)$/i,Vb=/checked\s*(?:[^=]|=\s*.checked.)/i,jb=/^$|\/(?:java|ecma)script/i,xb=/^true\/(.*)/,Wb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,W={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Oa=s(B).appendChild(B.createElement("div"));W.optgroup=W.option;W.tbody=W.tfoot=W.colgroup=W.caption=W.thead;W.th=W.td;k.fn.extend({text:function(d){return k.access(this,function(d){return d===b?k.text(this):this.empty().append((this[0]&&this[0].ownerDocument||B).createTextNode(d))},null,d,arguments.length)},append:function(){return this.domManip(arguments,function(d){1!==this.nodeType&&
11!==this.nodeType&&9!==this.nodeType||t(this,d).appendChild(d)})},prepend:function(){return this.domManip(arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var a=t(this,d);a.insertBefore(d,a.firstChild)}})},before:function(){return this.domManip(arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return this.domManip(arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},remove:function(d,
a){for(var b,c=d?k.filter(d,this):this,e=0;null!=(b=c[e]);e++)a||1!==b.nodeType||k.cleanData(w(b)),b.parentNode&&(a&&k.contains(b.ownerDocument,b)&&D(w(b,"script")),b.parentNode.removeChild(b));return this},empty:function(){for(var d,a=0;null!=(d=this[a]);a++){for(1===d.nodeType&&k.cleanData(w(d,!1));d.firstChild;)d.removeChild(d.firstChild);d.options&&k.nodeName(d,"select")&&(d.options.length=0)}return this},clone:function(d,a){return d=null==d?!1:d,a=null==a?d:a,this.map(function(){return k.clone(this,
d,a)})},html:function(d){return k.access(this,function(d){var a=this[0]||{},c=0,e=this.length;if(d===b)return 1===a.nodeType?a.innerHTML.replace(Sb,""):b;if(!("string"!=typeof d||Ub.test(d)||!k.support.htmlSerialize&&fb.test(d)||!k.support.leadingWhitespace&&Na.test(d)||W[(hb.exec(d)||["",""])[1].toLowerCase()])){d=d.replace(gb,"<$1></$2>");try{for(;e>c;c++)a=this[c]||{},1===a.nodeType&&(k.cleanData(w(a,!1)),a.innerHTML=d);a=0}catch(f){}}a&&this.empty().append(d)},null,d,arguments.length)},replaceWith:function(){var d=
k.map(this,function(d){return[d.nextSibling,d.parentNode]}),a=0;return this.domManip(arguments,function(b){var c=d[a++],e=d[a++];e&&(c&&c.parentNode!==e&&(c=this.nextSibling),k(this).remove(),e.insertBefore(b,c))},!0),a?this:this.remove()},detach:function(d){return this.remove(d,!0)},domManip:function(d,a,b){d=Ba.apply([],d);var c,e,f,g,l=0,p=this.length,h=this,r=p-1,s=d[0],m=k.isFunction(s);if(m||!(1>=p||"string"!=typeof s||k.support.checkClone)&&Vb.test(s))return this.each(function(c){var e=h.eq(c);
m&&(d[0]=s.call(this,c,e.html()));e.domManip(d,a,b)});if(p&&(g=k.buildFragment(d,this[0].ownerDocument,!1,!b&&this),c=g.firstChild,1===g.childNodes.length&&(g=c),c)){f=k.map(w(g,"script"),v);for(e=f.length;p>l;l++)c=g,l!==r&&(c=k.clone(c,!0,!0),e&&k.merge(f,w(c,"script"))),a.call(this[l],c,l);if(e)for(g=f[f.length-1].ownerDocument,k.map(f,z),l=0;e>l;l++)c=f[l],jb.test(c.type||"")&&!k._data(c,"globalEval")&&k.contains(g,c)&&(c.src?k._evalUrl(c.src):k.globalEval((c.text||c.textContent||c.innerHTML||
"").replace(Wb,"")));g=c=null}return this}});k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,a){k.fn[d]=function(d){for(var b=0,c=[],e=k(d),f=e.length-1;f>=b;b++)d=b===f?this:this.clone(!0),k(e[b])[a](d),za.apply(c,d.get());return this.pushStack(c)}});k.extend({clone:function(d,a,b){var c,e,f,g,l,p=k.contains(d.ownerDocument,d);if(k.support.html5Clone||k.isXMLDoc(d)||!fb.test("<"+d.nodeName+">")?f=d.cloneNode(!0):(Oa.innerHTML=
d.outerHTML,Oa.removeChild(f=Oa.firstChild)),!(k.support.noCloneEvent&&k.support.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||k.isXMLDoc(d)))for(c=w(f),l=w(d),g=0;null!=(e=l[g]);++g)if(c[g]){var h=c[g],r=void 0,s=void 0,m=void 0;if(1===h.nodeType){if(r=h.nodeName.toLowerCase(),!k.support.noCloneEvent&&h[k.expando]){m=k._data(h);for(s in m.events)k.removeEvent(h,s,m.handle);h.removeAttribute(k.expando)}"script"===r&&h.text!==e.text?(v(h).text=e.text,z(h)):"object"===r?(h.parentNode&&(h.outerHTML=
e.outerHTML),k.support.html5Clone&&e.innerHTML&&!k.trim(h.innerHTML)&&(h.innerHTML=e.innerHTML)):"input"===r&&Fa.test(e.type)?(h.defaultChecked=h.checked=e.checked,h.value!==e.value&&(h.value=e.value)):"option"===r?h.defaultSelected=h.selected=e.defaultSelected:("input"===r||"textarea"===r)&&(h.defaultValue=e.defaultValue)}}if(a)if(b)for(l=l||w(d),c=c||w(f),g=0;null!=(e=l[g]);g++)x(e,c[g]);else x(d,f);return c=w(f,"script"),0<c.length&&D(c,!p&&w(d,"script")),f},buildFragment:function(d,a,b,c){for(var e,
f,g,l,h,p,r,m=d.length,n=s(a),t=[],u=0;m>u;u++)if(f=d[u],f||0===f)if("object"===k.type(f))k.merge(t,f.nodeType?[f]:f);else if(Tb.test(f)){l=l||n.appendChild(a.createElement("div"));h=(hb.exec(f)||["",""])[1].toLowerCase();r=W[h]||W._default;l.innerHTML=r[1]+f.replace(gb,"<$1></$2>")+r[2];for(e=r[0];e--;)l=l.lastChild;if(!k.support.leadingWhitespace&&Na.test(f)&&t.push(a.createTextNode(Na.exec(f)[0])),!k.support.tbody)for(e=(f="table"!==h||ib.test(f)?"<table>"!==r[1]||ib.test(f)?0:l:l.firstChild)&&
f.childNodes.length;e--;)k.nodeName(p=f.childNodes[e],"tbody")&&!p.childNodes.length&&f.removeChild(p);k.merge(t,l.childNodes);for(l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=n.lastChild}else t.push(a.createTextNode(f));l&&n.removeChild(l);k.support.appendChecked||k.grep(w(t,"input"),C);for(u=0;f=t[u++];)if((!c||-1===k.inArray(f,c))&&(g=k.contains(f.ownerDocument,f),l=w(n.appendChild(f),"script"),g&&D(l),b))for(e=0;f=l[e++];)jb.test(f.type||"")&&b.push(f);return n},cleanData:function(d,
a){for(var b,c,e,f,g=0,l=k.expando,h=k.cache,p=k.support.deleteExpando,r=k.event.special;null!=(b=d[g]);g++)if((a||k.acceptData(b))&&(e=b[l],f=e&&h[e])){if(f.events)for(c in f.events)r[c]?k.event.remove(b,c):k.removeEvent(b,c,f.handle);h[e]&&(delete h[e],p?delete b[l]:typeof b.removeAttribute!==H?b.removeAttribute(l):b[l]=null,na.push(e))}},_evalUrl:function(d){return k.ajax({url:d,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});k.fn.extend({wrapAll:function(d){if(k.isFunction(d))return this.each(function(a){k(this).wrapAll(d.call(this,
a))});if(this[0]){var a=k(d,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&a.insertBefore(this[0]);a.map(function(){for(var d=this;d.firstChild&&1===d.firstChild.nodeType;)d=d.firstChild;return d}).append(this)}return this},wrapInner:function(d){return k.isFunction(d)?this.each(function(a){k(this).wrapInner(d.call(this,a))}):this.each(function(){var a=k(this),b=a.contents();b.length?b.wrapAll(d):a.append(d)})},wrap:function(d){var a=k.isFunction(d);return this.each(function(b){k(this).wrapAll(a?
d.call(this,b):d)})},unwrap:function(){return this.parent().each(function(){k.nodeName(this,"body")||k(this).replaceWith(this.childNodes)}).end()}});var sa,ea,da,Pa=/alpha\([^)]*\)/i,Xb=/opacity\s*=\s*([^)]*)/,Yb=/^(top|right|bottom|left)$/,Zb=/^(none|table(?!-c[ea]).+)/,kb=/^margin/,yb=RegExp("^("+Ca+")(.*)$","i"),ya=RegExp("^("+Ca+")(?!px)[a-z%]+$","i"),$b=RegExp("^([+-])=("+Ca+")","i"),Ya={BODY:"block"},ac={position:"absolute",visibility:"hidden",display:"block"},lb={letterSpacing:0,fontWeight:400},
ja=["Top","Right","Bottom","Left"],Xa=["Webkit","O","Moz","ms"];k.fn.extend({css:function(d,a){return k.access(this,function(d,a,c){var e,f={},g=0;if(k.isArray(a)){e=ea(d);for(c=a.length;c>g;g++)f[a[g]]=k.css(d,a[g],!1,e);return f}return c!==b?k.style(d,a,c):k.css(d,a)},d,a,1<arguments.length)},show:function(){return K(this,!0)},hide:function(){return K(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){A(this)?k(this).show():k(this).hide()})}});k.extend({cssHooks:{opacity:{get:function(d,
a){if(a){var b=da(d,"opacity");return""===b?"1":b}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.support.cssFloat?"cssFloat":"styleFloat"},style:function(d,a,c,e){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var f,g,l,h=k.camelCase(a),p=d.style;if(a=k.cssProps[h]||(k.cssProps[h]=J(p,h)),l=k.cssHooks[a]||k.cssHooks[h],c===b)return l&&"get"in l&&(f=l.get(d,!1,e))!==b?f:p[a];if(g=typeof c,"string"===
g&&(f=$b.exec(c))&&(c=(f[1]+1)*f[2]+parseFloat(k.css(d,a)),g="number"),!(null==c||"number"===g&&isNaN(c)||("number"!==g||k.cssNumber[h]||(c+="px"),k.support.clearCloneStyle||""!==c||0!==a.indexOf("background")||(p[a]="inherit"),l&&"set"in l&&(c=l.set(d,c,e))===b)))try{p[a]=c}catch(r){}}},css:function(d,a,c,e){var f,g,l,h=k.camelCase(a);return a=k.cssProps[h]||(k.cssProps[h]=J(d.style,h)),l=k.cssHooks[a]||k.cssHooks[h],l&&"get"in l&&(g=l.get(d,!0,c)),g===b&&(g=da(d,a,e)),"normal"===g&&a in lb&&(g=
lb[a]),""===c||c?(f=parseFloat(g),!0===c||k.isNumeric(f)?f||0:g):g}});n.getComputedStyle?(ea=function(d){return n.getComputedStyle(d,null)},da=function(d,a,c){var e,f,g,l=(c=c||ea(d))?c.getPropertyValue(a)||c[a]:b,h=d.style;return c&&(""!==l||k.contains(d.ownerDocument,d)||(l=k.style(d,a)),ya.test(l)&&kb.test(a)&&(e=h.width,f=h.minWidth,g=h.maxWidth,h.minWidth=h.maxWidth=h.width=l,l=c.width,h.width=e,h.minWidth=f,h.maxWidth=g)),l}):B.documentElement.currentStyle&&(ea=function(d){return d.currentStyle},
da=function(d,a,c){var e,f,g;c=(c=c||ea(d))?c[a]:b;var k=d.style;return null==c&&k&&k[a]&&(c=k[a]),ya.test(c)&&!Yb.test(a)&&(e=k.left,f=d.runtimeStyle,g=f&&f.left,g&&(f.left=d.currentStyle.left),k.left="fontSize"===a?"1em":c,c=k.pixelLeft+"px",k.left=e,g&&(f.left=g)),""===c?"auto":c});k.each(["height","width"],function(d,a){k.cssHooks[a]={get:function(d,c,e){return c?0===d.offsetWidth&&Zb.test(k.css(d,"display"))?k.swap(d,ac,function(){return P(d,a,e)}):P(d,a,e):b},set:function(d,c,b){var e=b&&ea(d);
return T(d,c,b?y(d,a,b,k.support.boxSizing&&"border-box"===k.css(d,"boxSizing",!1,e),e):0)}}});k.support.opacity||(k.cssHooks.opacity={get:function(d,a){return Xb.test((a&&d.currentStyle?d.currentStyle.filter:d.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":a?"1":""},set:function(d,a){var c=d.style,b=d.currentStyle,e=k.isNumeric(a)?"alpha(opacity="+100*a+")":"",f=b&&b.filter||c.filter||"";c.zoom=1;(1<=a||""===a)&&""===k.trim(f.replace(Pa,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===
a||b&&!b.filter)||(c.filter=Pa.test(f)?f.replace(Pa,e):f+" "+e)}});k(function(){k.support.reliableMarginRight||(k.cssHooks.marginRight={get:function(d,a){return a?k.swap(d,{display:"inline-block"},da,[d,"marginRight"]):b}});!k.support.pixelPosition&&k.fn.position&&k.each(["top","left"],function(d,a){k.cssHooks[a]={get:function(d,c){return c?(c=da(d,a),ya.test(c)?k(d).position()[a]+"px":c):b}}})});k.expr&&k.expr.filters&&(k.expr.filters.hidden=function(d){return 0>=d.offsetWidth&&0>=d.offsetHeight||
!k.support.reliableHiddenOffsets&&"none"===(d.style&&d.style.display||k.css(d,"display"))},k.expr.filters.visible=function(d){return!k.expr.filters.hidden(d)});k.each({margin:"",padding:"",border:"Width"},function(d,a){k.cssHooks[d+a]={expand:function(c){var b=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>b;b++)e[d+ja[b]+a]=c[b]||c[b-2]||c[0];return e}};kb.test(d)||(k.cssHooks[d+a].set=T)});var bc=/%20/g,zb=/\[\]$/,mb=/\r?\n/g,cc=/^(?:submit|button|image|reset|file)$/i,dc=/^(?:input|select|textarea|keygen)/i;
k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=k.prop(this,"elements");return d?k.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!k(this).is(":disabled")&&dc.test(this.nodeName)&&!cc.test(d)&&(this.checked||!Fa.test(d))}).map(function(d,a){var c=k(this).val();return null==c?null:k.isArray(c)?k.map(c,function(d){return{name:a.name,value:d.replace(mb,"\r\n")}}):{name:a.name,value:c.replace(mb,
"\r\n")}}).get()}});k.param=function(d,a){var c,e=[],f=function(d,a){a=k.isFunction(a)?a():null==a?"":a;e[e.length]=encodeURIComponent(d)+"="+encodeURIComponent(a)};if(a===b&&(a=k.ajaxSettings&&k.ajaxSettings.traditional),k.isArray(d)||d.jquery&&!k.isPlainObject(d))k.each(d,function(){f(this.name,this.value)});else for(c in d)M(c,d[c],a,f);return e.join("&").replace(bc,"+")};k.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(d,a){k.fn[a]=function(d,c){return 0<arguments.length?this.on(a,null,d,c):this.trigger(a)}});k.fn.extend({hover:function(d,a){return this.mouseenter(d).mouseleave(a||d)},bind:function(d,a,c){return this.on(d,null,a,c)},unbind:function(d,a){return this.off(d,null,a)},delegate:function(d,a,c,b){return this.on(a,d,c,b)},undelegate:function(d,a,c){return 1===arguments.length?this.off(d,"**"):this.off(a,d||"**",c)}});var ma,ia,Qa=k.now(),Ra=/\?/,ec=/#.*$/,nb=/([?&])_=[^&]*/,fc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
gc=/^(?:GET|HEAD)$/,hc=/^\/\//,ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,pb=k.fn.load,qb={},Ga={},rb="*/".concat("*");try{ia=G.href}catch(lc){ia=B.createElement("a"),ia.href="",ia=ia.href}ma=ob.exec(ia.toLowerCase())||[];k.fn.load=function(d,a,c){if("string"!=typeof d&&pb)return pb.apply(this,arguments);var e,f,g,l=this,h=d.indexOf(" ");return 0<=h&&(e=d.slice(h,d.length),d=d.slice(0,h)),k.isFunction(a)?(c=a,a=b):a&&"object"==typeof a&&(g="POST"),0<l.length&&k.ajax({url:d,type:g,dataType:"html",
data:a}).done(function(d){f=arguments;l.html(e?k("<div>").append(k.parseHTML(d)).find(e):d)}).complete(c&&function(d,a){l.each(c,f||[d.responseText,a,d])}),this};k.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(d,a){k.fn[a]=function(d){return this.on(a,d)}});k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ia,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ma[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":rb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,a){return a?Y(Y(d,k.ajaxSettings),a):Y(k.ajaxSettings,d)},ajaxPrefilter:R(qb),ajaxTransport:R(Ga),ajax:function(d,
a){function c(d,a,e,f){var s,q,w,z,G=a;if(2!==H){H=2;h&&clearTimeout(h);r=b;l=f||"";I.readyState=0<d?4:0;f=200<=d&&300>d||304===d;if(e){w=m;for(var B=I,C,Y,X,E,D=w.contents,J=w.dataTypes;"*"===J[0];)J.shift(),Y===b&&(Y=w.mimeType||B.getResponseHeader("Content-Type"));if(Y)for(E in D)if(D[E]&&D[E].test(Y)){J.unshift(E);break}if(J[0]in e)X=J[0];else{for(E in e){if(!J[0]||w.converters[E+" "+J[0]]){X=E;break}C||(C=E)}X=X||C}w=X?(X!==J[0]&&J.unshift(X),e[X]):b}var U;a:{e=m;C=w;Y=I;X=f;var N,A,x;w={};B=
e.dataTypes.slice();if(B[1])for(N in e.converters)w[N.toLowerCase()]=e.converters[N];for(E=B.shift();E;)if(e.responseFields[E]&&(Y[e.responseFields[E]]=C),!x&&X&&e.dataFilter&&(C=e.dataFilter(C,e.dataType)),x=E,E=B.shift())if("*"===E)E=x;else if("*"!==x&&x!==E){if(N=w[x+" "+E]||w["* "+E],!N)for(U in w)if(A=U.split(" "),A[1]===E&&(N=w[x+" "+A[0]]||w["* "+A[0]])){!0===N?N=w[U]:!0!==w[U]&&(E=A[0],B.unshift(A[1]));break}if(!0!==N)if(N&&e["throws"])C=N(C);else try{C=N(C)}catch(F){U={state:"parsererror",
error:N?F:"No conversion from "+x+" to "+E};break a}}U={state:"success",data:C}}w=U;f?(m.ifModified&&(z=I.getResponseHeader("Last-Modified"),z&&(k.lastModified[g]=z),z=I.getResponseHeader("etag"),z&&(k.etag[g]=z)),204===d||"HEAD"===m.type?G="nocontent":304===d?G="notmodified":(G=w.state,s=w.data,q=w.error,f=!q)):(q=G,(d||!G)&&(G="error",0>d&&(d=0)));I.status=d;I.statusText=(a||G)+"";f?u.resolveWith(n,[s,G,I]):u.rejectWith(n,[I,G,q]);I.statusCode(ba);ba=b;p&&t.trigger(f?"ajaxSuccess":"ajaxError",[I,
m,f?s:q]);v.fireWith(n,[I,G]);p&&(t.trigger("ajaxComplete",[I,m]),--k.active||k.event.trigger("ajaxStop"))}}"object"==typeof d&&(a=d,d=b);a=a||{};var e,f,g,l,h,p,r,s,m=k.ajaxSetup({},a),n=m.context||m,t=m.context&&(n.nodeType||n.jquery)?k(n):k.event,u=k.Deferred(),v=k.Callbacks("once memory"),ba=m.statusCode||{},w={},z={},H=0,G="canceled",I={readyState:0,getResponseHeader:function(d){var a;if(2===H){if(!s)for(s={};a=fc.exec(l);)s[a[1].toLowerCase()]=a[2];a=s[d.toLowerCase()]}return null==a?null:a},
getAllResponseHeaders:function(){return 2===H?l:null},setRequestHeader:function(d,a){var c=d.toLowerCase();return H||(d=z[c]=z[c]||d,w[d]=a),this},overrideMimeType:function(d){return H||(m.mimeType=d),this},statusCode:function(d){var a;if(d)if(2>H)for(a in d)ba[a]=[ba[a],d[a]];else I.always(d[I.status]);return this},abort:function(d){d=d||G;return r&&r.abort(d),c(0,d),this}};if(u.promise(I).complete=v.add,I.success=I.done,I.error=I.fail,m.url=((d||m.url||ia)+"").replace(ec,"").replace(hc,ma[1]+"//"),
m.type=a.method||a.type||m.method||m.type,m.dataTypes=k.trim(m.dataType||"*").toLowerCase().match(ca)||[""],null==m.crossDomain&&(e=ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===ma[1]&&e[2]===ma[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(ma[3]||("http:"===ma[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=k.param(m.data,m.traditional)),E(qb,m,a,I),2===H)return I;(p=m.global)&&0===k.active++&&k.event.trigger("ajaxStart");m.type=m.type.toUpperCase();m.hasContent=
!gc.test(m.type);g=m.url;m.hasContent||(m.data&&(g=m.url+=(Ra.test(g)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=nb.test(g)?g.replace(nb,"$1_="+Qa++):g+(Ra.test(g)?"&":"?")+"_="+Qa++));m.ifModified&&(k.lastModified[g]&&I.setRequestHeader("If-Modified-Since",k.lastModified[g]),k.etag[g]&&I.setRequestHeader("If-None-Match",k.etag[g]));(m.data&&m.hasContent&&!1!==m.contentType||a.contentType)&&I.setRequestHeader("Content-Type",m.contentType);I.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?
m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+rb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)I.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(!1===m.beforeSend.call(n,I,m)||2===H))return I.abort();G="abort";for(f in{success:1,error:1,complete:1})I[f](m[f]);if(r=E(Ga,m,a,I)){I.readyState=1;p&&t.trigger("ajaxSend",[I,m]);m.async&&0<m.timeout&&(h=setTimeout(function(){I.abort("timeout")},m.timeout));try{H=1,r.send(w,c)}catch(B){if(!(2>H))throw B;c(-1,B)}}else c(-1,"No Transport");return I},
getJSON:function(d,a,c){return k.get(d,a,c,"json")},getScript:function(d,a){return k.get(d,b,a,"script")}});k.each(["get","post"],function(d,a){k[a]=function(d,c,e,f){return k.isFunction(c)&&(f=f||e,e=c,c=b),k.ajax({url:d,type:a,dataType:f,data:c,success:e})}});k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(d){return k.globalEval(d),d}}});k.ajaxPrefilter("script",
function(d){d.cache===b&&(d.cache=!1);d.crossDomain&&(d.type="GET",d.global=!1)});k.ajaxTransport("script",function(d){if(d.crossDomain){var a,c=B.head||k("head")[0]||B.documentElement;return{send:function(b,e){a=B.createElement("script");a.async=!0;d.scriptCharset&&(a.charset=d.scriptCharset);a.src=d.url;a.onload=a.onreadystatechange=function(d,c){(c||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),a=null,c||e(200,
"success"))};c.insertBefore(a,c.firstChild)},abort:function(){a&&a.onload(b,!0)}}}});var sb=[],Sa=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=sb.pop()||k.expando+"_"+Qa++;return this[d]=!0,d}});k.ajaxPrefilter("json jsonp",function(d,a,c){var e,f,g,l=!1!==d.jsonp&&(Sa.test(d.url)?"url":"string"==typeof d.data&&!(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sa.test(d.data)&&"data");return l||"jsonp"===d.dataTypes[0]?(e=d.jsonpCallback=k.isFunction(d.jsonpCallback)?
d.jsonpCallback():d.jsonpCallback,l?d[l]=d[l].replace(Sa,"$1"+e):!1!==d.jsonp&&(d.url+=(Ra.test(d.url)?"&":"?")+d.jsonp+"="+e),d.converters["script json"]=function(){return g||k.error(e+" was not called"),g[0]},d.dataTypes[0]="json",f=n[e],n[e]=function(){g=arguments},c.always(function(){n[e]=f;d[e]&&(d.jsonpCallback=a.jsonpCallback,sb.push(e));g&&k.isFunction(f)&&f(g[0]);g=f=b}),"script"):b});var ra,ua,ic=0,Ta=n.ActiveXObject&&function(){for(var d in ra)ra[d](b,!0)};k.ajaxSettings.xhr=n.ActiveXObject?
function(){var d;if(!(d=!this.isLocal&&N()))a:{try{d=new n.ActiveXObject("Microsoft.XMLHTTP");break a}catch(a){}d=void 0}return d}:N;ua=k.ajaxSettings.xhr();k.support.cors=!!ua&&"withCredentials"in ua;(ua=k.support.ajax=!!ua)&&k.ajaxTransport(function(d){if(!d.crossDomain||k.support.cors){var a;return{send:function(c,e){var f,g,l=d.xhr();if(d.username?l.open(d.type,d.url,d.async,d.username,d.password):l.open(d.type,d.url,d.async),d.xhrFields)for(g in d.xhrFields)l[g]=d.xhrFields[g];d.mimeType&&l.overrideMimeType&&
l.overrideMimeType(d.mimeType);d.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");try{for(g in c)l.setRequestHeader(g,c[g])}catch(h){}l.send(d.hasContent&&d.data||null);a=function(c,g){var h,p,r,m;try{if(a&&(g||4===l.readyState))if(a=b,f&&(l.onreadystatechange=k.noop,Ta&&delete ra[f]),g)4!==l.readyState&&l.abort();else{m={};h=l.status;p=l.getAllResponseHeaders();"string"==typeof l.responseText&&(m.text=l.responseText);try{r=l.statusText}catch(s){r=""}h||!d.isLocal||d.crossDomain?
1223===h&&(h=204):h=m.text?200:404}}catch(n){g||e(-1,n)}m&&e(h,r,m,p)};d.async?4===l.readyState?setTimeout(a):(f=++ic,Ta&&(ra||(ra={},k(n).unload(Ta)),ra[f]=a),l.onreadystatechange=a):a()},abort:function(){a&&a(b,!0)}}}});var oa,Ea,jc=/^(?:toggle|show|hide)$/,tb=RegExp("^(?:([+-])=|)("+Ca+")([a-z%]*)$","i"),kc=/queueHooks$/,Aa=[function(d,a,c){var b,e,f,g,l,h=this,p={},r=d.style,m=d.nodeType&&A(d),s=k._data(d,"fxshow");c.queue||(g=k._queueHooks(d,"fx"),null==g.unqueued&&(g.unqueued=0,l=g.empty.fire,
g.empty.fire=function(){g.unqueued||l()}),g.unqueued++,h.always(function(){h.always(function(){g.unqueued--;k.queue(d,"fx").length||g.empty.fire()})}));1===d.nodeType&&("height"in a||"width"in a)&&(c.overflow=[r.overflow,r.overflowX,r.overflowY],"inline"===k.css(d,"display")&&"none"===k.css(d,"float")&&(k.support.inlineBlockNeedsLayout&&"inline"!==F(d.nodeName)?r.zoom=1:r.display="inline-block"));c.overflow&&(r.overflow="hidden",k.support.shrinkWrapBlocks||h.always(function(){r.overflow=c.overflow[0];
r.overflowX=c.overflow[1];r.overflowY=c.overflow[2]}));for(b in a)(e=a[b],jc.exec(e))&&(delete a[b],f=f||"toggle"===e,e!==(m?"hide":"show"))&&(p[b]=s&&s[b]||k.style(d,b));if(!k.isEmptyObject(p))for(b in s?"hidden"in s&&(m=s.hidden):s=k._data(d,"fxshow",{}),f&&(s.hidden=!m),m?k(d).show():h.done(function(){k(d).hide()}),h.done(function(){var a;k._removeData(d,"fxshow");for(a in p)k.style(d,a,p[a])}),p)a=Z(m?s[b]:0,b,h),b in s||(s[b]=a.start,m&&(a.end=a.start,a.start="width"===b||"height"===b?1:0))}],
ta={"*":[function(d,a){var c=this.createTween(d,a),b=c.cur(),e=tb.exec(a),f=e&&e[3]||(k.cssNumber[d]?"":"px"),g=(k.cssNumber[d]||"px"!==f&&+b)&&tb.exec(k.css(c.elem,d)),l=1,h=20;if(g&&g[3]!==f){f=f||g[3];e=e||[];g=+b||1;do l=l||".5",g/=l,k.style(c.elem,d,g+f);while(l!==(l=c.cur()/b)&&1!==l&&--h)}return e&&(g=c.start=+g||+b||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};k.Animation=k.extend(fa,{tweener:function(d,a){k.isFunction(d)?(a=d,d=["*"]):d=d.split(" ");for(var c,b=0,e=d.length;e>b;b++)c=
d[b],ta[c]=ta[c]||[],ta[c].unshift(a)},prefilter:function(d,a){a?Aa.unshift(d):Aa.push(d)}});k.Tween=S;S.prototype={constructor:S,init:function(d,a,c,b,e,f){this.elem=d;this.prop=c;this.easing=e||"swing";this.options=a;this.start=this.now=this.cur();this.end=b;this.unit=f||(k.cssNumber[c]?"":"px")},cur:function(){var d=S.propHooks[this.prop];return d&&d.get?d.get(this):S.propHooks._default.get(this)},run:function(d){var a,c=S.propHooks[this.prop];return this.pos=a=this.options.duration?k.easing[this.easing](d,
this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*a+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):S.propHooks._default.set(this),this}};S.prototype.init.prototype=S.prototype;S.propHooks={_default:{get:function(d){var a;return null==d.elem[d.prop]||d.elem.style&&null!=d.elem.style[d.prop]?(a=k.css(d.elem,d.prop,""),a&&"auto"!==a?a:0):d.elem[d.prop]},set:function(d){k.fx.step[d.prop]?k.fx.step[d.prop](d):d.elem.style&&
(null!=d.elem.style[k.cssProps[d.prop]]||k.cssHooks[d.prop])?k.style(d.elem,d.prop,d.now+d.unit):d.elem[d.prop]=d.now}}};S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}};k.each(["toggle","show","hide"],function(d,a){var c=k.fn[a];k.fn[a]=function(d,b,e){return null==d||"boolean"==typeof d?c.apply(this,arguments):this.animate(O(a,!0),d,b,e)}});k.fn.extend({fadeTo:function(d,a,c,b){return this.filter(A).css("opacity",0).show().end().animate({opacity:a},
d,c,b)},animate:function(d,a,c,b){var e=k.isEmptyObject(d),f=k.speed(a,c,b);a=function(){var a=fa(this,k.extend({},d),f);(e||k._data(this,"finish"))&&a.stop(!0)};return a.finish=a,e||!1===f.queue?this.each(a):this.queue(f.queue,a)},stop:function(d,a,c){var e=function(d){var a=d.stop;delete d.stop;a(c)};return"string"!=typeof d&&(c=a,a=d,d=b),a&&!1!==d&&this.queue(d||"fx",[]),this.each(function(){var a=!0,b=null!=d&&d+"queueHooks",f=k.timers,g=k._data(this);if(b)g[b]&&g[b].stop&&e(g[b]);else for(b in g)g[b]&&
g[b].stop&&kc.test(b)&&e(g[b]);for(b=f.length;b--;)f[b].elem!==this||null!=d&&f[b].queue!==d||(f[b].anim.stop(c),a=!1,f.splice(b,1));!a&&c||k.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var a,c=k._data(this),b=c[d+"queue"];a=c[d+"queueHooks"];var e=k.timers,f=b?b.length:0;c.finish=!0;k.queue(this,d,[]);a&&a.stop&&a.stop.call(this,!0);for(a=e.length;a--;)e[a].elem===this&&e[a].queue===d&&(e[a].anim.stop(!0),e.splice(a,1));for(a=0;f>a;a++)b[a]&&b[a].finish&&
b[a].finish.call(this);delete c.finish})}});k.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,a){k.fn[d]=function(d,c,b){return this.animate(a,d,c,b)}});k.speed=function(d,a,c){var b=d&&"object"==typeof d?k.extend({},d):{complete:c||!c&&a||k.isFunction(d)&&d,duration:d,easing:c&&a||a&&!k.isFunction(a)&&a};return b.duration=k.fx.off?0:"number"==typeof b.duration?b.duration:b.duration in k.fx.speeds?
k.fx.speeds[b.duration]:k.fx.speeds._default,(null==b.queue||!0===b.queue)&&(b.queue="fx"),b.old=b.complete,b.complete=function(){k.isFunction(b.old)&&b.old.call(this);b.queue&&k.dequeue(this,b.queue)},b};k.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2}};k.timers=[];k.fx=S.prototype.init;k.fx.tick=function(){var d,a=k.timers,c=0;for(oa=k.now();a.length>c;c++)d=a[c],d()||a[c]!==d||a.splice(c--,1);a.length||k.fx.stop();oa=b};k.fx.timer=function(d){d()&&k.timers.push(d)&&
k.fx.start()};k.fx.interval=13;k.fx.start=function(){Ea||(Ea=setInterval(k.fx.tick,k.fx.interval))};k.fx.stop=function(){clearInterval(Ea);Ea=null};k.fx.speeds={slow:600,fast:200,_default:400};k.fx.step={};k.expr&&k.expr.filters&&(k.expr.filters.animated=function(d){return k.grep(k.timers,function(a){return d===a.elem}).length});k.fn.offset=function(d){if(arguments.length)return d===b?this:this.each(function(a){k.offset.setOffset(this,d,a)});var a,c,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;
if(g)return a=g.documentElement,k.contains(a,f)?(typeof f.getBoundingClientRect!==H&&(e=f.getBoundingClientRect()),c=X(g),{top:e.top+(c.pageYOffset||a.scrollTop)-(a.clientTop||0),left:e.left+(c.pageXOffset||a.scrollLeft)-(a.clientLeft||0)}):e};k.offset={setOffset:function(d,a,c){var b=k.css(d,"position");"static"===b&&(d.style.position="relative");var e=k(d),f=e.offset(),g=k.css(d,"top"),l=k.css(d,"left"),h={},p={},r,m;("absolute"===b||"fixed"===b)&&-1<k.inArray("auto",[g,l])?(p=e.position(),r=p.top,
m=p.left):(r=parseFloat(g)||0,m=parseFloat(l)||0);k.isFunction(a)&&(a=a.call(d,c,f));null!=a.top&&(h.top=a.top-f.top+r);null!=a.left&&(h.left=a.left-f.left+m);"using"in a?a.using.call(d,h):e.css(h)}};k.fn.extend({position:function(){if(this[0]){var d,a,c={top:0,left:0},b=this[0];return"fixed"===k.css(b,"position")?a=b.getBoundingClientRect():(d=this.offsetParent(),a=this.offset(),k.nodeName(d[0],"html")||(c=d.offset()),c.top+=k.css(d[0],"borderTopWidth",!0),c.left+=k.css(d[0],"borderLeftWidth",!0)),
{top:a.top-c.top-k.css(b,"marginTop",!0),left:a.left-c.left-k.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent||V;d&&!k.nodeName(d,"html")&&"static"===k.css(d,"position");)d=d.offsetParent;return d||V})}});k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,a){var c=/Y/.test(a);k.fn[d]=function(e){return k.access(this,function(d,e,f){var g=X(d);return f===b?g?a in g?g[a]:g.document.documentElement[e]:d[e]:(g?g.scrollTo(c?k(g).scrollLeft():
f,c?f:k(g).scrollTop()):d[e]=f,b)},d,e,arguments.length,null)}});k.each({Height:"height",Width:"width"},function(d,a){k.each({padding:"inner"+d,content:a,"":"outer"+d},function(c,e){k.fn[e]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),l=c||(!0===e||!0===f?"margin":"border");return k.access(this,function(a,c,e){var f;return k.isWindow(a)?a.document.documentElement["client"+d]:9===a.nodeType?(f=a.documentElement,Math.max(a.body["scroll"+d],f["scroll"+d],a.body["offset"+d],f["offset"+
d],f["client"+d])):e===b?k.css(a,c,l):k.style(a,c,e,l)},a,g?e:b,g,null)}})});k.fn.size=function(){return this.length};k.fn.andSelf=k.fn.addBack;"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=k:(n.jQuery=n.$=k,"function"==typeof define&&define.amd&&define("jquery",[],function(){return k}))})(window);(function(n){n.OT||(n.OT={});OT.properties={version:"v2.2.5.1",build:"5217017",debug:"false",websiteURL:"http://www.tokbox.com",cdnURL:"http://static.opentok.com",loggingURL:"http://hlg.tokbox.com/prod",apiURL:"http://anvil.opentok.com",messagingProtocol:"wss",messagingPort:443,supportSSL:"true",cdnURLSSL:"https://static.opentok.com",loggingURLSSL:"https://hlg.tokbox.com/prod",apiURLSSL:"https://anvil.opentok.com",minimumVersion:{firefox:26,chrome:32}}})(window);
!function(n,b){var m=function(a){return document.getElementById(a)},h=n.OTHelpers;n.OTHelpers=m;m.keys=Object.keys||function(a){var c=[],b=Object.prototype.hasOwnProperty,e;for(e in a)b.call(a,e)&&c.push(e);return c};var a=Array.prototype.forEach||function(a,c){for(var b=0,e=this.length||0;b<e;++b)b in this&&a.call(c,this[b],b)};m.forEach=function(c,b,e){return a.call(c,b,e)};var c=Array.prototype.map||function(c,b){var e=[];a.call(this,function(a,f){e.push(c.call(b,a,f))});return e};m.map=function(a,
b){return c.call(a,b)};var e=Array.prototype.filter||function(c,b){var e=[];a.call(this,function(a,f){c.call(b,a,f)&&e.push(a)});return e};m.filter=function(a,c,b){return e.call(a,c,b)};var g=Array.prototype.some||function(a,c){for(var b=!1,e=0,f=this.length||0;e<f;++e)if(e in this&&a.call(c,this[e],e)){b=!0;break}return b};m.some=function(a,c,b){return g.call(a,c,b)};var f=Array.prototype.indexOf||function(a,c){var b;b=c?c:0;var e;if(!this)throw new TypeError;e=this.length;if(0===e||b>=e)return-1;
for(0>b&&(b=e-Math.abs(b));b<e;b++)if(this[b]===a)return b;return-1};m.arrayIndexOf=function(a,c,b){return f.call(a,c,b)};var l=Function.prototype.bind||function(){var a=Array.prototype.slice.call(arguments),c=a.shift(),b=this;return function(){return b.apply(c,a.concat(Array.prototype.slice.call(arguments)))}};m.bind=function(){var a=Array.prototype.slice.call(arguments),c=a.shift();return l.apply(c,a)};var r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};m.trim=function(a){return r.call(a)};
m.noConflict=function(){m.noConflict=function(){return m};n.OTHelpers=h;return m};m.isNone=function(a){return a===b||null===a};m.isObject=function(a){return a===Object(a)};m.isFunction=function(a){return!!a&&(-1!==a.toString().indexOf("()")||"[object Function]"===Object.prototype.toString.call(a))};m.isArray=m.isFunction(Array.isArray)&&Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};m.isEmpty=function(a){if(null===a||a===b)return!0;if(m.isArray(a)||"string"===
typeof a)return 0===a.length;for(var c in a)if(a.hasOwnProperty(c))return!1;return!0};m.extend=function(){var a=Array.prototype.slice.call(arguments),c=a.shift();m.forEach(a,function(a){for(var b in a)c[b]=a[b]});return c};m.defaults=function(){var a=Array.prototype.slice.call(arguments),c=a.shift();m.forEach(a,function(a){for(var b in a)void 0===c[b]&&(c[b]=a[b])});return c};m.clone=function(a){return m.isObject(a)?m.isArray(a)?a.slice():m.extend({},a):a};m.noop=function(){};m.supportsWebSockets=
function(){return"WebSocket"in n};m.now=function(){var a=n.performance||{},c,b=a.now||a.mozNow||a.msNow||a.oNow||a.webkitNow;return b?(b=m.bind(b,a),c=a.timing.navigationStart,function(){return c+b()}):function(){return(new Date).getTime()}}();var p=function(){var a=n.navigator.userAgent.toLowerCase(),c=n.navigator.appName,b,e="unknown",f=-1;-1<a.indexOf("opera")||-1<a.indexOf("opr")?(e="Opera",null!==/opr\/([0-9]{1,}[\.0-9]{0,})/.exec(a)&&(f=parseFloat(RegExp.$1))):-1<a.indexOf("firefox")?(e="Firefox",
null!==/firefox\/([0-9]{1,}[\.0-9]{0,})/.exec(a)&&(f=parseFloat(RegExp.$1))):"Microsoft Internet Explorer"===c?(e="IE",null!==/msie ([0-9]{1,}[\.0-9]{0,})/.exec(a)&&(f=parseFloat(RegExp.$1))):"Netscape"===c&&-1<a.indexOf("trident")?(e="IE",null!==/trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(a)&&(f=parseFloat(RegExp.$1))):-1<a.indexOf("chrome")?(e="Chrome",null!==/chrome\/([0-9]{1,}[\.0-9]{0,})/.exec(a)&&(f=parseFloat(RegExp.$1))):(b=n.navigator.vendor)&&-1<b.toLowerCase().indexOf("apple")&&(e="Safari",
null!==/version\/([0-9]{1,}[\.0-9]{0,})/.exec(a)&&(f=parseFloat(RegExp.$1)));return{browser:e,version:f,iframeNeedsLoad:0>a.indexOf("webkit")}}();m.browser=function(){return p.browser};m.browserVersion=function(){return p};m.canDefineProperty=!0;try{Object.defineProperty({},"x",{})}catch(u){m.canDefineProperty=!1}m.defineGetters=function(a,c,b){var e={};void 0===b&&(b=!1);for(var f in c)e[f]={get:c[f],enumerable:b};m.defineProperties(a,e)};var s=function(a,c,b){return c&&!b?function(){return c.call(a)}:
c&&b?function(e){void 0!==e&&b.call(a,e);return c.call(a)}:function(c){void 0!==c&&b.call(a,c)}};m.defineProperties=function(a,c){for(var b in c)a[b]=s(a,c[b].get,c[b].set)};Object.create||(Object.create=function(a){function c(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");c.prototype=a;return new c});m.setCookie=function(a,c){try{localStorage.setItem(a,c)}catch(b){var e=new Date;e.setTime(e.getTime()+31536E6);e="; expires="+e.toGMTString();
document.cookie=a+"="+c+e+"; path=/"}};m.getCookie=function(a){var c;try{return c=localStorage.getItem("opentok_client_id")}catch(b){a+="=";for(var e=document.cookie.split(";"),f=0;f<e.length;f++){for(var g=e[f];" "===g.charAt(0);)g=g.substring(1,g.length);0===g.indexOf(a)&&(c=g.substring(a.length,g.length))}if(c)return c}return null};m.invert=function(a){var c={},b;for(b in a)a.hasOwnProperty(b)&&(c[a[b]]=b);return c};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};
t.unescape=m.invert(t.escape);var v={escape:RegExp("["+m.keys(t.escape).join("")+"]","g"),unescape:RegExp("("+m.keys(t.unescape).join("|")+")","g")};m.forEach(["escape","unescape"],function(a){m[a]=function(c){return null===c||c===b?"":(""+c).replace(v[a],function(c){return t[a][c]})}});m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},x=/\\|'|\r|\n|\t|\u2028|\u2029/g;
m.template=function(a,c,b){var e;b=m.defaults({},b,m.templateSettings);var f=RegExp([(b.escape||z).source,(b.interpolate||z).source,(b.evaluate||z).source].join("|")+"|$","g"),g=0,l="__p+='";a.replace(f,function(c,b,e,f,h){l+=a.slice(g,h).replace(x,function(a){return"\\"+D[a]});b&&(l+="'+\n((__t=("+b+"))==null?'':OTHelpers.escape(__t))+\n'");e&&(l+="'+\n((__t=("+e+"))==null?'':__t)+\n'");f&&(l+="';\n"+f+"\n__p+='");g=h+c.length;return c});l+="';\n";b.variable||(l="with(obj||{}){\n"+l+"}\n");l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
l+"return __p;\n";try{e=new Function(b.variable||"obj",l)}catch(h){throw h.source=l,h;}if(c)return e(c);c=function(a){return e.call(this,a)};c.source="function("+(b.variable||"obj")+"){\n"+l+"}";return c}}(window);
(function(n,b,m){b.statable=function(h,a,c,e,g){var f,l=h.currentState=c;h.is=function(){return-1!==b.arrayIndexOf(arguments,l)};h.isNot=function(){return-1===b.arrayIndexOf(arguments,l)};return function(c){l!==c&&(-1===b.arrayIndexOf(a,c)?g&&b.isFunction(g)&&g("invalidState",c):(h.previousState=f=l,h.currentState=l=c,e&&b.isFunction(e)&&e(c,f)))}}})(window,window.OTHelpers);
(function(n,b,m){function h(a,c){var b=c||0,e=r;return e[a[b++]]+e[a[b++]]+e[a[b++]]+e[a[b++]]+"-"+e[a[b++]]+e[a[b++]]+"-"+e[a[b++]]+e[a[b++]]+"-"+e[a[b++]]+e[a[b++]]+"-"+e[a[b++]]+e[a[b++]]+e[a[b++]]+e[a[b++]]+e[a[b++]]+e[a[b++]]}function a(a,c,b){b=c&&b||0;"string"==typeof a&&(c="binary"==a?new l(16):null,a=null);a=a||{};a=a.random||(a.rng||f)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(c)for(var e=0;16>e;e++)c[b+e]=a[e];return c||h(a)}var c,e=Array(16);m=function(){for(var a,c=0,c=0;16>c;c++)0===(c&
3)&&(a=4294967296*Math.random()),e[c]=a>>>((c&3)<<3)&255;return e};if(n.crypto&&crypto.getRandomValues){var g=new Uint32Array(4);c=function(){crypto.getRandomValues(g);for(var a=0;16>a;a++)e[a]=g[a>>2]>>>8*(a&3)&255;return e}}var f=c||m,l="function"==typeof Buffer?Buffer:Array,r=[],p={};for(n=0;256>n;n++)r[n]=(n+256).toString(16).substr(1),p[r[n]]=n;a.v4=a;a.parse=function(a,c,b){var e=c&&b||0,f=0;c=c||[];for(a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>f&&(c[e+f++]=p[a])});16>f;)c[e+f++]=
0;return c};a.unparse=h;a.BufferClass=l;a.mathRNG=m;a.whatwgRNG=c;b.uuid=a})(window,window.OTHelpers);
(function(n,b,m){b.useLogHelpers=function(h){function a(a,b,e){return function(){if(h.shouldLog(b)){var f=n.console,p=m(arguments);if(f&&f[a])if(f[a].apply||r)f[a].apply||(f[a]=Function.prototype.bind.call(f[a],f)),f[a].apply(f,p);else f[a](p);else if(e){e.apply(h,p);return}if(f=m(arguments))f=g(f),2>=f.length||l.push([a,c(),f])}}}function c(){var a=new Date;return a.toLocaleTimeString()+a.getMilliseconds()}function e(a){try{return JSON.stringify(a)}catch(c){return a.toString()}}function g(a){var c=
[];if("undefined"!==typeof a)if(null===a)c.push("NULL");else if(b.isArray(a))for(var f=0;f<a.length;++f)c.push(e(a[f]));else if(b.isObject(a))for(f in a){var g;b.isFunction(a[f])?a.hasOwnProperty(f)&&(g="function "+f+"()"):g=e(a[f]);c.push(f+": "+g)}else if(b.isFunction(a))try{c.push(a.toString())}catch(l){c.push("function()")}else c.push(a.toString());return c.join(", ")}h.DEBUG=5;h.LOG=4;h.INFO=3;h.WARN=2;h.ERROR=1;h.NONE=0;var f=h.NONE,l=[],r=!0;try{Function.prototype.bind.call(n.console.log,n.console)}catch(p){r=
!1}var m=function(a){return a};"IE"===b.browser()&&(m=function(a){return[g(Array.prototype.slice.apply(a))]});h.log=a("log",h.LOG);h.debug=a("debug",h.DEBUG,h.log);h.info=a("info",h.INFO,h.log);h.warn=a("warn",h.WARN,h.log);h.error=a("error",h.ERROR,h.log);h.setLogLevel=function(a){f="number"===typeof a?a:0;h.debug("TB.setLogLevel("+f+")");return f};h.getLogs=function(){return l};h.shouldLog=function(a){return f>=a}};b.useLogHelpers(b);b.setLogLevel(b.ERROR)})(window,window.OTHelpers);
(function(n,b,m){b.castToBoolean=function(b,a){return b===m?a:"true"===b||!0===b};b.roundFloat=function(b,a){return Number(b.toFixed(a))}})(window,window.OTHelpers);
(function(n,b,m){var h=[],a="OTHelpers."+b.uuid.v4()+".zero-timeout";m=function(c){c.data===a&&(b.isFunction(c.stopPropagation)&&c.stopPropagation(),c.cancelBubble=!0,0<h.length&&(c=h.shift(),c.shift().apply(null,c)))};n.addEventListener?n.addEventListener("message",m,!0):n.attachEvent&&n.attachEvent("onmessage",m);b.callAsync=function(){h.push(Array.prototype.slice.call(arguments));n.postMessage(a,"*")};b.createAsyncHandler=function(a){return function(){var e=Array.prototype.slice.call(arguments);
b.callAsync(function(){a.apply(null,e)})}}})(window,window.OTHelpers);
(function(n,b,m){b.eventing=function(h,a){function c(a,c,e){var f=g[a];if(f&&0!==f.length){var l=f.length;b.forEach(f,function(f){function h(a){return a.context===f.context&&a.handler===f.handler}b.callAsync(function(){try{g[a]&&b.some(g[a],h)&&(f.closure||f.handler).apply(f.context||null,c)}finally{l--,0===l&&e&&e.apply(null,c.slice())}})})}}function e(a,c){var e=g[a];e&&0!==e.length&&b.forEach(e,function(a){(a.closure||a.handler).apply(a.context||null,c)})}var g={},f=!0===a?e:c,l=function(a,c){g[a]&&
(c?g[a]=b.filter(g[a],function(a){return a.context!==c}):delete g[a])},r=b.bind(function(a,c,e,f){var l={handler:c};e&&(l.context=e);f&&(l.closure=f);b.forEach(a,function(a){g[a]||(g[a]=[]);g[a].push(l)})},h),p=function(a,c,e){function f(a){return!(a.handler===c&&a.context===e)}b.forEach(a,b.bind(function(a){g[a]&&(g[a]=b.filter(g[a],f),0===g[a].length&&delete g[a])},h))};h.dispatchEvent=function(a,c){if(!a.type)throw b.error("OTHelpers.Eventing.dispatchEvent: Event has no type"),b.error(a),Error("OTHelpers.Eventing.dispatchEvent: Event has no type");
a.target||(a.target=this);if(g[a.type]&&0!==g[a.type].length)return f(a.type,[a],c),this;var e=[a];c&&c.apply(null,e.slice())};h.trigger=function(a){if(g[a]&&0!==g[a].length){var c=Array.prototype.slice.call(arguments);c.shift();f(a,c);return this}};h.on=function(a,c,b){if("string"===typeof a&&c)r(a.split(" "),c,b);else for(var e in a)a.hasOwnProperty(e)&&r([e],a[e],c);return this};h.off=function(a,c,e){if("string"===typeof a)c&&b.isFunction(c)?p(a.split(" "),c,e):b.forEach(a.split(" "),function(a){l(a,
c)},this);else if(a)for(var f in a)a.hasOwnProperty(f)&&p([f],a[f],c);else g={};return this};h.once=function(a,c,e){var f=a.split(" ");a=b.bind(function(){var a=c.apply(e||null,arguments);p(f,c,e);return a},this);r(f,c,e,a);return this};h.addEventListener=function(a,c,e){b.warn("The addEventListener() method is deprecated. Use on() or once() instead.");r([a],c,e)};h.removeEventListener=function(a,c,e){b.warn("The removeEventListener() method is deprecated. Use off() instead.");p([a],c,e)};return h};
b.eventing.Event=function(){return function(h,a){this.type=h;this.cancelable=a!==m?a:!0;var c=!1;this.preventDefault=function(){this.cancelable?c=!0:b.warn("Event.preventDefault :: Trying to preventDefault on an Event that isn't cancelable")};this.isDefaultPrevented=function(){return c}}}})(window,window.OTHelpers);
(function(n,b,m){function h(a){for(var c in a)if(a.hasOwnProperty(c))return!0;return!1}b.isElementNode=function(a){return a&&"object"===typeof a&&1==a.nodeType};b.supportsClassList=function(){var a=typeof("undefined"!==document)&&"classList"in document.createElement("a");b.supportsClassList=function(){return a};return a};b.removeElement=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)};b.removeElementById=function(a){this.removeElement(b(a))};b.removeElementsByType=function(a,c){if(a)for(var b=
a.getElementsByTagName(c);b.length;)a.removeChild(b[0])};b.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a};b.createElement=function(a,c,e,g){var f=(g||document).createElement(a);if(c)for(var l in c)if("object"===typeof c[l]){f[l]||(f[l]={});a=c[l];for(var h in a)f[l][h]=a[h]}else"className"===l?f.className=c[l]:f.setAttribute(l,c[l]);c=function(a){"string"===typeof a?f.innerHTML+=a:f.appendChild(a)};b.isArray(e)?b.forEach(e,c):e&&c(e);return f};b.createButton=function(a,
c,e){a=b.createElement("button",c,a);if(e){for(var g in e)if(e.hasOwnProperty(g))b.on(a,g,e[g]);a._boundEvents=e}return a};b.on=function(a,c,b){if(a.addEventListener)a.addEventListener(c,b,!1);else if(a.attachEvent)a.attachEvent("on"+c,b);else{var g=a["on"+c];a["on"+c]=function(){b.apply(this,arguments);g&&g.apply(this,arguments)}}return a};b.off=function(a,c,b){a.removeEventListener?a.removeEventListener(c,b,!1):a.detachEvent&&a.detachEvent("on"+c,b)};b.isDisplayNone=function(a){return 0!==a.offsetWidth&&
0!==a.offsetHeight||"none"!==b.css(a,"display")?a.parentNode&&a.parentNode.style?b.isDisplayNone(a.parentNode):!1:!0};b.findElementWithDisplayNone=function(a){return 0!==a.offsetWidth&&0!==a.offsetHeight||"none"!==b.css(a,"display")?a.parentNode&&a.parentNode.style?b.findElementWithDisplayNone(a.parentNode):null:a};b.observeStyleChanges=function(a,c,e){var g={},f=function(c){switch(c){case "width":return b.width(a);case "height":return b.height(a);default:return b.css(a)}};b.forEach(c,function(a){g[a]=
f(a)});var l=new MutationObserver(function(l){var p={};b.forEach(l,function(e){if("style"===e.attributeName){var l=b.isDisplayNone(a);b.forEach(c,function(a){if(!l||"width"!=a&&"height"!=a){var c=f(a);c!==g[a]&&(p[a]=[g[a],c],g[a]=c)}})}});h(p)&&b.callAsync(function(){e.call(null,p)})});l.observe(a,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1});return l};b.observeNodeOrChildNodeRemoval=function(a,c){var e=new MutationObserver(function(a){var e=[];b.forEach(a,function(a){a.removedNodes.length&&
(e=e.concat(Array.prototype.slice.call(a.removedNodes)))});e.length&&b.callAsync(function(){c(e)})});e.observe(a,{attributes:!1,childList:!0,characterData:!1,subtree:!0});return e}})(window,window.OTHelpers);
(function(n,b,m){b.dialog=function(h){b.eventing(this,!0);var a=arguments[arguments.length-1];if(!b.isFunction(a))throw Error("OTHelpers.dialog2 must be given a callback");2>arguments.length&&(h={});var c=document.createElement("iframe");c.id=h.id||b.uuid();c.style.position="absolute";c.style.position="fixed";c.style.height="100%";c.style.width="100%";c.style.top="0px";c.style.left="0px";c.style.right="0px";c.style.bottom="0px";c.style.zIndex=1E3;c.style.border="0";try{c.style.backgroundColor="rgba(0,0,0,0.2)"}catch(e){c.style.backgroundColor=
"transparent",c.setAttribute("allowTransparency","true")}c.scrolling="no";c.setAttribute("scrolling","no");var g=function(){var b=c.contentDocument||c.contentWindow.document;b.body.style.backgroundColor="transparent";b.body.style.border="none";a(c.contentWindow,b)};document.body.appendChild(c);if(b.browserVersion().iframeNeedsLoad)b.on(c,"load",g);else setTimeout(g);this.close=function(){b.removeElement(c);this.trigger("closed");this.element=c=null;return this};this.element=c}})(window,window.OTHelpers);
(function(n,b,m){function h(a,c,b,l){var m=c[b];c=parseFloat(m);m=m.split(/\d/)[0];l=null!=l?l:/%|em/.test(m)&&a.parentElement?h(a.parentElement,a.parentElement.currentStyle,"fontSize",null):16;a="fontSize"===b?l:/width/i.test(b)?a.clientWidth:a.clientHeight;return"em"===m?c*l:"in"===m?96*c:"pt"===m?96*c/72:"%"===m?c/100*a:c}function a(a,c){var b="border"===c?"Width":"",l=c+"Top"+b,h=c+"Right"+b,p=c+"Bottom"+b,b=c+"Left"+b;a[c]=(a[l]===a[h]===a[p]===a[b]?[a[l]]:a[l]===a[p]&&a[b]===a[h]?[a[l],a[h]]:
a[b]===a[h]?[a[l],a[h],a[p]]:[a[l],a[h],a[p],a[b]]).join(" ")}function c(c){var b=c.currentStyle,f=h(c,b,"fontSize",null),l;for(l in b)/width|height|margin.|padding.|border.+W/.test(l)&&"auto"!==this[l]?this[l]=h(c,b,l,f)+"px":"styleFloat"===l?this["float"]=b[l]:this[l]=b[l];a(this,"margin");a(this,"padding");a(this,"border");this.fontSize=f+"px";return this}c.prototype={constructor:c,getPropertyPriority:function(){},getPropertyValue:function(a){return this[a]||""},item:function(){},removeProperty:function(){},
setProperty:function(){},getPropertyCSSValue:function(){}};b.getComputedStyle=function(a){return a&&a.ownerDocument&&a.ownerDocument.defaultView&&a.ownerDocument.defaultView.getComputedStyle?a.ownerDocument.defaultView.getComputedStyle(a):new c(a)}})(window,window.OTHelpers);
(function(n,b,m){b.addClass=function(a,c){if(1===a.nodeType){var e=b.trim(c).split(/\s+/),g,f;if(b.supportsClassList())for(g=0,f=e.length;g<f;++g)a.classList.add(e[g]);else{if(a.className||1!==e.length){var l=" "+a.className+" ";g=0;for(f=e.length;g<f;++g)~l.indexOf(" "+e[g]+" ")||(l+=e[g]+" ");a.className=b.trim(l)}else a.className=c;return this}}};b.removeClass=function(a,c){if(c&&1===a.nodeType){var e=b.trim(c).split(/\s+/),g,f;if(b.supportsClassList())for(g=0,f=e.length;g<f;++g)a.classList.remove(e[g]);
else{var l=(" "+a.className+" ").replace(/[\s+]/," ");g=0;for(f=e.length;g<f;++g)l=l.replace(" "+e[g]+" "," ");a.className=b.trim(l);return this}}};var h=function(a){return 0<a.offsetHeight?a.offsetHeight+"px":b.css(a,"height")};b.width=function(a,c){return c?(b.css(a,"width",c),this):b.isDisplayNone(a)?b.makeVisibleAndYield(a,function(){return 0<a.offsetWidth?a.offsetWidth+"px":b.css(a,"width")}):0<a.offsetWidth?a.offsetWidth+"px":b.css(a,"width")};b.height=function(a,c){return c?(b.css(a,"height",
c),this):b.isDisplayNone(a)?b.makeVisibleAndYield(a,function(){return h(a)}):h(a)};b.centerElement=function(a,c,e){c||(c=parseInt(b.width(a),10));e||(e=parseInt(b.height(a),10));b.css(a,"margin",-.5*e+"px 0 0 "+(-.5*c+"px"));b.addClass(a,"OT_centered")}})(window,window.OTHelpers);
(function(n,b,m){var h={},a={};b.show=function(c){var e=c.style.display;if(""===e||"none"===e)c.style.display=h[c]||"",delete h[c];if("none"===b.getComputedStyle(c).getPropertyValue("display")){h[c]="none";e=c.style;if(a[c.ownerDocument]&&a[c.ownerDocument][c.nodeName])c=a[c.ownerDocument][c.nodeName];else{a[c.ownerDocument]||(a[c.ownerDocument]={});var g=c.ownerDocument.createElement(c.nodeName);c.ownerDocument.body.appendChild(g);c=a[c.ownerDocument][c.nodeName]=b.css(g,"display");b.removeElement(g)}e.display=
c}return this};b.hide=function(a){if("none"!==a.style.display)return h[a]=a.style.display,a.style.display="none",this};b.css=function(a,e,g){if("string"!==typeof e){a=a.style;for(var f in e)a[f]=e[f];return this}if(g!==m)return a.style[e]=g,this;e=e.replace(/([A-Z]|^ms)/g,"-$1").toLowerCase();f=b.getComputedStyle(a).getPropertyValue(e);""===f&&(f=a.style[e]);return f};b.applyCSS=function(a,e,g){var f={},l;for(l in e)e.hasOwnProperty(l)&&(f[l]=a.style[l],b.css(a,l,e[l]));g=g();for(l in e)e.hasOwnProperty(l)&&
b.css(a,l,f[l]||"");return g};b.makeVisibleAndYield=function(a,e){var g=b.findElementWithDisplayNone(a);if(g)return b.applyCSS(g,{display:"block",visibility:"hidden"},e)}})(window,window.OTHelpers);
(function(n,b,m){function h(a){if("string"===typeof a)return a;var c=[],b;for(b in a)c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&").replace(/\+/g,"%20")}b.getJSON=function(a,c,e){c=c||{};var g=function(a,c){if(a)e(a,c&&c.target&&c.target.responseText);else{var b;try{b=JSON.parse(c.target.responseText)}catch(f){e(f,c&&c.target&&c.target.responseText);return}e(null,b,c)}};if(c.xdomainrequest)b.xdomainRequest(a,{method:"GET"},g);else{var f=b.extend({Accept:"application/json"},
c.headers||{});b.get(a,b.extend(c||{},{headers:f}),g)}};b.xdomainRequest=function(a,c,b){function g(a,c){f.onload=f.onerror=f.ontimeout=function(){};f=void 0;b(a,c)}var f=new XDomainRequest,l=(c||{}).method;l?(l=l.toUpperCase(),"GET"===l||"POST"===l?(f.onload=function(){g(null,{target:{responseText:f.responseText,headers:{"content-type":f.contentType}}})},f.onerror=function(){g(Error("XDomainRequest of "+a+" failed"))},f.ontimeout=function(){g(Error("XDomainRequest of "+a+" timed out"))},f.open(l,
a),f.send(c.body&&h(c.body))):b(Error("HTTP method can only be "))):b(Error("No HTTP method specified in options"))};b.request=function(a,c,b){var g=new XMLHttpRequest,f=c||{};if(f.method){b&&(g.addEventListener("load",function(a){var c=a.target.status;200<=c&&300>c||304===c?b(null,a):b(a)},!1),g.addEventListener("error",b,!1));g.open(c.method,a,!0);f.headers||(f.headers={});for(var l in f.headers)g.setRequestHeader(l,f.headers[l]);g.send(c.body&&h(c.body))}else b(Error("No HTTP method specified in options"))};
b.get=function(a,c,e){c=b.extend(c||{},{method:"GET"});b.request(a,c,e)};b.post=function(a,c,e){c=b.extend(c||{},{method:"POST"});c.xdomainrequest?b.xdomainRequest(a,c,e):b.request(a,c,e)}})(window,window.OTHelpers);
!function(){OT.Dialogs={};var n=function(b,a,c){b=b.head||b.getElementsByTagName("head")[0];var e=OT.$.createElement("link",{type:"text/css",media:"screen",rel:"stylesheet",href:a});b.appendChild(e);OT.$.on(e,"error",function(c){OT.error("Could not load CSS for dialog",a,c&&c.message||c)});OT.$.on(e,"load",c)},b=function(b,a,c){a=["//fonts.googleapis.com/css?family=Didact+Gothic",OT.properties.cssURL].concat(a);var e=a.length;OT.$.forEach(a,function(a){n(b,a,function(){0>=--e&&c()})})},m=function(b,
a,c){b=OT.$.createElement(c||"div",{"class":b},a,this);b.on=OT.$.bind(OT.$.on,OT.$,b);return b};OT.Dialogs.AllowDeny={};OT.Dialogs.AllowDeny.Chrome={};OT.Dialogs.AllowDeny.Firefox={};OT.Dialogs.AllowDeny.Chrome.initialPrompt=function(){var h=new OT.$.dialog(function(a,c){var e=m.bind(c),g,f;g=e("OT_closeButton","&times;").on("click",function(){h.close()});f=e("OT_root OT_dialog OT_dialog-allow-deny-chrome-first",[g,e("OT_dialog-messages",[e("OT_dialog-messages-main","Allow camera and mic access"),
e("OT_dialog-messages-minor","Click the Allow button in the upper-right corner of your browser to enable real-time communication."),e("OT_dialog-allow-highlight-chrome")])]);b(c,[],function(){c.body.appendChild(f)})});return h};OT.Dialogs.AllowDeny.Chrome.previouslyDenied=function(h){var a=new OT.$.dialog(function(c,e){var g=m.bind(e),f,l;f=g("OT_closeButton","&times;").on("click",function(){a.close()});l=g("OT_root OT_dialog OT_dialog-allow-deny-chrome-pre-denied",[f,g("OT_dialog-messages",[g("OT_dialog-messages-main",
"Allow camera and mic access"),g("OT_dialog-messages-minor",["To interact with this app, follow these 3 steps:",g("OT_dialog-3steps",[g("OT_dialog-3steps-step",[g("OT_dialog-3steps-step-num","1"),"Find this icon in the URL bar and click it",g("OT_dialog-allow-camera-icon")]),g("OT_dialog-3steps-seperator"),g("OT_dialog-3steps-step",[g("OT_dialog-3steps-step-num","2"),'Select "Ask if '+h+' wants to access your camera and mic" and then click Done.']),g("OT_dialog-3steps-seperator"),g("OT_dialog-3steps-step",
[g("OT_dialog-3steps-step-num","3"),"Refresh your browser."])])])])]);b(e,[],function(){e.body.appendChild(l)})});return a};OT.Dialogs.AllowDeny.Chrome.deniedNow=function(){return new OT.$.dialog(function(h,a){var c=m.bind(a),e;e=c("OT_root OT_dialog-blackout",c("OT_dialog OT_dialog-allow-deny-chrome-now-denied",[c("OT_dialog-messages",[c("OT_dialog-messages-main ",c("OT_dialog-allow-camera-icon")),c("OT_dialog-messages-minor","Find & click this icon to allow camera and mic access.")])]));b(a,[],function(){a.body.appendChild(e)})})};
OT.Dialogs.AllowDeny.Firefox.maybeDenied=function(){var h=new OT.$.dialog(function(a,c){var e=m.bind(c),g,f;g=e("OT_closeButton","&times;").on("click",function(){h.close()});f=e("OT_root OT_dialog OT_dialog-allow-deny-firefox-maybe-denied",[g,e("OT_dialog-messages",[e("OT_dialog-messages-main","Please allow camera & mic access"),e("OT_dialog-messages-minor",["To interact with this app, follow these 3 steps:",e("OT_dialog-3steps",[e("OT_dialog-3steps-step",[e("OT_dialog-3steps-step-num","1"),"Reload the page, or click the camera icon in the browser URL bar."]),
e("OT_dialog-3steps-seperator"),e("OT_dialog-3steps-step",[e("OT_dialog-3steps-step-num","2"),"In the menu, select your camera & mic."]),e("OT_dialog-3steps-seperator"),e("OT_dialog-3steps-step",[e("OT_dialog-3steps-step-num","3"),'Click "Share Selected Devices."'])])])])]);b(c,[],function(){c.body.appendChild(f)})});return h};OT.Dialogs.AllowDeny.Firefox.denied=function(){var h=new OT.$.dialog(function(a,c){var e=m.bind(c),g,f;f=m.bind(c,"OT_dialog-button OT_dialog-button-large")("Reload").on("click",
function(){h.trigger("refresh")});g=e("OT_root OT_dialog-blackout",e("OT_dialog OT_dialog-allow-deny-firefox-denied",[e("OT_dialog-messages",[e("OT_dialog-messages-minor","Access to camera and microphone has been denied. Click the button to reload page.")]),e("OT_dialog-single-button",f)]));b(c,[],function(){c.body.appendChild(g)})});return h}}();
!function(n){n.OT||(n.OT={});OT.$=OTHelpers.noConflict();OT.$.eventing(OT);OT.$.defineGetters=function(b,a,c){var e={};void 0===c&&(c=!1);for(var g in a)e[g]={get:a[g],enumerable:c};Object.defineProperties(b,e)};OT.dialog=OT.$.dialog;OT.$.useLogHelpers(OT);var b=!1,m=OT.setLogLevel;OT.setLogLevel=function(h){OT.$.setLogLevel(h);h=m.call(OT,h);OT.shouldLog(OT.DEBUG)&&!b&&(OT.debug("OpenTok JavaScript library "+OT.properties.version),OT.debug("Release notes: "+OT.properties.websiteURL+"/opentok/webrtc/docs/js/release-notes.html"),
OT.debug("Known issues: "+OT.properties.websiteURL+"/opentok/webrtc/docs/js/release-notes.html#knownIssues"),b=!0);OT.debug("OT.setLogLevel("+h+")");return h};OT.setLogLevel(OT.properties.debug?OT.DEBUG:OT.ERROR)}(window);
!function(n){n.OT||(n.OT={});if(!OT.properties)throw Error("OT.properties does not exist, please ensure that you include a valid properties file.");var b=OT,m=OT.properties,h=OT.$.clone(m);h.debug="true"===m.debug||!0===m.debug;h.supportSSL="true"===m.supportSSL||!0===m.supportSSL;h.supportSSL&&(0<=n.location.protocol.indexOf("https")||0<=n.location.protocol.indexOf("chrome-extension"))?(h.assetURL=h.cdnURLSSL+"/webrtc/"+h.version,h.loggingURL=h.loggingURLSSL):h.assetURL=h.cdnURL+"/webrtc/"+h.version;
h.configURL=h.assetURL+"/js/dynamic_config.min.js";h.cssURL=h.assetURL+"/css/ot.min.css";b.properties=h}(window);
!function(){OT.Config=function(){var n=!1,b={},m={},h,a=document.head||document.getElementsByTagName("head")[0],c,e=function(){c&&(clearTimeout(c),c=null);h&&(h.onload=h.onreadystatechange=null,a&&h.parentNode&&a.removeChild(h),h=void 0)},g=function(){if(!h.readyState||/loaded|complete/.test(h.readyState))c&&(clearTimeout(c),c=null),n||f._onLoadTimeout()},f;f={loadTimeout:4E3,load:function(b){if(!b)throw Error("You must pass a valid configUrl to Config.load");n=!1;setTimeout(function(){h=document.createElement("script");
h.async="async";h.src=b;h.onload=h.onreadystatechange=g.bind(this);a.appendChild(h)},1);c=setTimeout(function(){f._onLoadTimeout()},this.loadTimeout)},_onLoadTimeout:function(){e();OT.warn("TB DynamicConfig failed to load in "+f.loadTimeout+" ms");this.trigger("dynamicConfigLoadFailed")},isLoaded:function(){return n},reset:function(){e();n=!1;b={};m={}},replaceWith:function(a){e();a||(a={});b=a.global||{};m=a.partners||{};n||(n=!0);this.trigger("dynamicConfigChanged")},get:function(a,c,e){return(a=
e&&m[e]&&m[e][a]?m[e][a]:b[a])?a[c]:null}};OT.$.eventing(f);return f}()}(window);
!function(){function n(a,c,b,e,g){c=c?parseInt(c,10):parseInt(OT.$.width(a.parentNode),10);b=b?parseInt(b,10):parseInt(OT.$.height(a.parentNode),10);0!==c&&0!==b&&(e||(e=m),b=(c+0)/b,c={width:"100%",height:"100%",left:0,top:0},b>e?(e=b/e*100,c.height=e+"%",c.top="-"+(e-100)/2+"%"):b<e&&(e=e/b*100,c.width=e+"%",c.left="-"+(e-100)/2+"%"),OT.$.css(a,c),e=a.querySelector("video"))&&(g?(g=a.offsetWidth,a=a.offsetHeight,c=g-a,c={width:a+"px",height:g+"px",marginTop:-(c/2)+"px",marginLeft:c/2+"px"},OT.$.css(e,
c)):OT.$.css(e,{width:"",height:"",marginTop:"",marginLeft:""}))}function b(b,g,m){g=parseInt(g,10);m=parseInt(m,10);g<c||m<e?OT.$.addClass(b,"OT_micro"):OT.$.removeClass(b,"OT_micro");g<h||m<a?OT.$.addClass(b,"OT_mini"):OT.$.removeClass(b,"OT_mini")}var m=4/3,h=128,a=128,c=64,e=64,g=function(a,c){var b,e;a&&a.nodeName?(b=a,(!b.getAttribute("id")||0===b.getAttribute("id").length)&&b.setAttribute("id","OT_"+OT.$.uuid()),e=b.getAttribute("id")):(b=OT.$(a),e=a||"OT_"+OT.$.uuid());b?null==c||"replace"===
c?OT.$.emptyElement(b):(e=document.createElement("div"),e.id="OT_"+OT.$.uuid(),"append"===c?(b.appendChild(e),b=e):"before"===c?(b.parentNode.insertBefore(e,b),b=e):"after"===c&&(b.parentNode.insertBefore(e,b.nextSibling),b=e)):(b=OT.$.createElement("div",{id:e}),b.style.backgroundColor="#000000",document.body.appendChild(b));return b};OT.WidgetView=function(a,c){var e=g(a,c&&c.insertMode),h=document.createElement("div"),m,s,t,v,z,D,x=!0;c&&(z=c.width,D=c.height,z&&"number"===typeof z&&(z+="px"),
D&&"number"===typeof D&&(D+="px"),e.style.width=z?z:"264px",e.style.height=D?D:"198px",e.style.overflow="hidden",b(e,z||"264px",D||"198px"),(void 0===c.mirror||c.mirror)&&OT.$.addClass(e,"OT_mirrored"));c.classNames&&OT.$.addClass(e,c.classNames);OT.$.addClass(e,"OT_loading");OT.$.addClass(h,"OT_video-container");h.style.width=e.style.width;h.style.height=e.style.height;e.appendChild(h);n(h,e.offsetWidth,e.offsetHeight);z=document.createElement("div");OT.$.addClass(z,"OT_video-loading");h.appendChild(z);
v=document.createElement("div");OT.$.addClass(v,"OT_video-poster");h.appendChild(v);m=OT.$.observeStyleChanges(e,["width","height"],function(a){var c=a.width?a.width[1]:e.offsetWidth;a=a.height?a.height[1]:e.offsetHeight;b(e,c,a);n(h,c,a,s?s.aspectRatio:null)});t=OT.$.observeNodeOrChildNodeRemoval(e,function(a){s&&(a.some(function(a){return a===h||"VIDEO"===a.nodeName})&&(s.destroy(),s=null),h&&(OT.$.removeElement(h),h=null),m&&(m.disconnect(),m=null),t&&(t.disconnect(),t=null))});this.destroy=function(){m&&
(m.disconnect(),m=null);t&&(t.disconnect(),t=null);s&&(s.destroy(),s=null);e&&(OT.$.removeElement(e),e=null)};Object.defineProperties(this,{showPoster:{get:function(){return!OT.$.isDisplayNone(v)},set:function(a){a?OT.$.show(v):OT.$.hide(v)}},poster:{get:function(){return OT.$.css(v,"backgroundImage")},set:function(a){OT.$.css(v,"backgroundImage","url("+a+")")}},loading:{get:function(){return x},set:function(a){(x=a)?OT.$.addClass(e,"OT_loading"):OT.$.removeClass(e,"OT_loading")}},video:{get:function(){return s},
set:function(a){s&&s.destroy();a.appendTo(h);s=a;s.on({orientationChanged:function(){n(h,e.offsetWidth,e.offsetHeight,s.aspectRatio,s.isRotated)}});if(s)if(a=function(){n(h,e.offsetWidth,e.offsetHeight,s?s.aspectRatio:null,s?s.isRotated:null)},isNaN(s.aspectRatio))s.on("streamBound",a);else a()}},domElement:{get:function(){return e}},domId:{get:function(){return e.getAttribute("id")}}});this.addError=function(a,c,b){e.innerHTML="<p>"+a+(c?' <span class="ot-help-message">'+c+"</span>":"")+"</p>";OT.$.addClass(e,
b||"OT_subscriber_error");e.querySelector("p").offsetHeight>e.offsetHeight&&(e.querySelector("span").style.display="none")}}}(window);
!function(n){var b,m,h,a,c,e,g;b=function(){if(navigator.getUserMedia)return navigator.getUserMedia.bind(navigator);if(navigator.mozGetUserMedia)return navigator.mozGetUserMedia.bind(navigator);if(navigator.webkitGetUserMedia)return navigator.webkitGetUserMedia.bind(navigator)}();navigator.webkitGetUserMedia?(webkitMediaStream.prototype.getVideoTracks||(webkitMediaStream.prototype.getVideoTracks=function(){return this.videoTracks}),webkitMediaStream.prototype.getAudioTracks||(webkitMediaStream.prototype.getAudioTracks=
function(){return this.audioTracks}),webkitRTCPeerConnection.prototype.getLocalStreams||(webkitRTCPeerConnection.prototype.getLocalStreams=function(){return this.localStreams}),webkitRTCPeerConnection.prototype.getRemoteStreams||(webkitRTCPeerConnection.prototype.getRemoteStreams=function(){return this.remoteStreams})):navigator.mozGetUserMedia&&(MediaStream.prototype.getVideoTracks||(MediaStream.prototype.getVideoTracks=function(){return[]}),MediaStream.prototype.getAudioTracks||(MediaStream.prototype.getAudioTracks=
function(){return[]}));m={PERMISSION_DENIED:"PermissionDeniedError",NOT_SUPPORTED_ERROR:"NotSupportedError",MANDATORY_UNSATISFIED_ERROR:" ConstraintNotSatisfiedError",NO_DEVICES_FOUND:"NoDevicesFoundError",HARDWARE_UNAVAILABLE:"HardwareUnavailableError"};h={1:"PermissionDeniedError"};a={PermissionDeniedError:"End-user denied permission to hardware devices",NotSupportedError:"A constraint specified is not supported by the browser.",ConstraintNotSatisfiedError:"It's not possible to satisfy one or more constraints passed into the getUserMedia function",
OverconstrainedError:"Due to changes in the environment, one or more mandatory constraints can no longer be satisfied.",NoDevicesFoundError:"No voice or video input devices are available on this machine.",HardwareUnavailableError:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."};c=function(c,b){var e=b[c],g=a[e];g||(g=null,e=c);return{name:e,message:g}};e=function(b){var e;OT.$.isObject(b)&&b.name?e={name:b.name,message:b.message||
a[b.name],constraintName:b.constraintName}:OT.$.isObject(b)?(e=c(b.code,h),b.message&&(e.message=b.message),b.constraintName&&(e.constraintName=b.constraintName)):e=b&&m.hasOwnProperty(b)?c(b,m):{message:"Unknown Error while getting user media"};return e};g=function(a){if(!a||!OT.$.isObject(a))return!0;for(var c in a)if(a[c])return!1;return!0};OT.$.supportsWebRTC=function(){var a=!1,c=OT.$.browserVersion(),b=(OT.properties.minimumVersion||{})[c.browser.toLowerCase()];if(b&&b>c.version)OT.debug("Support for",
c.browser,"is disabled because we require",b,"but this is",c.version),a=!1;else if(navigator.webkitGetUserMedia)a="function"===typeof webkitRTCPeerConnection&&!!webkitRTCPeerConnection.prototype.addStream;else if(navigator.mozGetUserMedia&&"function"===typeof mozRTCPeerConnection&&20<c.version)try{new mozRTCPeerConnection,a=!0}catch(e){a=!1}OT.$.supportsWebRTC=function(){return a};return a};OT.$.supportedCryptoScheme=function(){if(!OT.$.supportsWebRTC())return"NONE";var a=n.navigator.userAgent.toLowerCase().match(/chrome\/([0-9\.]+)/i);
return a&&25>parseFloat(a[1],10)?"SDES_SRTP":"DTLS_SRTP"};OT.$.supportsBundle=function(){return OT.$.supportsWebRTC()&&"Chrome"===OT.$.browser()};OT.$.supportsRtcpMux=function(){return OT.$.supportsWebRTC()&&"Chrome"===OT.$.browser()};OT.$.shouldAskForDevices=function(a){var c=function(c,b){OT.$.shouldAskForDevices=function(a){setTimeout(a.bind(null,{video:b,audio:c}))};OT.$.shouldAskForDevices(a)},b=n.MediaStreamTrack;null!=b&&OT.$.isFunction(b.getSources)?n.MediaStreamTrack.getSources(function(a){var b=
a.some(function(a){return"audio"===a.kind});a=a.some(function(a){return"video"===a.kind});c(b,a)}):c(!0,!0)};OT.$.getUserMedia=function(c,l,h,p,m,s,t){var v=b;OT.$.isFunction(t)&&(v=t);if(g(c))OT.error("Couldn't get UserMedia: All constraints were false"),h.call(null,{name:"NO_VALID_CONSTRAINTS",message:"Video and Audio was disabled, you need to enabled at least one"});else{var z=null,D=!1;t=function(){z=null;D=!0;p&&p()};var x=function(a){z&&clearTimeout(z);D&&m&&m();l.call(null,a)},w=function(c){z&&
clearTimeout(z);D&&m&&m();var b=e(c);"PermissionDeniedError"===b.name?(c=n.MediaStreamTrack,null!=c&&OT.$.isFunction(c.getSources)?n.MediaStreamTrack.getSources(function(c){0<c.length?s.call(null,b):h.call(null,{name:"NoDevicesFoundError",message:a.NoDevicesFoundError})}):s.call(null,b)):h.call(null,b)};try{v(c,x,w)}catch(C){OT.error("Couldn't get UserMedia: "+C.toString());w();return}z=-1===location.protocol.indexOf("https")?setTimeout(t,100):setTimeout(t,500)}};OT.$.createPeerConnection=function(a,
c){return new (n.webkitRTCPeerConnection||n.mozRTCPeerConnection)(a,c)}}(window);
!function(n){function b(a,c){var b=document.createElement("video");b.setAttribute("autoplay","");b.innerHTML=a;if(c){!0===c.muted&&(delete c.muted,b.muted="true");for(var l in c)b.setAttribute(l,c[l])}return b}function m(c){return a[parseInt(c,10)]||"An unknown error occurred."}function h(a,c,b,l){var h,p,u,s,t;navigator.mozGetUserMedia||0<c.getVideoTracks().length&&c.getVideoTracks()[0].enabled?(h=function(){clearTimeout(t);a.removeEventListener("loadedmetadata",p,!1);a.removeEventListener("error",
u,!1);c.onended=null},p=function(){h();b()},u=function(a){h();l("There was an unexpected problem with the Video Stream: "+m(a.target.error.code))},s=function(){h();l("Stream ended while trying to bind it to a video element.")},t=setTimeout(function(){0===a.currentTime?l("The video stream failed to connect. Please notify the site owner if this continues to happen."):(OT.warn("Never got the loadedmetadata event but currentTime > 0"),b())}.bind(this),3E4),a.addEventListener("loadedmetadata",p,!1),a.addEventListener("error",
u,!1),c.onended=s):b();void 0!==a.srcObject?a.srcObject=c:void 0!==a.mozSrcObject?a.mozSrcObject=c:a.src=n.URL.createObjectURL(c);a.play()}var a={},c;c={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};OT.VideoOrientation={ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180};OT.VideoElement=function(a){var c,f,l,r=!1,p=!1,u,s,t,v;a=OT.$.defaults(a||{},{fallbackText:"Sorry, Web RTC is not available in your browser"});OT.$.eventing(this);u=function(a){a=
"There was an unexpected problem with the Video Stream: "+m(a.target.error.code);this.trigger("error",null,a,this,"VideoElement")}.bind(this);s=function(){r=!0;f.addEventListener("error",u,!1);this.trigger("streamBound",this)}.bind(this);t=function(a){this.trigger("loadError",OT.ExceptionCodes.P2P_CONNECTION_FAILED,a,this,"VideoElement")}.bind(this);v=function(){p||(OT.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),
p=!0);f.play()};f=b(a.fallbackText,a.attributes);f.addEventListener("pause",v);Object.defineProperties(this,{stream:{get:function(){return c}},domElement:{get:function(){return f}},parentElement:{get:function(){return l}},isBoundToStream:{get:function(){return r}},poster:{get:function(){return f.getAttribute("poster")},set:function(a){f.setAttribute("poster",a)}}});this.appendTo=function(a){l=a;l.appendChild(f);return this};this.bindToStream=function(a){r=!1;c=a;h(f,c,s,t);return this};this.unbindStream=
function(){if(!c)return this;f&&(navigator.mozGetUserMedia?f.mozSrcObject=null:n.URL.revokeObjectURL(f.src));c=null;return this};this.setAudioVolume=function(a){f&&(f.volume=OT.$.roundFloat(a/100,2))};this.getAudioVolume=function(){return f?parseInt(100*f.volume,10):50};this.whenTimeIncrements=function(a,c){if(f){var b,e;e=function(){!b||b>=f.currentTime?b=f.currentTime:(f.removeEventListener("timeupdate",e,!1),a.call(c,this))}.bind(this);f.addEventListener("timeupdate",e,!1)}};this.destroy=function(){this.off();
this.unbindStream();f&&(f.removeEventListener("pause",v),OT.$.removeElement(f),f=null);l=null}};OT.$.canDefineProperty&&Object.defineProperties(OT.VideoElement.prototype,{imgData:{get:function(){var a,c;a=OT.$.createElement("canvas",{width:this.domElement.videoWidth,height:this.domElement.videoHeight,style:{display:"none"}});document.body.appendChild(a);try{a.getContext("2d").drawImage(this.domElement,0,0,a.width,a.height)}catch(b){return OT.warn("Cannot get image data yet"),null}c=a.toDataURL("image/png");
OT.$.removeElement(a);return c.replace("data:image/png;base64,","").trim()}},videoWidth:{get:function(){return this.domElement["video"+(this.isRotated?"Height":"Width")]}},videoHeight:{get:function(){return this.domElement["video"+(this.isRotated?"Width":"Height")]}},aspectRatio:{get:function(){return(this.videoWidth+0)/this.videoHeight}},isRotated:{get:function(){return this._orientation&&(270===this._orientation.videoOrientation||90===this._orientation.videoOrientation)}},orientation:{get:function(){return this._orientation},
set:function(a){var b=c[a.videoOrientation]||c.ROTATED_NORMAL;this._orientation=a;switch(OT.$.browser()){case "Chrome":case "Safari":this.domElement.style.webkitTransform=b;break;case "IE":this.domElement.style.msTransform=b;break;default:this.domElement.style.transform=b}this.trigger("orientationChanged")}}});n.MediaError&&(a[n.MediaError.MEDIA_ERR_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",a[n.MediaError.MEDIA_ERR_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",
a[n.MediaError.MEDIA_ERR_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be  usable.",a[n.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.")}(window);
!function(n){var b=[],m=!1;OT.Analytics=function(){var h=OT.properties.loggingURL+"/logging/ClientEvent",a=OT.properties.loggingURL+"/logging/ClientQos",c={},e,g=function(c,b,e){OT.$.post(b?a:h,{body:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}},e)},f=function(){if(!m&&0<b.length){m=!0;var a=b[0],c=function(){b.shift();m=!1;f()};a&&g(a.data,a.isQos,function(b){if(b)OT.debug("Failed to send ClientEvent, moving on to the next item.");else a.onComplete();setTimeout(c,50)})}};e={payloadType:"payload_type",
partnerId:"partner_id",streamId:"stream_id",sessionId:"session_id",connectionId:"connection_id",widgetType:"widget_type",widgetId:"widget_id",avgAudioBitrate:"avg_audio_bitrate",avgVideoBitrate:"avg_video_bitrate",localCandidateType:"local_candidate_type",remoteCandidateType:"remote_candidate_type",transportType:"transport_type"};this.logError=function(a,b,e,f,g){g||(g={});e=g.partnerId;if(!0===OT.Config.get("exceptionLogging","enabled",e)){var h;e?(h=[e,b,a].join("_"),h=100>=(c[h]||0)):h=!1;if(!h){e=
[e,b,a].join("_");var m=this.escapePayload(OT.$.extend(f||{},{message:m,userAgent:navigator.userAgent}));c[e]="undefined"!==typeof c[e]?c[e]+1:1;return this.logEvent(OT.$.extend(g,{action:b+"."+a,payloadType:m[0],payload:m[1]}))}}};this.logEvent=function(a){var c=a.partnerId;a||(a={});a=OT.$.extend({variation:"",guid:this.getClientGuid(),widget_id:"",session_id:"",connection_id:"",stream_id:"",partner_id:c,source:n.location.href,section:"",build:""},a);for(var g in e)e.hasOwnProperty(g)&&a[g]&&(a[e[g]]=
a[g],delete a[g]);b.push({data:a,onComplete:function(){},isQos:!1});f()};this.logQOS=function(a){var c=a.partnerId;a||(a={});a=OT.$.extend({guid:this.getClientGuid(),widget_id:"",session_id:"",connection_id:"",stream_id:"",partner_id:c,source:n.location.href,build:"",duration:0},a);for(var g in e)e.hasOwnProperty(g)&&a[g]&&(a[e[g]]=a[g],delete a[g]);b.push({data:a,onComplete:function(){},isQos:!0});f()};this.escapePayload=function(a){var c=[],b=[],e;for(e in a)a.hasOwnProperty(e)&&null!==a[e]&&void 0!==
a[e]&&(c.push(a[e]?a[e].toString().replace("|","\\|"):""),b.push(e.toString().replace("|","\\|")));return[b.join("|"),c.join("|")]};this.getClientGuid=function(){var a=OT.$.getCookie("opentok_client_id");a||(a=OT.$.uuid(),OT.$.setCookie("opentok_client_id",a));this.getClientGuid=function(){return a};return a}}}(window);
!function(n){"file:"===location.protocol&&alert("You cannot test a page using WebRTC through the file system due to browser permissions. You must run it over a web server.");n.OT||(n.OT={});!n.URL&&n.webkitURL&&(n.URL=n.webkitURL);var b,m=document.location.hash;OT.initSession=function(b,a){null==a&&(a=b,b=null);var c=OT.sessions.get(a);c||(c=new OT.Session(b,a),OT.sessions.add(c));return c};OT.initPublisher=function(b,a,c,e){OT.debug("OT.initPublisher("+b+")");null==b||"object"===typeof b&&b.nodeType===
Node.ELEMENT_NODE||"string"===typeof b&&document.getElementById(b)||"function"===typeof b||(b=a,a=c,c=e);"function"===typeof b&&(c=b,b=a=void 0);"function"===typeof a&&(c=a,a=void 0);var g=new OT.Publisher;OT.publishers.add(g);var f=function(a){a?OT.dispatchError(a.code,a.message,c,g.session):c&&OT.$.isFunction(c)&&c.apply(null,arguments)},l=function(a){g.off("publishComplete",m);f(a)},m=function(a){g.off("initSuccess",l);a&&f(a)};g.once("initSuccess",l);g.once("publishComplete",m);g.publish(b,a);
return g};OT.checkSystemRequirements=function(){OT.debug("OT.checkSystemRequirements()");var b=OT.$.supportsWebSockets()&&OT.$.supportsWebRTC()?this.HAS_REQUIREMENTS:this.NOT_HAS_REQUIREMENTS;OT.checkSystemRequirements=function(){OT.debug("OT.checkSystemRequirements()");return b};return b};OT.upgradeSystemRequirements=function(){OT.onLoad(function(){document.body.appendChild(function(){var b=document.createElement("iframe");b.id="_upgradeFlash";b.style.position="absolute";b.style.position="fixed";
b.style.height="100%";b.style.width="100%";b.style.top="0px";b.style.left="0px";b.style.right="0px";b.style.bottom="0px";b.style.zIndex=1E3;try{b.style.backgroundColor="rgba(0,0,0,0.2)"}catch(a){b.style.backgroundColor="transparent",b.setAttribute("allowTransparency","true")}b.setAttribute("frameBorder","0");b.frameBorder="0";b.scrolling="no";b.setAttribute("scrolling","no");var c=OT.$.browserVersion(),c=OT.properties.minimumVersion[c.browser.toLowerCase()];b.src=OT.properties.assetURL+"/html/upgrade.html#"+
encodeURIComponent(c?"true":"false")+","+encodeURIComponent(JSON.stringify(OT.properties.minimumVersion))+"|"+encodeURIComponent(document.location.href);return b}());b&&clearInterval(b);b=setInterval(function(){var b=document.location.hash,a=/^#?\d+&/;b!==m&&a.test(b)&&(m=b,"close_window"===b.replace(a,"")&&(document.body.removeChild(document.getElementById("_upgradeFlash")),document.location.hash=""))},100)})};OT.reportIssue=function(){OT.warn("ToDo: haven't yet implemented OT.reportIssue")};OT.components=
{};OT.sessions={};OT.rtc={};OT.APIKEY=function(){var b=document.getElementsByTagName("script"),b=b[b.length-1],b=b.getAttribute("src")||b.src;return(b=b.match(/[\?\&]apikey=([^&]+)/i))?b[1]:""}();OT.HAS_REQUIREMENTS=1;OT.NOT_HAS_REQUIREMENTS=0;n.OT||(n.OT=OT);n.TB||(n.TB=OT)}(window);
!function(){OT.Collection=function(n){var b=[],m={},h=n||"id";OT.$.eventing(this,!0);var a=function(a){this.trigger("update",a);this.trigger("update:"+a.target.id,a)}.bind(this),c=function(a){this.remove(a.target,a.reason)}.bind(this);this.reset=function(){b.forEach(function(b){b.off("updated",a,this);b.off("destroyed",c,this)},this);b=[];m={}};this.destroy=function(){b.forEach(function(a){a&&"function"===typeof a.destroy&&a.destroy(void 0,!0)});this.reset();this.off()};this.get=function(a){return a&&
void 0!==m[a]?b[m[a]]:void 0};this.has=function(a){return a&&void 0!==m[a]};this.toString=function(){return b.toString()};this.where=function(a,c){return OT.$.isFunction(a)?b.filter(a,c):b.filter(function(b){for(var c in a)if(b[c]!==a[c])return!1;return!0})};this.find=function(a,c){var f;f=OT.$.isFunction(a)?a:function(c){for(var b in a)if(c[b]!==a[b])return!1;return!0};f=f.bind(c);for(var l=0;l<b.length;++l)if(!0===f(b[l]))return b[l];return null};this.add=function(e){var g=e[h];if(this.has(g))return OT.warn("Model "+
g+" is already in the collection",b),this;m[g]=b.push(e)-1;e.on("updated",a,this);e.on("destroyed",c,this);this.trigger("add",e);this.trigger("add:"+g,e);return this};this.remove=function(e,g){var f=e[h];b.splice(m[f],1);for(var l=m[f];l<b.length;++l)m[b[l][h]]=l;delete m[f];e.off("updated",a,this);e.off("destroyed",c,this);this.trigger("remove",e,g);this.trigger("remove:"+f,e,g);return this};this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(a){this.trigger("add",
a);this.trigger("add:"+a[h],a)},this)};OT.$.defineGetters(this,{length:function(){return b.length}})}}(this);
!function(){OT.Event=OT.$.eventing.Event();OT.Event.names={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",
MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",PUBLISHER_DESTROYED:"destroyed",SUBSCRIBER_DESTROYED:"destroyed",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",
CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded"};OT.ExceptionCodes={JS_EXCEPTION:2E3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530};OT.ExceptionEvent=function(a,
b,g,f,l,h){OT.Event.call(this,a);this.message=b;this.title=g;this.code=f;this.component=l;this.target=h};OT.IssueReportedEvent=function(a,b){OT.Event.call(this,a);this.issueId=b};OT.EnvLoadedEvent=function(a){OT.Event.call(this,a)};var n=!1;OT.ConnectionEvent=function(a,b,g){OT.Event.call(this,a,!1);OT.$.canDefineProperty?Object.defineProperty(this,"connections",{get:function(){n||(OT.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),n=!0);return[b]}}):this.connections=
[b];this.connection=b;this.reason=g};var b=!1;OT.StreamEvent=function(a,e,g,f){OT.Event.call(this,a,f);OT.$.canDefineProperty?Object.defineProperty(this,"streams",{get:function(){b||(OT.warn("OT.StreamEvent streams property is deprecated, use stream instead."),b=!0);return[e]}}):this.streams=[e];this.stream=e;this.reason=g};var m=!1,h=!1,a=!1;OT.SessionConnectEvent=function(b){OT.Event.call(this,b,!1);OT.$.canDefineProperty?Object.defineProperties(this,{connections:{get:function(){m||(OT.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),
m=!0);return[]}},streams:{get:function(){OT.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead.");m=!0;return[]}},archives:{get:function(){h||(OT.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),h=!0);return[]}},groups:{get:function(){a||(OT.error("OT.SessionConnectedEvent no longer includes groups. There is no equivelant in OpenTok v2.2"),a=!0);return[]}}}):(this.connections=[],this.streams=[],
this.archives=[],this.groups=[])};OT.SessionDisconnectEvent=function(a,b,g){OT.Event.call(this,a,g);this.reason=b};OT.StreamPropertyChangedEvent=function(a,b,g,f,l){OT.Event.call(this,a,!1);this.type=a;this.stream=b;this.changedProperty=g;this.oldValue=f;this.newValue=l};OT.ArchiveEvent=function(a,b){OT.Event.call(this,a,!1);this.type=a;this.id=b.id;this.name=b.name;this.status=b.status;this.archive=b};OT.ArchiveUpdatedEvent=function(a,b,g,f){OT.Event.call(this,"updated",!1);this.target=a;this.changedProperty=
b;this.oldValue=g;this.newValue=f};OT.SignalEvent=function(a,b,g){OT.Event.call(this,a?"signal:"+a:OT.Event.names.SIGNAL,!1);this.data=b;this.from=g};OT.StreamUpdatedEvent=function(a,b,g,f){OT.Event.call(this,"updated",!1);this.target=a;this.changedProperty=b;this.oldValue=g;this.newValue=f};OT.DestroyedEvent=function(a,b,g){OT.Event.call(this,a,!1);this.target=b;this.reason=g}}(window);
(function(n){function b(a,b,c){return b<=a&&a<=c}function m(a,b){return Math.floor(a/b)}function h(a){var b=0;this.get=function(){return b>=a.length?-1:Number(a[b])};this.offset=function(c){b+=c;if(0>b)throw Error("Seeking past start of the buffer");if(b>a.length)throw Error("Seeking past EOF");};this.match=function(c){if(c.length>b+a.length)return!1;var e;for(e=0;e<c.length;e+=1)if(Number(a[b+e])!==c[e])return!1;return!0}}function a(a){var b=0;this.emit=function(c){var e=-1,f;for(f=0;f<arguments.length;++f)e=
Number(arguments[f]),a[b++]=e;return e}}function c(a){var c=0,e=function(a){for(var c=[],e=0,f=a.length;e<a.length;){var g=a.charCodeAt(e);if(b(g,55296,57343))if(b(g,56320,57343))c.push(65533);else if(e===f-1)c.push(65533);else{var l=a.charCodeAt(e+1);b(l,56320,57343)?(g&=1023,l&=1023,e+=1,c.push(65536+(g<<10)+l)):c.push(65533)}else c.push(g);e+=1}return c}(a);this.offset=function(a){c+=a;if(0>c)throw Error("Seeking past start of the buffer");if(c>e.length)throw Error("Seeking past EOF");};this.get=
function(){return c>=e.length?-1:e[c]}}function e(){var a="";this.string=function(){return a};this.emit=function(b){65535>=b?a+=String.fromCharCode(b):(b-=65536,a+=String.fromCharCode(55296+(b>>10&1023)),a+=String.fromCharCode(56320+(b&1023)))}}function g(a){this.name="EncodingError";this.message=a;this.code=0}function f(a,b){if(a)throw new g("Decoder error");return b||65533}function l(a){throw new g("The code point "+a+" could not be encoded.");}function r(a){a=String(a).trim().toLowerCase();return Object.prototype.hasOwnProperty.call(S,
a)?S[a]:null}function p(a,b){return(b||[])[a]||null}function u(a,b){var c=b.indexOf(a);return-1===c?null:c}function s(a){var c=a.fatal,e=0,g=0,l=0,h=0;this.decode=function(a){var m=a.get();if(-1===m)return 0!==g?f(c):-1;a.offset(1);if(0===g){if(b(m,0,127))return m;if(b(m,194,223))g=1,h=128,e=m-192;else if(b(m,224,239))g=2,h=2048,e=m-224;else if(b(m,240,244))g=3,h=65536,e=m-240;else return f(c);e*=Math.pow(64,g);return null}if(!b(m,128,191))return h=l=g=e=0,a.offset(-1),f(c);l+=1;e+=(m-128)*Math.pow(64,
g-l);if(l!==g)return null;a=e;m=h;h=l=g=e=0;return b(a,m,1114111)&&!b(a,55296,57343)?a:f(c)}}function t(a){this.encode=function(a,c){var e=c.get();if(-1===e)return-1;c.offset(1);if(b(e,55296,57343))return l(e);if(b(e,0,127))return a.emit(e);var f,g;b(e,128,2047)?(f=1,g=192):b(e,2048,65535)?(f=2,g=224):b(e,65536,1114111)&&(f=3,g=240);for(g=a.emit(m(e,Math.pow(64,f))+g);0<f;)g=m(e,Math.pow(64,f-1)),g=a.emit(128+g%64),f-=1;return g}}function v(a,c){var e=c.fatal;this.decode=function(c){var g=c.get();
if(-1===g)return-1;c.offset(1);if(b(g,0,127))return g;c=a[g-128];return null===c?f(e):c}}function z(a,c){this.encode=function(c,e){var f=e.get();if(-1===f)return-1;e.offset(1);if(b(f,0,127))return c.emit(f);var g=u(f,a);null===g&&l(f);return c.emit(g+128)}}function D(a,c){var e=c.fatal,g=0,l=0,h=0;this.decode=function(c){var m=c.get();if(-1===m&&0===g&&0===l&&0===h)return-1;-1!==m||0===g&&0===l&&0===h||(h=l=g=0,f(e));c.offset(1);var n;if(0!==h){n=null;if(b(m,48,57))if(m=10*(126*(10*(g-129)+(l-48))+
(h-129))+m-48,39419<m&&189E3>m||1237575<m)n=null;else{var r=0;n=0;var s=O.gb18030,t;for(t=0;t<s.length;++t){var u=s[t];if(u[0]<=m)r=u[0],n=u[1];else break}n=n+m-r}h=l=g=0;return null===n?(c.offset(-3),f(e)):n}if(0!==l){if(b(m,129,254))return h=m,null;c.offset(-2);l=g=0;return f(e)}if(0!==g){if(b(m,48,57)&&a)return l=m,null;n=g;r=null;g=0;s=127>m?64:65;if(b(m,64,126)||b(m,128,254))r=190*(n-129)+(m-s);n=null===r?null:p(r,O.gbk);null===r&&c.offset(-1);return null===n?f(e):n}return b(m,0,127)?m:128===
m?8364:b(m,129,254)?(g=m,null):f(e)}}function x(a,c){this.encode=function(c,e){var f=e.get();if(-1===f)return-1;e.offset(1);if(b(f,0,127))return c.emit(f);var g=u(f,O.gbk);if(null!==g)return f=m(g,190)+129,g%=190,c.emit(f,g+(63>g?64:65));if(null===g&&!a)return l(f);var h=g=0,p=O.gb18030,n;for(n=0;n<p.length;++n){var r=p[n];if(r[1]<=f)g=r[1],h=r[0];else break}g=h+f-g;f=m(m(m(g,10),126),10);g-=12600*f;h=m(m(g,10),126);g-=1260*h;p=m(g,10);return c.emit(f+129,h+48,p+129,g-10*p+48)}}function w(a){var c=
a.fatal,e=!1,g=0;this.decode=function(a){var l=a.get();if(-1===l&&0===g)return-1;if(-1===l&&0!==g)return g=0,f(c);a.offset(1);if(126===g){g=0;if(123===l)return e=!0,null;if(125===l)return e=!1,null;if(126===l)return 126;if(10===l)return null;a.offset(-1);return f(c)}if(0!==g){a=g;g=0;var h=null;b(l,33,126)&&(h=p(190*(a-1)+(l+63),O.gbk));10===l&&(e=!1);return null===h?f(c):h}if(126===l)return g=126,null;if(e){if(b(l,32,127))return g=l,null;10===l&&(e=!1);return f(c)}return b(l,0,127)?l:f(c)}}function C(a){var c=
!1;this.encode=function(a,e){var f=e.get();if(-1===f)return-1;e.offset(1);if(b(f,0,127)&&c)return e.offset(-1),c=!1,a.emit(126,125);if(126===f)return a.emit(126,126);if(b(f,0,127))return a.emit(f);if(!c)return e.offset(-1),c=!0,a.emit(126,123);var g=u(f,O.gbk);if(null===g)return l(f);var h=m(g,190)+1,g=g%190-63;return b(h,33,126)&&b(g,33,126)?a.emit(h,g):l(f)}}function J(a){var c=a.fatal,e=0,g=null;this.decode=function(a){if(null!==g)return a=g,g=null,a;var l=a.get();if(-1===l&&0===e)return-1;if(-1===
l&&0!==e)return e=0,f(c);a.offset(1);if(0!==e){var h=e,m=null;e=0;var n=127>l?64:98;if(b(l,64,126)||b(l,161,254))m=157*(h-129)+(l-n);if(1133===m)return g=772,202;if(1135===m)return g=780,202;if(1164===m)return g=772,234;if(1166===m)return g=780,234;l=null===m?null:p(m,O.big5);null===m&&a.offset(-1);return null===l?f(c):l}return b(l,0,127)?l:b(l,129,254)?(e=l,null):f(c)}}function A(a){this.encode=function(a,c){var e=c.get();if(-1===e)return-1;c.offset(1);if(b(e,0,127))return a.emit(e);var f=u(e,O.big5);
if(null===f)return l(e);e=m(f,157)+129;f%=157;return a.emit(e,f+(63>f?64:98))}}function K(a){var c=a.fatal,e=0,g=0;this.decode=function(a){var l=a.get();if(-1===l){if(0===e&&0===g)return-1;g=e=0;return f(c)}a.offset(1);var h,m;return 0!==g?(h=g,g=0,m=null,b(h,161,254)&&b(l,161,254)&&(m=p(94*(h-161)+l-161,O.jis0212)),b(l,161,254)||a.offset(-1),null===m?f(c):m):142===e&&b(l,161,223)?(e=0,65377+l-161):143===e&&b(l,161,254)?(e=0,g=l,null):0!==e?(h=e,e=0,m=null,b(h,161,254)&&b(l,161,254)&&(m=p(94*(h-161)+
l-161,O.jis0208)),b(l,161,254)||a.offset(-1),null===m?f(c):m):b(l,0,127)?l:142===l||143===l||b(l,161,254)?(e=l,null):f(c)}}function T(a){this.encode=function(a,c){var e=c.get();if(-1===e)return-1;c.offset(1);if(b(e,0,127))return a.emit(e);if(165===e)return a.emit(92);if(8254===e)return a.emit(126);if(b(e,65377,65439))return a.emit(142,e-65377+161);var f=u(e,O.jis0208);if(null===f)return l(e);e=m(f,94)+161;return a.emit(e,f%94+161)}}function y(a){var c=a.fatal,e=0,g=!1,l=0;this.decode=function(a){var h=
a.get();-1!==h&&a.offset(1);switch(e){default:case 0:return 27===h?(e=1,null):b(h,0,127)?h:-1===h?-1:f(c);case 1:if(36===h||40===h)return l=h,e=2,null;-1!==h&&a.offset(-1);e=0;return f(c);case 2:var m=l;l=0;if(36===m&&(64===h||66===h))return g=!1,e=4,null;if(36===m&&40===h)return e=3,null;if(40===m&&(66===h||74===h))return e=0,null;if(40===m&&73===h)return e=6,null;-1===h?a.offset(-1):a.offset(-2);e=0;return f(c);case 3:if(68===h)return g=!0,e=4,null;-1===h?a.offset(-2):a.offset(-3);e=0;return f(c);
case 4:if(10===h)return e=0,f(c,10);if(27===h)return e=1,null;if(-1===h)return-1;l=h;e=5;return null;case 5:e=4;if(-1===h)return f(c);a=null;m=94*(l-33)+h-33;b(l,33,126)&&b(h,33,126)&&(a=!1===g?p(m,O.jis0208):p(m,O.jis0212));return null===a?f(c):a;case 6:return 27===h?(e=1,null):b(h,33,95)?65377+h-33:-1===h?-1:f(c)}}}function P(a){var c=0;this.encode=function(a,e){var f=e.get();if(-1===f)return-1;e.offset(1);if((b(f,0,127)||165===f||8254===f)&&0!==c)return e.offset(-1),c=0,a.emit(27,40,66);if(b(f,
0,127))return a.emit(f);if(165===f)return a.emit(92);if(8254===f)return a.emit(126);if(b(f,65377,65439)&&2!==c)return e.offset(-1),c=2,a.emit(27,40,73);if(b(f,65377,65439))return a.emit(f-65377-33);if(1!==c)return e.offset(-1),c=1,a.emit(27,36,66);var g=u(f,O.jis0208);if(null===g)return l(f);f=m(g,94)+33;return a.emit(f,g%94+33)}}function F(a){var c=a.fatal,e=0;this.decode=function(a){var g=a.get();if(-1===g&&0===e)return-1;if(-1===g&&0!==e)return e=0,f(c);a.offset(1);if(0!==e){var l=e;e=0;if(b(g,
64,126)||b(g,128,252))return a=p(188*(l-(160>l?129:193))+g-(127>g?64:65),O.jis0208),null===a?f(c):a;a.offset(-1);return f(c)}return b(g,0,128)?g:b(g,161,223)?65377+g-161:b(g,129,159)||b(g,224,252)?(e=g,null):f(c)}}function Q(a){this.encode=function(a,c){var e=c.get();if(-1===e)return-1;c.offset(1);if(b(e,0,128))return a.emit(e);if(165===e)return a.emit(92);if(8254===e)return a.emit(126);if(b(e,65377,65439))return a.emit(e-65377+161);var f=u(e,O.jis0208);if(null===f)return l(e);e=m(f,188);f%=188;return a.emit(e+
(31>e?129:193),f+(63>f?64:65))}}function M(a){var c=a.fatal,e=0;this.decode=function(a){var g=a.get();if(-1===g&&0===e)return-1;if(-1===g&&0!==e)return e=0,f(c);a.offset(1);if(0!==e){var l=e,h=null;e=0;if(b(l,129,198)){var m=178*(l-129);b(g,65,90)?h=m+g-65:b(g,97,122)?h=m+26+g-97:b(g,129,254)&&(h=m+26+26+g-129)}b(l,199,253)&&b(g,161,254)&&(h=12460+94*(l-199)+(g-161));g=null===h?null:p(h,O["euc-kr"]);null===h&&a.offset(-1);return null===g?f(c):g}return b(g,0,127)?g:b(g,129,253)?(e=g,null):f(c)}}function R(a){this.encode=
function(a,c){var e=c.get();if(-1===e)return-1;c.offset(1);if(b(e,0,127))return a.emit(e);var f=u(e,O["euc-kr"]);if(null===f)return l(e);if(12460>f)return e=m(f,178)+129,f%=178,a.emit(e,f+(26>f?65:52>f?71:77));f-=12460;e=m(f,94)+199;return a.emit(e,f%94+161)}}function E(a){var c=a.fatal,e=0,g=0;this.decode=function(a){var l=a.get();-1!==l&&a.offset(1);switch(e){default:case 0:return 14===l?(e=4,null):15===l?null:27===l?(e=1,null):b(l,0,127)?l:-1===l?-1:f(c);case 1:if(36===l)return e=2,null;-1!==l&&
a.offset(-1);e=0;return f(c);case 2:if(41===l)return e=3,null;-1===l?a.offset(-1):a.offset(-2);e=0;return f(c);case 3:if(67===l)return e=0,null;-1===l?a.offset(-2):a.offset(-3);e=0;return f(c);case 4:if(10===l)return e=0,f(c,10);if(14===l)return null;if(15===l)return e=0,null;if(-1===l)return-1;g=l;e=5;return null;case 5:e=4;if(-1===l)return f(c);a=null;b(g,33,70)&&b(l,33,126)?a=p(178*(g-1)+52+l-1,O["euc-kr"]):b(g,71,126)&&b(l,33,126)&&(a=p(12460+94*(g-71)+(l-33),O["euc-kr"]));return null!==a?a:f(c)}}}
function Y(a){var c=!1,e=0;this.encode=function(a,f){var g=f.get();if(-1===g)return-1;c||(c=!0,a.emit(27,36,41,67));f.offset(1);if(b(g,0,127)&&0!==e)return f.offset(-1),e=0,a.emit(15);if(b(g,0,127))return a.emit(g);if(1!==e)return f.offset(-1),e=1,a.emit(14);var h=u(g,O["euc-kr"]);if(null===h)return l(g);var p;if(12460>h)return p=m(h,178)+1,h=h%178-26-26+1,b(p,33,70)&&b(h,33,126)?a.emit(p,h):l(g);h-=12460;p=m(h,94)+71;h=h%94+33;return b(p,71,126)&&b(h,33,126)?a.emit(p,h):l(g)}}function N(a,c){var e=
c.fatal,g=null,l=null;this.decode=function(c){var h=c.get();if(-1===h&&null===g&&null===l)return-1;if(-1===h&&(null!==g||null!==l))return f(e);c.offset(1);if(null===g)return g=h,null;h=a?(g<<8)+h:(h<<8)+g;g=null;if(null!==l){var m=l;l=null;if(b(h,56320,57343))return 65536+1024*(m-55296)+(h-56320);c.offset(-2);return f(e)}return b(h,55296,56319)?(l=h,null):b(h,56320,57343)?f(e):h}}function U(a,c){this.encode=function(c,e){function f(b){var e=b>>8;b&=255;return a?c.emit(e,b):c.emit(b,e)}var g=e.get();
if(-1===g)return-1;e.offset(1);b(g,55296,57343)&&l(g);if(65535>=g)return f(g);var h=m(g-65536,1024)+55296,g=(g-65536)%1024+56320;f(h);return f(g)}}function Z(a,c){if(!this||this===n)return new Z(a,c);a=a?String(a):"utf-8";c=Object(c);this._encoding=r(a);if(null===this._encoding||"utf-8"!==this._encoding.name&&"utf-16"!==this._encoding.name&&"utf-16be"!==this._encoding.name)throw new TypeError("Unknown encoding: "+a);this._streaming=!1;this._encoder=null;this._options={fatal:Boolean(c.fatal)};Object.defineProperty?
Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name;return this}function fa(a,c){if(!this||this===n)return new fa(a,c);a=a?String(a):"utf-8";c=Object(c);this._encoding=r(a);if(null===this._encoding)throw new TypeError("Unknown encoding: "+a);this._streaming=!1;this._decoder=null;this._options={fatal:Boolean(c.fatal)};Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=
this._encoding.name;return this}if(void 0===n.TextEncoder||void 0===n.TextDecoder){g.prototype=Error.prototype;var L={},S={};[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["cp864","ibm864"],name:"ibm864"},{labels:["cp866","ibm866"],name:"ibm866"},{labels:"csisolatin2 iso-8859-2 iso-ir-101 iso8859-2 iso_8859-2 l2 latin2".split(" "),name:"iso-8859-2"},{labels:"csisolatin3 iso-8859-3 iso_8859-3 iso-ir-109 l3 latin3".split(" "),name:"iso-8859-3"},
{labels:"csisolatin4 iso-8859-4 iso_8859-4 iso-ir-110 l4 latin4".split(" "),name:"iso-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso_8859-5","iso-ir-144"],name:"iso-8859-5"},{labels:"arabic csisolatinarabic ecma-114 iso-8859-6 iso_8859-6 iso-ir-127".split(" "),name:"iso-8859-6"},{labels:"csisolatingreek ecma-118 elot_928 greek greek8 iso-8859-7 iso_8859-7 iso-ir-126".split(" "),name:"iso-8859-7"},{labels:"csisolatinhebrew hebrew iso-8859-8 iso-8859-8-i iso-ir-138 iso_8859-8 visual".split(" "),
name:"iso-8859-8"},{labels:"csisolatin6 iso-8859-10 iso-ir-157 iso8859-10 l6 latin6".split(" "),name:"iso-8859-10"},{labels:["iso-8859-13"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14"],name:"iso-8859-14"},{labels:["iso-8859-15","iso_8859-15"],name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["iso-8859-11","tis-620",
"windows-874"],name:"windows-874"},{labels:["windows-1250","x-cp1250"],name:"windows-1250"},{labels:["windows-1251","x-cp1251"],name:"windows-1251"},{labels:"ascii ansi_x3.4-1968 csisolatin1 iso-8859-1 iso8859-1 iso_8859-1 l1 latin1 us-ascii windows-1252".split(" "),name:"windows-1252"},{labels:["cp1253","windows-1253"],name:"windows-1253"},{labels:"csisolatin5 iso-8859-9 iso-ir-148 l5 latin5 windows-1254".split(" "),name:"windows-1254"},{labels:["cp1255","windows-1255"],name:"windows-1255"},{labels:["cp1256",
"windows-1256"],name:"windows-1256"},{labels:["windows-1257"],name:"windows-1257"},{labels:["cp1258","windows-1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:"chinese csgb2312 csiso58gb231280 gb2312 gbk gb_2312 gb_2312-80 iso-ir-58 x-gbk".split(" "),name:"gbk"},{labels:["gb18030"],name:"gb18030"},{labels:["hz-gb-2312"],name:"hz-gb-2312"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},
{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:"csshiftjis ms_kanji shift-jis shift_jis sjis windows-31j x-sjis".split(" "),name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:"cseuckr csksc56011987 euc-kr iso-ir-149 korean ks_c_5601-1987 ks_c_5601-1989 ksc5601 ksc_5601 windows-949".split(" "),
name:"euc-kr"},{labels:["csiso2022kr","iso-2022-kr"],name:"iso-2022-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["utf-16","utf-16le"],name:"utf-16"},{labels:["utf-16be"],name:"utf-16be"}],heading:"Legacy utf-16 encodings"}].forEach(function(a){a.encodings.forEach(function(a){L[a.name]=a;a.labels.forEach(function(c){S[c]=a})})});var O=n["encoding-indexes"]||{};L["utf-8"].getEncoder=function(a){return new t(a)};L["utf-8"].getDecoder=function(a){return new s(a)};(function(){"ibm864 ibm866 iso-8859-2 iso-8859-3 iso-8859-4 iso-8859-5 iso-8859-6 iso-8859-7 iso-8859-8 iso-8859-10 iso-8859-13 iso-8859-14 iso-8859-15 iso-8859-16 koi8-r koi8-u macintosh windows-874 windows-1250 windows-1251 windows-1252 windows-1253 windows-1254 windows-1255 windows-1256 windows-1257 windows-1258 x-mac-cyrillic".split(" ").forEach(function(a){var c=
L[a],b=O[a];c.getDecoder=function(a){return new v(b,a)};c.getEncoder=function(a){return new z(b,a)}})})();L.gbk.getEncoder=function(a){return new x(!1,a)};L.gbk.getDecoder=function(a){return new D(!1,a)};L.gb18030.getEncoder=function(a){return new x(!0,a)};L.gb18030.getDecoder=function(a){return new D(!0,a)};L["hz-gb-2312"].getEncoder=function(a){return new C(a)};L["hz-gb-2312"].getDecoder=function(a){return new w(a)};L.big5.getEncoder=function(a){return new A(a)};L.big5.getDecoder=function(a){return new J(a)};
L["euc-jp"].getEncoder=function(a){return new T(a)};L["euc-jp"].getDecoder=function(a){return new K(a)};L["iso-2022-jp"].getEncoder=function(a){return new P(a)};L["iso-2022-jp"].getDecoder=function(a){return new y(a)};L.shift_jis.getEncoder=function(a){return new Q(a)};L.shift_jis.getDecoder=function(a){return new F(a)};L["euc-kr"].getEncoder=function(a){return new R(a)};L["euc-kr"].getDecoder=function(a){return new M(a)};L["iso-2022-kr"].getEncoder=function(a){return new Y(a)};L["iso-2022-kr"].getDecoder=
function(a){return new E(a)};L["utf-16"].getEncoder=function(a){return new U(!1,a)};L["utf-16"].getDecoder=function(a){return new N(!1,a)};L["utf-16be"].getEncoder=function(a){return new U(!0,a)};L["utf-16be"].getDecoder=function(a){return new N(!0,a)};Z.prototype={encode:function(b,e){b=b?String(b):"";e=Object(e);this._streaming||(this._encoder=this._encoding.getEncoder(this._options));this._streaming=Boolean(e.stream);for(var f=[],g=new a(f),l=new c(b);-1!==l.get();)this._encoder.encode(g,l);if(!this._streaming){var h;
do h=this._encoder.encode(g,l);while(-1!==h);this._encoder=null}return new Uint8Array(f)}};fa.prototype={decode:function(a,c){if(a&&!("buffer"in a&&"byteOffset"in a&&"byteLength"in a))throw new TypeError("Expected ArrayBufferView");a||(a=new Uint8Array(0));c=Object(c);this._streaming||(this._decoder=this._encoding.getDecoder(this._options));this._streaming=Boolean(c.stream);var b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),b=new h(b);if(!this._BOMseen){this._BOMseen=!0;var f=this._encoding.name;
b.match([255,254])&&"utf-16"===f?b.offset(2):b.match([254,255])&&"utf-16be"==f?b.offset(2):b.match([239,187,191])&&"utf-8"==f&&b.offset(3)}for(var f=new e,g;-1!==b.get();)g=this._decoder.decode(b),null!==g&&-1!==g&&f.emit(g);if(!this._streaming){do g=this._decoder.decode(b),null!==g&&-1!==g&&f.emit(g);while(-1!==g&&-1!=b.get());this._decoder=null}return f.string()}};n.TextEncoder=n.TextEncoder||Z;n.TextDecoder=n.TextDecoder||fa}})(this);
!function(){OT.Rumor={MessageType:{SUBSCRIBE:0,UNSUBSCRIBE:1,MESSAGE:2,CONNECT:3,DISCONNECT:4,PING:7,PONG:8,STATUS:9}}}(this);
!function(){var n;n={1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data). (CLOSE_UNSUPPORTED)",1004:"The endpoint is terminating the connection because a data frame was received that is too large. (CLOSE_TOO_LARGE)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",
1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",
1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message"};OT.Rumor.SocketError=function(b,m){this.code=b;this.message=m};OT.Rumor.Socket=function(b,m,h){var a,c,e,g,f,
l,r,p,u,s,t,v=OT.$.statable(this,["disconnected","error","connected","connecting","disconnecting"],"disconnected",function(c){switch(c){case "disconnected":case "error":if(a=null,f){var b;s&&44900<=OT.$.now()-s&&(b=Error(n[4001]),b.code=4001);f(b)}}}),z=function(a,c){if(null===c||!OT.$.isFunction(c))throw Error("The Rumor.Socket "+a+" callback must be a valid function or null");},D=function(a){OT.error("Rumor.Socket: "+a);a=new OT.Rumor.SocketError(null,a||"Unknown Socket Error");u&&clearTimeout(u);
v("error");"connecting"===this.previousState&&r&&(r(a,null),r=null);g&&g(a)}.bind(this),x=function P(c){a&&(void 0===c&&(c=0),p&&clearTimeout(p),0<a.bufferedAmount&&10>=c+1?p=setTimeout(P,100,c+1):(v("disconnecting"),p&&(clearTimeout(p),p=null),a.close()))},w=function F(){this.is("connected")&&(s&&44900<=OT.$.now()-s?K({code:4001}):(a.send(OT.Rumor.Message.Ping().serialize()),t=setTimeout(F.bind(this),9E3)))}.bind(this),C=function(){u&&clearTimeout(u);this.isNot("connecting")?OT.debug("webSocketConnected reached in state other than connecting"):
(a.send(OT.Rumor.Message.Connect(c,m).serialize()),v("connected"),r&&(r(null,c),r=null),e&&e(c),setTimeout(function(){s=OT.$.now();w()},9E3))}.bind(this),J=function(){var c=a;D("Timed out while waiting for the Rumor socket to connect.");try{c.close()}catch(b){}},A=function(){},K=function(a){u&&clearTimeout(u);t&&clearTimeout(t);if(1E3!==a.code&&1001!==a.code){var c=a.reason||a.message;!c&&n.hasOwnProperty(a.code)&&(c=n[a.code]);D("Rumor Socket Disconnected: "+c)}this.isNot("error")&&v("disconnected")}.bind(this),
T=function(a){s=OT.$.now();l&&(a=OT.Rumor.Message.deserialize(a.data),a.type!==OT.Rumor.MessageType.PONG&&l(a))};this.publish=function(c,b,e){a.send(OT.Rumor.Message.Publish(c,b,e).serialize())};this.subscribe=function(c){a.send(OT.Rumor.Message.Subscribe(c).serialize())};this.unsubscribe=function(c){a.send(OT.Rumor.Message.Unsubscribe(c).serialize())};this.connect=function(e,f){if(this.is("connecting","connected"))f(new OT.Rumor.SocketError(null,"Rumor.Socket cannot connect when it is already connecting or connected."));
else{c=e;r=f;try{v("connecting"),a=new (h||WebSocket)(b),a.binaryType="arraybuffer",a.onopen=C,a.onclose=K,a.onerror=A,a.onmessage=T,u=setTimeout(J,OT.Rumor.Socket.CONNECT_TIMEOUT)}catch(g){OT.error(g),D("Could not connect to the Rumor socket, possibly because of a blocked port.")}}};this.disconnect=function(){u&&clearTimeout(u);t&&clearTimeout(t);a?3===a.readyState?this.isNot("error")&&v("disconnected"):(this.is("connected")&&a.send(OT.Rumor.Message.Disconnect().serialize()),x()):this.isNot("error")&&
v("disconnected")};Object.defineProperties(this,{id:{get:function(){return c}},onOpen:{set:function(a){z("onOpen",a);e=a},get:function(){return e}},onError:{set:function(a){z("onError",a);g=a},get:function(){return g}},onClose:{set:function(a){z("onClose",a);f=a},get:function(){return f}},onMessage:{set:function(a){z("onMessage",a);l=a},get:function(){return l}}})};OT.Rumor.Socket.CONNECT_TIMEOUT=15E3}(this);
!function(){OT.Rumor.Message=function(n,b,m,h){this.type=n;this.toAddress=b;this.headers=m;this.data=h;this.transactionId=this.headers["TRANSACTION-ID"];this.status=this.headers.STATUS;this.isError=!(this.status&&"2"===this.status[0])};OT.Rumor.Message.prototype.serialize=function(){var n=8,b=7,m=[],h=[],a=[],c,e,g;b++;for(e=0;e<this.toAddress.length;e++)m.push((new TextEncoder("utf-8")).encode(this.toAddress[e])),b+=2,b+=m[e].length;b++;e=0;for(c in this.headers)h.push((new TextEncoder("utf-8")).encode(c)),
a.push((new TextEncoder("utf-8")).encode(this.headers[c])),b+=4,b+=h[e].length,b+=a[e].length,e++;c=(new TextEncoder("utf-8")).encode(this.data);var b=b+c.length,f=new ArrayBuffer(b),l=new Uint8Array(f,0,b),b=b-4;l[0]=(b&4278190080)>>>24;l[1]=(b&16711680)>>>16;l[2]=(b&65280)>>>8;l[3]=(b&255)>>>0;l[4]=0;l[5]=0;l[6]=this.type;l[7]=this.toAddress.length;for(e=0;e<m.length;e++)for(b=m[e],l[n++]=b.length>>8&255,l[n++]=b.length>>0&255,g=0;g<b.length;g++)l[n++]=b[g];l[n++]=h.length;for(e=0;e<h.length;e++){b=
h[e];l[n++]=b.length>>8&255;l[n++]=b.length>>0&255;for(g=0;g<b.length;g++)l[n++]=b[g];b=a[e];l[n++]=b.length>>8&255;l[n++]=b.length>>0&255;for(g=0;g<b.length;g++)l[n++]=b[g]}for(e=0;e<c.length;e++)l[n++]=c[e];return f};OT.Rumor.Message.deserialize=function(n){if("undefined"!==typeof Buffer&&Buffer.isBuffer(n)){var b=n,m=new ArrayBuffer(b.length),h=new Uint8Array(m);for(n=0;n<b.length;++n)h[n]=b[n];n=m}var a=8,c=new Uint8Array(n),e,g,f,l,r,b=c[6],h=[];for(r=0;r<c[7];r++)l=c[a++]<<8,l+=c[a++],e=new Uint8Array(n,
a,l),h[r]=(new TextDecoder("utf-8")).decode(e),a+=l;g=c[a++];m={};for(r=0;r<g;r++)l=c[a++]<<8,l+=c[a++],e=new Uint8Array(n,a,l),f=(new TextDecoder("utf-8")).decode(e),a+=l,l=c[a++]<<8,l+=c[a++],e=new Uint8Array(n,a,l),e=(new TextDecoder("utf-8")).decode(e),m[f]=e,a+=l;n=new Uint8Array(n,a);n=(new TextDecoder("utf-8")).decode(n);return new OT.Rumor.Message(b,h,m,n)};OT.Rumor.Message.Connect=function(n,b){return new OT.Rumor.Message(OT.Rumor.MessageType.CONNECT,[],{uniqueId:n,notifyDisconnectAddress:b},
"")};OT.Rumor.Message.Disconnect=function(){return new OT.Rumor.Message(OT.Rumor.MessageType.DISCONNECT,[],[],"")};OT.Rumor.Message.Subscribe=function(n){return new OT.Rumor.Message(OT.Rumor.MessageType.SUBSCRIBE,n,[],"")};OT.Rumor.Message.Unsubscribe=function(n){return new OT.Rumor.Message(OT.Rumor.MessageType.UNSUBSCRIBE,n,[],"")};OT.Rumor.Message.Publish=function(n,b,m){return new OT.Rumor.Message(OT.Rumor.MessageType.MESSAGE,n,m||[],b)};OT.Rumor.Message.Ping=function(){return new OT.Rumor.Message(OT.Rumor.MessageType.PING,
[],[],"")}}(this);
!function(){OT.Raptor={Actions:{CONNECT:100,CREATE:101,UPDATE:102,DELETE:103,STATE:104,FORCE_DISCONNECT:105,FORCE_UNPUBLISH:106,SIGNAL:107,CREATE_ARCHIVE:108,CLOSE_ARCHIVE:109,START_RECORDING_SESSION:110,STOP_RECORDING_SESSION:111,START_RECORDING_STREAM:112,STOP_RECORDING_STREAM:113,LOAD_ARCHIVE:114,START_PLAYBACK:115,STOP_PLAYBACK:116,APPSTATE_PUT:117,APPSTATE_DELETE:118,OFFER:119,ANSWER:120,PRANSWER:121,CANDIDATE:122,SUBSCRIBE:123,UNSUBSCRIBE:124,QUERY:125,SDP_ANSWER:126,PONG:127,REGISTER:128,QUALITY_CHANGED:129},
Types:{RPC_REQUEST:100,RPC_RESPONSE:101,STREAM:102,ARCHIVE:103,CONNECTION:104,APPSTATE:105,CONNECTIONCOUNT:106,MODERATION:107,SIGNAL:108,SUBSCRIBER:110,JSEP:109}}}(this);
!function(){OT.Raptor.serializeMessage=function(n){return JSON.stringify(n)};OT.Raptor.deserializeMessage=function(n){if(0===n.length)return{};n=JSON.parse(n);var b=n.uri.substr(1).split("/");b.shift();""===b[b.length-1]&&b.pop();n.params={};for(var m=0,h=b.length;m<h-1;m+=2)n.params[b[m]]=b[m+1];n.resource=0===b.length%2?"channel"===b[b.length-2]&&6<b.length?b[b.length-4]+"_"+b[b.length-2]:b[b.length-2]:"channel"===b[b.length-1]&&5<b.length?b[b.length-3]+"_"+b[b.length-1]:b[b.length-1];n.signature=
n.resource+"#"+n.method;return n};OT.Raptor.unboxFromRumorMessage=function(n){var b=OT.Raptor.deserializeMessage(n.data);b.transactionId=n.transactionId;b.fromAddress=n.headers["X-TB-FROM-ADDRESS"];return b};OT.Raptor.parseIceServers=function(n){try{return JSON.parse(n.data).content.iceServers}catch(b){return[]}};OT.Raptor.Message={};OT.Raptor.Message.connections={};OT.Raptor.Message.connections.create=function(n,b,m){return OT.Raptor.serializeMessage({method:"create",uri:"/v2/partner/"+n+"/session/"+
b+"/connection/"+m,content:{userAgent:navigator.userAgent}})};OT.Raptor.Message.connections.destroy=function(n,b,m){return OT.Raptor.serializeMessage({method:"delete",uri:"/v2/partner/"+n+"/session/"+b+"/connection/"+m,content:{}})};OT.Raptor.Message.sessions={};OT.Raptor.Message.sessions.get=function(n,b){return OT.Raptor.serializeMessage({method:"read",uri:"/v2/partner/"+n+"/session/"+b,content:{}})};OT.Raptor.Message.streams={};OT.Raptor.Message.streams.get=function(n,b,m){return OT.Raptor.serializeMessage({method:"read",
uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m,content:{}})};OT.Raptor.Message.streams.create=function(n,b,m,h,a,c,e,g,f,l,r,p){var u=[];void 0!==g&&u.push({id:"audio1",type:"audio",active:g});void 0!==f&&(a={id:"video1",type:"video",active:f,width:c,height:e,orientation:a},l&&(a.frameRate=l),u.push(a));h={id:m,name:h,channel:u};r&&(h.minBitrate=r);p&&(h.maxBitrate=p);return OT.Raptor.serializeMessage({method:"create",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m,content:h})};OT.Raptor.Message.streams.destroy=
function(n,b,m){return OT.Raptor.serializeMessage({method:"delete",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m,content:{}})};OT.Raptor.Message.streams.offer=function(n,b,m,h){return OT.Raptor.serializeMessage({method:"offer",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m,content:{sdp:h}})};OT.Raptor.Message.streams.answer=function(n,b,m,h){return OT.Raptor.serializeMessage({method:"answer",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m,content:{sdp:h}})};OT.Raptor.Message.streams.candidate=
function(n,b,m,h){return OT.Raptor.serializeMessage({method:"candidate",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m,content:h})};OT.Raptor.Message.streamChannels={};OT.Raptor.Message.streamChannels.update=function(n,b,m,h,a){return OT.Raptor.serializeMessage({method:"update",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/channel/"+h,content:a})};OT.Raptor.Message.subscribers={};OT.Raptor.Message.subscribers.create=function(n,b,m,h,a,c){a={id:h,connection:a,keyManagementMethod:OT.$.supportedCryptoScheme(),
bundleSupport:OT.$.supportsBundle(),rtcpMuxSupport:OT.$.supportsRtcpMux()};c&&(a.channel=c);return OT.Raptor.serializeMessage({method:"create",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h,content:a})};OT.Raptor.Message.subscribers.destroy=function(n,b,m,h){return OT.Raptor.serializeMessage({method:"delete",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h,content:{}})};OT.Raptor.Message.subscribers.update=function(n,b,m,h,a){return OT.Raptor.serializeMessage({method:"update",
uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h,content:a})};OT.Raptor.Message.subscribers.candidate=function(n,b,m,h,a){return OT.Raptor.serializeMessage({method:"candidate",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h,content:a})};OT.Raptor.Message.subscribers.offer=function(n,b,m,h,a){return OT.Raptor.serializeMessage({method:"offer",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h,content:{sdp:a}})};OT.Raptor.Message.subscribers.answer=function(n,
b,m,h,a){return OT.Raptor.serializeMessage({method:"answer",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h,content:{sdp:a}})};OT.Raptor.Message.subscriberChannels={};OT.Raptor.Message.subscriberChannels.update=function(n,b,m,h,a,c){return OT.Raptor.serializeMessage({method:"update",uri:"/v2/partner/"+n+"/session/"+b+"/stream/"+m+"/subscriber/"+h+"/channel/"+a,content:c})};OT.Raptor.Message.signals={};OT.Raptor.Message.signals.create=function(n,b,m,h,a){var c={};void 0!==h&&(c.type=
h);void 0!==a&&(c.data=a);return OT.Raptor.serializeMessage({method:"signal",uri:"/v2/partner/"+n+"/session/"+b+(void 0!==m?"/connection/"+m:"")+"/signal/"+OT.$.uuid(),content:c})}}(this);
!function(){OT.Signal=function(n,b,m){b=function(a){var c=null;null===a||void 0===a?c={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:128<a.length?c={code:413,reason:"The signal type was too long, the maximum length of it is 128 characters"}:/^[a-zA-Z0-9\-\._~]+$/.exec(a)||(c={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."});return c};var h=function(a){var c=null;if(null===a||void 0===a)c=
{code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{8192<JSON.stringify(a).length&&(c={code:413,reason:"The data field was too long, the maximum size of it is 8192 characters"})}catch(b){c={code:400,reason:"The data field was not valid JSON"}}return c};this.toRaptorMessage=function(){var a=this.to;a&&"string"!==typeof a&&(a=a.id);return OT.Raptor.Message.signals.create(OT.APIKEY,n,a,this.type,this.data)};this.toHash=function(){return m};this.error=
null;m&&(m.hasOwnProperty("data")&&(this.data=OT.$.clone(m.data),this.error=h(this.data)),m.hasOwnProperty("to")&&(this.to=m.to,this.error||(this.error=this.to?this.to instanceof OT.Connection||this.to instanceof OT.Session?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal type was null or an empty String. Either set it to a non-empty String value or omit it"})),m.hasOwnProperty("type")&&(this.error||(this.error=b(m.type)),this.type=m.type));this.valid=null===this.error}}(this);
!function(){function n(b,m){this.code=b;this.reason=m}OT.Raptor.Socket=function(b,m,h,a){var c,e,g,f,l,r=OT.$.statable(this,["disconnected","connecting","connected","error","disconnecting"],"disconnected"),p=function(a){a?r("error"):r("connected");l.apply(null,arguments)},u=function(a){var c=this.is("disconnecting")?"clientDisconnected":"networkDisconnected";a&&4001===a.code&&(c="networkTimedout");r("disconnected");f.onClose(c)}.bind(this),s=function(){};this.connect=function(a,b,n){if(this.is("disconnected",
"error")){r("connecting");c=b.sessionId;e=a;l=n;a=OT.$.uuid();var D="/v2/partner/"+OT.APIKEY+"/session/"+c;g=new OT.Rumor.Socket(m,h);g.onClose=u;g.onMessage=f.dispatch.bind(f);g.connect(a,function(a){a?(a.message="WebSocketConnection:"+a.code+":"+a.message,p(a)):(g.onError=s,OT.debug("Raptor Socket connected. Subscribing to "+D+" on "+m),g.subscribe([D]),a=OT.Raptor.Message.connections.create(OT.APIKEY,c,g.id),this.publish(a,{"X-TB-TOKEN-AUTH":e},function(a){a?(a.message="ConnectToSession:"+a.code+
":Received error response to connection create message.",p(a)):this.publish(OT.Raptor.Message.sessions.get(OT.APIKEY,c),function(a){a&&(a.message="GetSessionState:"+a.code+":Received error response to session read");p.apply(null,arguments)})}.bind(this)))}.bind(this))}else OT.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.")};this.disconnect=function(){this.is("disconnected")||(r("disconnecting"),g.disconnect())};this.publish=function(a,c,b){if(g.isNot("connected"))OT.error("OT.Raptor.Socket: cannot publish until the socket is connected."+
a);else{var e=OT.$.uuid(),l={},m;c&&(OT.$.isFunction(c)?(l={},m=c):l=c);!m&&b&&OT.$.isFunction(b)&&(m=b);m&&f.registerCallback(e,m);OT.debug("OT.Raptor.Socket Publish (ID:"+e+") ");OT.debug(a);g.publish([h],a,OT.$.extend(l,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":e,"X-TB-FROM-ADDRESS":g.id}));return e}};this.streamCreate=function(a,b,e,f,g,l,h,m,p,n){var r=OT.$.uuid();a=OT.Raptor.Message.streams.create(OT.APIKEY,c,r,a,b,e,f,g,l,h,m,p);this.publish(a,function(a,c){n(a,r,c)})};this.streamDestroy=
function(a){this.publish(OT.Raptor.Message.streams.destroy(OT.APIKEY,c,a))};this.streamChannelUpdate=function(a,b,e){this.publish(OT.Raptor.Message.streamChannels.update(OT.APIKEY,c,a,b,e))};this.subscriberCreate=function(a,b,e,f){this.publish(OT.Raptor.Message.subscribers.create(OT.APIKEY,c,a,b,g.id,e),f)};this.subscriberDestroy=function(a,b){this.publish(OT.Raptor.Message.subscribers.destroy(OT.APIKEY,c,a,b))};this.subscriberUpdate=function(a,b,e){this.publish(OT.Raptor.Message.subscribers.update(OT.APIKEY,
c,a,b,e))};this.subscriberChannelUpdate=function(a,b,e,f){this.publish(OT.Raptor.Message.subscriberChannels.update(OT.APIKEY,c,a,b,e,f))};this.forceDisconnect=function(a,b){this.publish(OT.Raptor.Message.connections.destroy(OT.APIKEY,c,a),b)};this.forceUnpublish=function(a,b){this.publish(OT.Raptor.Message.streams.destroy(OT.APIKEY,c,a),b)};this.jsepCandidate=function(a,b){this.publish(OT.Raptor.Message.streams.candidate(OT.APIKEY,c,a,b))};this.jsepCandidateP2p=function(a,b,e){this.publish(OT.Raptor.Message.subscribers.candidate(OT.APIKEY,
c,a,b,e))};this.jsepOffer=function(a,b){this.publish(OT.Raptor.Message.streams.offer(OT.APIKEY,c,a,b))};this.jsepOfferP2p=function(a,b,e){this.publish(OT.Raptor.Message.subscribers.offer(OT.APIKEY,c,a,b,e))};this.jsepAnswer=function(a,b){this.publish(OT.Raptor.Message.streams.answer(OT.APIKEY,c,a,b))};this.jsepAnswerP2p=function(a,b,e){this.publish(OT.Raptor.Message.subscribers.answer(OT.APIKEY,c,a,b,e))};this.signal=function(a,b){var e=new OT.Signal(c,g.id,a||{});e.valid?this.publish(e.toRaptorMessage(),
function(a){var c;a&&(c=new n(a.code,a.message));b&&OT.$.isFunction(b)&&b(c,e.toHash())}):b&&OT.$.isFunction(b)&&b(new n(e.error.code,e.error.reason),e.toHash())};OT.$.defineGetters(this,{id:function(){return g&&g.id},sessionId:function(){return c},dispatcher:function(){return f}});null==a&&(a=new OT.Raptor.Dispatcher);f=a}}(this);
!function(){OT.Raptor.Dispatcher=function(){"undefined"!==typeof EventEmitter?EventEmitter.call(this):(OT.$.eventing(this,!0),this.emit=this.trigger);this.callbacks={}};"undefined"!==typeof EventEmitter&&util.inherits(OT.Raptor.Dispatcher,EventEmitter);OT.Raptor.Dispatcher.prototype.registerCallback=function(n,b){this.callbacks[n]=b};OT.Raptor.Dispatcher.prototype.triggerCallback=function(n){if(n){var b=this.callbacks[n];if(b&&OT.$.isFunction(b)){var m=Array.prototype.slice.call(arguments);m.shift();
b.apply(null,m)}delete this.callbacks[n]}};OT.Raptor.Dispatcher.prototype.onClose=function(n){this.emit("close",n)};OT.Raptor.Dispatcher.prototype.dispatch=function(n){if(n.type===OT.Rumor.MessageType.STATUS){OT.debug("OT.Raptor.dispatch: STATUS");OT.debug(n);var b;n.isError&&(b=new OT.Error(n.status));this.triggerCallback(n.transactionId,b,n)}else switch(n=OT.Raptor.unboxFromRumorMessage(n),OT.debug("OT.Raptor.dispatch "+n.signature),OT.debug(n),n.resource){case "session":this.dispatchSession(n);
break;case "connection":this.dispatchConnection(n);break;case "stream":this.dispatchStream(n);break;case "stream_channel":this.dispatchStreamChannel(n);break;case "subscriber":this.dispatchSubscriber(n);break;case "subscriber_channel":this.dispatchSubscriberChannel(n);break;case "signal":this.dispatchSignal(n);break;case "archive":this.dispatchArchive(n);break;default:OT.warn("OT.Raptor.dispatch: Type "+n.resource+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchSession=function(n){switch(n.method){case "read":this.emit("session#read",
n.content,n.transactionId);break;default:OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchConnection=function(n){switch(n.method){case "created":this.emit("connection#created",n.content);break;case "deleted":this.emit("connection#deleted",n.params.connection,n.reason);break;default:OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchStream=function(n){switch(n.method){case "created":this.emit("stream#created",
n.content,n.transactionId);break;case "deleted":this.emit("stream#deleted",n.params.stream,n.reason);break;case "updated":this.emit("stream#updated",n.params.stream,n.content);break;case "generateoffer":case "answer":case "pranswer":case "offer":case "candidate":this.dispatchJsep(n.method,n);break;default:OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchStreamChannel=function(n){switch(n.method){case "updated":this.emit("streamChannel#updated",
n.params.stream,n.params.channel,n.content);break;default:OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchJsep=function(n,b){this.emit("jsep#"+n,b.params.stream,b.fromAddress,b)};OT.Raptor.Dispatcher.prototype.dispatchSubscriberChannel=function(n){switch(n.method){case "updated":this.emit("subscriberChannel#updated",n.params.stream,n.params.channel,n.content);break;case "update":this.emit("subscriberChannel#update",n.params.subscriber,
n.params.stream,n.content);break;default:OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchSubscriber=function(n){switch(n.method){case "created":this.emit("subscriber#created",n.params.stream,n.fromAddress,n.content.id);break;case "deleted":this.dispatchJsep("unsubscribe",n);this.emit("subscriber#deleted",n.params.stream,n.fromAddress);break;case "generateoffer":case "answer":case "pranswer":case "offer":case "candidate":this.dispatchJsep(n.method,
n);break;default:OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented")}};OT.Raptor.Dispatcher.prototype.dispatchSignal=function(n){"signal"!==n.method?OT.warn("OT.Raptor.dispatch: "+n.signature+" is not currently implemented"):this.emit("signal",n.fromAddress,n.content.type,n.content.data)};OT.Raptor.Dispatcher.prototype.dispatchArchive=function(n){switch(n.method){case "created":this.emit("archive#created",n.content);break;case "updated":this.emit("archive#updated",n.params.archive,
n.content)}}}(this);
(function(n){function b(a,c){var b=a.channel.map(function(a){return new OT.StreamChannel(a)});return new OT.Stream(a.id,a.name,a.creationTime,c.connections.get(a.connection.id),c,b)}function m(a,c){if(!c.streams.has(a.id)){var e=b(a,c);c.streams.add(e);return e}}function h(a,c){if(!c.archives.has(a.id)){var b=new OT.Archive(a.id,a.name,a.status);c.archives.add(b);return b}}OT.publishers=new OT.Collection("guid");OT.subscribers=new OT.Collection("widgetId");OT.sessions=new OT.Collection;n.OT.SessionDispatcher=
function(a){var c=new OT.Raptor.Dispatcher;c.on("close",function(c){var b=a.connection;b&&(b.destroyedReason?OT.debug("OT.Raptor.Socket: Socket was closed but the connection had already been destroyed. Reason: "+b.destroyedReason):b.destroy(c))});c.on("session#read",function(b,e){var l={},n;l.streams=[];l.connections=[];l.archives=[];b.connection.forEach(function(c){n=OT.Connection.fromHash(c);l.connections.push(n);a.connections.add(n)});b.stream.forEach(function(c){l.streams.push(m(c,a))});(b.archive||
b.archives).forEach(function(c){l.archives.push(h(c,a))});a._.subscriberMap={};c.triggerCallback(e,null,l)});c.on("connection#created",function(c){c=OT.Connection.fromHash(c);a.connection&&c.id!==a.connection.id&&a.connections.add(c)});c.on("connection#deleted",function(c,b){c=a.connections.get(c);c.destroy(b)});c.on("stream#created",function(b,e){b=m(b,a);b.publisher&&(b.publisher.stream=b);c.triggerCallback(e,null,b)});c.on("stream#deleted",function(c,b){var e=a.streams.get(c);e?e.destroy(b):OT.error("OT.Raptor.dispatch: A stream does not exist with the id of "+
c+", for stream#deleted message!")});c.on("stream#updated",function(c,b){var e=a.streams.get(c);e?e._.update(b):OT.error("OT.Raptor.dispatch: A stream does not exist with the id of "+c+", for stream#updated message!")});c.on("streamChannel#updated",function(c,b,e){var h;c&&(h=a.streams.get(c))?h._.updateChannel(b,e):OT.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for streamChannel message!")});var b=function(a,c,b,e){var h,m;switch(a){case "offer":m=[];(c=
OT.subscribers.find({streamId:c}))&&m.push(c);break;case "answer":case "pranswer":case "generateoffer":case "unsubscribe":console.warn("generateoffer maybe?");m=OT.publishers.where({streamId:c});break;case "candidate":m=OT.publishers.where({streamId:c}).concat(OT.subscribers.where({streamId:c}));break;default:OT.warn("OT.Raptor.dispatch: jsep#"+a+" is not currently implemented");return}if(0!==m.length){h=m[0].session.connections.get(b);if(!h&&b.match(/^symphony\./))h=OT.Connection.fromHash({id:b,
creationTime:Date.now()}),m[0].session.connections.add(h);else if(!h){OT.warn("OT.Raptor.dispatch: Messsage comes from a connection ("+b+") that we do not know about. The message was ignored.");return}m.forEach(function(c){c.processMessage(a,h,e)})}};c.on("jsep#offer",b.bind(null,"offer"));c.on("jsep#answer",b.bind(null,"answer"));c.on("jsep#pranswer",b.bind(null,"pranswer"));c.on("jsep#generateoffer",b.bind(null,"generateoffer"));c.on("jsep#unsubscribe",b.bind(null,"unsubscribe"));c.on("jsep#candidate",
b.bind(null,"candidate"));c.on("subscriberChannel#updated",function(c,b,e){c&&a.streams.has(c)?a.streams.get(c)._.updateChannel(b,e):OT.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!")});c.on("subscriberChannel#update",function(c,b,e){b&&a.streams.has(b)?OT.subscribers.has(c)?OT.subscribers.get(c).disableVideo(e.active):OT.error("OT.Raptor.dispatch: Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!"):
OT.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!")});c.on("subscriber#created",function(c,b,e){(c=c?a.streams.get(c):null)?a._.subscriberMap[b+"_"+c.id]=e:OT.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for subscriber#created message!")});c.on("subscriber#deleted",function(c,b){var e=c?a.streams.get(c):null;e?delete a._.subscriberMap[b+"_"+e.id]:OT.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for subscriber#created message!")});
c.on("signal",function(c,b,e){a._.dispatchSignal(a.connections.get(c),b,e)});c.on("archive#created",function(c){h(c,a)});c.on("archive#updated",function(c,b){var e=a.archives.get(c);e?e._.update(b):OT.error("OT.Raptor.dispatch: An archive does not exist with the id of "+c+", for archive#updated message!")});return c}})(window);
!function(n){var b=new function(){var b=!1,h=!1,a=function(){h&&b&&OT.dispatchEvent(new OT.EnvLoadedEvent(OT.Event.names.ENV_LOADED))},c=function(){h=!0;OT.$.on(n,"unload",function(){OT.publishers.destroy();OT.subscribers.destroy();OT.sessions.destroy()});OT.Config.load(OT.properties.configURL);a()},e=function(){b=!0;OT.Config.off("dynamicConfigChanged",e);OT.Config.off("dynamicConfigLoadFailed",g);a()},g=function(){e()};OT.Config.on("dynamicConfigChanged",e);OT.Config.on("dynamicConfigLoadFailed",
g);"complete"===document.readyState||"interactive"===document.readyState&&document.body?c():document.addEventListener?document.addEventListener("DOMContentLoaded",c,!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()});this.onLoad=function(a){if(h&&b)a();else OT.on(OT.Event.names.ENV_LOADED,a)}};OT.onLoad=function(m,h){if(h)b.onLoad(m.bind(h));else b.onLoad(m)}}(window);
!function(){function n(h,a,c,e){var g=b[c];e=e?OT.$.clone(e):{};OT.error("OT.exception :: title: "+g+" ("+c+") msg: "+a);e.partnerId||(e.partnerId=OT.APIKEY);try{m||(m=new OT.Analytics),m.logError(c,"tb.exception",g,{details:a},e),OT.dispatchEvent(new OT.ExceptionEvent(OT.Event.names.EXCEPTION,a,g,c,h,h))}catch(f){OT.error("OT.exception :: Failed to dispatch exception - "+f.toString())}}OT.Error=function(b,a){this.code=b;this.message=a};var b={1004:"Authentication error",1005:"Invalid Session ID",
1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1500:"Unable to Publish",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",2E3:"Internal Error",2001:"Embed Failed",4E3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected"},m;OT.handleJsException=function(b,a,c){c=c||{};var e,g=c.session;
g?(e={sessionId:g.sessionId},g.connected&&(e.connectionId=g.connection.connectionId),c.target||(c.target=g)):c.sessionId&&(e={sessionId:c.sessionId},c.target||(c.target=null));n(c.target,b,a,e)};OT.exceptionHandler=function(b,a,c,e,g){var f;b&&((f=OT.components[b])||OT.warn("Could not find the component with component ID "+b));n(f,a,e,g)};OT.dispatchError=function(b,a,c,e){OT.error(b,a);c&&OT.$.isFunction(c)&&c.call(null,new OT.Error(b,a));OT.handleJsException(a,b,{session:e})}}(window);
!function(){OT.ConnectionCapabilities=function(n){n.supportsWebRTC=OT.$.castToBoolean(n.supportsWebRTC);this.supportsWebRTC=n.supportsWebRTC}}(window);
!function(){OT.Connection=function(n,b,m,h,a){var c;this.id=this.connectionId=n;this.creationTime=b?Number(b):null;this.data=m;this.capabilities=new OT.ConnectionCapabilities(h);this.permissions=new OT.Capabilities(a);this.quality=null;OT.$.eventing(this);this.destroy=function(a,b){c=a||"clientDisconnected";!0!==b&&this.dispatchEvent(new OT.DestroyedEvent("destroyed",this,c))}.bind(this);Object.defineProperties(this,{destroyed:{get:function(){return void 0!==c},enumerable:!0},destroyedReason:{get:function(){return c},
enumerable:!0}})};OT.Connection.fromHash=function(n){return new OT.Connection(n.id,n.creationTime,n.data,OT.$.extend(n.capablities||{},{supportsWebRTC:!0}),n.permissions||[])}}(window);
!function(){OT.StreamChannel=function(n){this.id=n.id;this.type=n.type;this.active=OT.$.castToBoolean(n.active);this.orientation=n.orientation||OT.VideoOrientation.ROTATED_NORMAL;n.frameRate&&(this.frameRate=parseFloat(n.frameRate,10));this.width=parseInt(n.width,10);this.height=parseInt(n.height,10);OT.$.eventing(this,!0);this.update=function(b){var m={},h={},a;for(a in b){var c=this[a];switch(a){case "active":this.active=OT.$.castToBoolean(b[a]);break;case "frameRate":this.frameRate=parseFloat(b[a],
10);break;case "width":case "height":this[a]=parseInt(b[a],10);m[a]=this[a];h[a]=c;break;case "orientation":this[a]=b[a];m[a]=this[a];h[a]=c;break;default:OT.warn("Tried to update unknown key "+a+" on "+this.type+" channel "+this.id);return}this.trigger("update",this,a,c,this[a])}Object.keys(m).length&&this.trigger("update",this,"videoDimensions",h,m);return!0}}}(window);
!function(){var n=["name","archiving"];OT.Stream=function(b,m,h,a,c,e){var g;this.id=this.streamId=b;this.name=m;this.creationTime=Number(h);this.connection=a;this.channel=e;this.publisherId=(this.publisher=OT.publishers.find({streamId:this.id}))?this.publisher.id:null;OT.$.eventing(this);b=function(a,c,b,e){switch(c){case "active":c="audio"===a.type?"hasAudio":"hasVideo";this[c]=e;break;case "orientation":case "width":case "height":this.videoDimensions={width:a.width,height:a.height,orientation:a.orientation};
return}this.dispatchEvent(new OT.StreamUpdatedEvent(this,c,b,e))}.bind(this);var f=function(){return this.publisher?this.publisher:OT.subscribers.find(function(a){return a.streamId===this.id&&a.session.id===c.id})}.bind(this);this.getChannelsOfType=function(a){return this.channel.filter(function(c){return c.type===a})};this.getChannel=function(a){for(var c=0;c<this.channel.length;++c)if(this.channel[c].id===a)return this.channel[c];return null};m=this.getChannelsOfType("audio")[0];h=this.getChannelsOfType("video")[0];
this.hasAudio=null!=m&&m.active;this.hasVideo=null!=h&&h.active;this.videoDimensions={};h&&(this.videoDimensions.width=h.width,this.videoDimensions.height=h.height,this.videoDimensions.orientation=h.orientation,h.on("update",b));if(m)m.on("update",b);this.setChannelActiveState=function(a,c,b){c={active:c};b&&(c.activeReason=b);l(a,c)};this.setRestrictFrameRate=function(a){l("video",{restrictFrameRate:a})};var l=function(a,b){var e;if(this.publisher)e=function(a){c._.streamChannelUpdate(this,a,b)};
else{var f=OT.subscribers.find(function(a){return a.streamId===this.id&&a.session.id===c.id},this);e=function(a){c._.subscriberChannelUpdate(this,f,a,b)}}this.getChannelsOfType(a).forEach(e.bind(this))}.bind(this);this.destroy=function(a,c){g=a||"clientDisconnected";!0!==c&&this.dispatchEvent(new OT.DestroyedEvent("destroyed",this,g))};Object.defineProperties(this,{destroyed:{get:function(){return void 0!==g},enumerable:!0},destroyedReason:{get:function(){return g},enumerable:!0},frameRate:{get:function(){return this.getChannelsOfType("video")[0].frameRate},
enumerable:!0}});this._={};this._.updateProperty=function(a,c){if(-1===n.indexOf(a))OT.warn('Unknown stream property "'+a+'" was modified to "'+c+'".');else{var b=this[a];switch(a){case "name":this[a]=c;break;case "archiving":var e=f();e&&e._.archivingStatus(c);this[a]=c}b=new OT.StreamUpdatedEvent(this,a,b,c);this.dispatchEvent(b)}}.bind(this);this._.update=function(a){for(var c in a)this._.updateProperty(c,a[c])}.bind(this);this._.updateChannel=function(a,c){this.getChannel(a).update(c)}.bind(this)}}(window);
!function(){OT.Archive=function(n,b,m){this.id=n;this.name=b;this.status=m;this._={};OT.$.eventing(this);this._.update=function(b){for(var a in b){var c=this[a];this[a]=b[a];c=new OT.ArchiveUpdatedEvent(this,a,c,this[a]);this.dispatchEvent(c)}}.bind(this);this.destroy=function(){}}}(window);
!function(n){var b=n.mozRTCSessionDescription||n.RTCSessionDescription,m=n.mozRTCIceCandidate||n.RTCIceCandidate,h=function(a){return function(c){c.candidate?a(OT.Raptor.Actions.CANDIDATE,c.candidate):OT.debug("IceCandidateForwarder: No more ICE candidates.")}},a=function(){var a=[],c=null;Object.defineProperty(this,"peerConnection",{set:function(a){c=a}});this.process=function(b){b=new m(b.content);c?c.addIceCandidate(b):a.push(b)};this.processPending=function(){for(;a.length;)c.addIceCandidate(a.shift())}},
c=function(a){var c=/a=rtpmap:(\d+) CN\/\d+/i,b=[],e,g;a=a.split("\r\n").filter(function(a,f){-1!==a.indexOf("m=audio")&&(e=f);g=a.match(c);return null!==g?(b.push(g[1]),!1):!0});b.length&&e&&(a[e]=a[e].replace(RegExp(b.join("|"),"ig"),"").replace(/\s+/g," "));return a.join("\r\n")},e=function(a,b,e,g){var h,m;h=function(a,c){return function(b){OT.error(a);OT.error(b);g&&g(a,b,c)}};m=function(b){b.sdp=c(b.sdp);a.setLocalDescription(b,function(){e(b)},h("Error while setting LocalDescription","SetLocalDescription"))};
-1===b.sdp.indexOf("a=crypto")&&(b.sdp=b.sdp.replace(/^c=IN(.*)$/gmi,"c=IN$1\r\na=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:FakeFakeFakeFakeFakeFakeFakeFakeFakeFake\\r\\n"));-1===b.sdp.indexOf("a=rtcp-fb")&&(b.sdp=b.sdp.replace(/^m=video(.*)$/gmi,"m=video$1\r\na=rtcp-fb:* ccm fir\r\na=rtcp-fb:* nack "));a.setRemoteDescription(b,function(){a.createAnswer(m,h("Error while setting createAnswer","CreateAnswer"),null,!1)},h("Error while setting RemoteDescription","SetRemoteDescription"))},g=function(a,b,
e){var g,h;g={mandatory:{},optional:[]};h=function(a,c){return function(b){OT.error(a);OT.error(b);e&&e(a,b,c)}};navigator.mozGetUserMedia&&(g.mandatory.MozDontOfferDataChannel=!0);a.createOffer(function(e){e.sdp=c(e.sdp);a.setLocalDescription(e,function(){b(e)},h("Error while setting LocalDescription","SetLocalDescription"))},h("Error while creating Offer","CreateOffer"),g)};OT.PeerConnection=function(c){var l,m=new a,p,u,s="new",t=[],v,z=OT.$.now();OT.$.eventing(this);c.iceServers||(c.iceServers=
[]);var D=function(a,c){if(t.length)t[0](a,c)}.bind(this),x=function(){if(!l){try{OT.debug('Creating peer connection config "'+JSON.stringify(c)+'".'),c.iceServers&&0!==c.iceServers.length||OT.error("No ice servers present"),l=OT.$.createPeerConnection(c,{optional:[{DtlsSrtpKeyAgreement:!0}]})}catch(a){return P("Failed to create PeerConnection, exception: "+a.message,"NewPeerConnection"),null}l.onicecandidate=h(D);l.onaddstream=J.bind(this);l.onremovestream=A.bind(this);void 0!==l.onsignalingstatechange?
l.onsignalingstatechange=C.bind(this):void 0!==l.onstatechange&&(l.onstatechange=C.bind(this));void 0!==l.oniceconnectionstatechange&&(l.oniceconnectionstatechange=function(a){"failed"===a.target.iceConnectionState&&setTimeout(function(){"failed"===a.target.iceConnectionState&&P("The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.","ICEWorkflow")},5E3)})}return l}.bind(this),w=function(){m&&(m.peerConnection=null);null!==l&&(l=null,this.trigger("close"))},
C=function(a){a="string"===typeof a?a:a.target&&a.target.signalingState?a.target.signalingState:a.target.readyState;OT.debug("PeerConnection.stateChange: "+a);if(a&&a.toLowerCase()!==s)switch(s=a.toLowerCase(),OT.debug("PeerConnection.stateChange: "+s),s){case "closed":w.call(this)}},J=function(a){this.trigger("streamAdded",a.stream)},A=function(a){this.trigger("streamRemoved",a.stream)},K=function(a){a=new b({type:"offer",sdp:a.content.sdp});x();e(l,a,function(a){m.peerConnection=l;m.processPending();
D(OT.Raptor.Actions.ANSWER,a)},function(a,c,b){P("PeerConnection.offerProcessor "+a+": "+c,b)})},T=function(a){a.content.sdp?(u=new b({type:"answer",sdp:a.content.sdp}),l.setRemoteDescription(u,function(){OT.debug("setRemoteDescription Success")},function(a){P("Error while setting RemoteDescription "+a,"SetRemoteDescription")}),m.peerConnection=l,m.processPending()):OT.error("PeerConnection.processMessage: Weird answer message, no SDP.")},y=function(){OT.debug("PeerConnection.processSubscribe: Sending offer to subscriber.");
x();g(l,function(a){p=a;D(OT.Raptor.Actions.OFFER,p)},function(a,c,b){P("PeerConnection.suscribeProcessor "+a+": "+c,b)})},P=function(a,c){OT.error(a);this.trigger("error",a,c)}.bind(this);this.addLocalStream=function(a){x();l.addStream(a)};this.disconnect=function(){m=null;if(l){var a=l.signalingState||l.readyState;a&&"closed"!==a.toLowerCase()&&l.close();w.call(this)}this.off()};this.processMessage=function(a,c){OT.debug("PeerConnection.processMessage: Received "+a+" from "+c.fromAddress);OT.debug(c);
switch(a){case "generateoffer":y.call(this,c);break;case "offer":K.call(this,c);break;case "answer":case "pranswer":T.call(this,c);break;case "candidate":m.process(c);break;default:OT.debug("PeerConnection.processMessage: Received an unexpected message of type "+a+" from "+c.fromAddress+": "+JSON.stringify(c))}return this};this.setIceServers=function(a){a&&(c.iceServers=a)};this.registerMessageDelegate=function(a){return t.push(a)};this.unregisterMessageDelegate=function(a){a=t.indexOf(a);-1!==a&&
t.splice(a,1);return t.length};this.getStats=function(a,c){var b={},e,f,g,h,m,p,s;!0===v?OT.warn("PeerConnection.getStats: Already getting the stats!"):(v=!0,e=OT.$.now(),f=(e-a.timeStamp)/1E3,a.timeStamp=e,g=function(c){var b=a.videoBytesTransferred||0;return c.bytesSent||c.bytesReceived?(a.videoBytesTransferred=c.bytesSent||c.bytesReceived,Math.round(8*(a.videoBytesTransferred-b)/f)):c.stat("googFrameHeightSent")?(a.videoBytesTransferred=c.stat("bytesSent"),Math.round(8*(a.videoBytesTransferred-
b)/f)):c.stat("googFrameHeightReceived")?(a.videoBytesTransferred=c.stat("bytesReceived"),Math.round(8*(a.videoBytesTransferred-b)/f)):NaN},h=function(c){var b=a.audioBytesTransferred||0;return c.bytesSent||c.bytesReceived?(a.audioBytesTransferred=c.bytesSent||c.bytesReceived,Math.round(8*(a.audioBytesTransferred-b)/f)):c.stat("audioInputLevel")?(a.audioBytesTransferred=c.stat("bytesSent"),Math.round(8*(a.audioBytesTransferred-b)/f)):c.stat("audioOutputLevel")?(a.audioBytesTransferred=c.stat("bytesReceived"),
Math.round(8*(a.audioBytesTransferred-b)/f)):NaN},m=function(a){return a.stat("googFrameRateSent")?a.stat("googFrameRateSent"):a.stat("googFrameRateReceived")?a.stat("googFrameRateReceived"):null},p=function(a){if(a.result){a=a.result();for(var e=0;e<a.length;e++){var f=a[e];if(f.stat){"true"===f.stat("googActiveConnection")&&(b.localCandidateType=f.stat("googLocalCandidateType"),b.remoteCandidateType=f.stat("googRemoteCandidateType"),b.transportType=f.stat("googTransportType"));var l=g(f);isNaN(l)||
(b.avgVideoBitrate=l);l=h(f);isNaN(l)||(b.avgAudioBitrate=l);f=m(f);null!=f&&(b.frameRate=f)}}}v=!1;c(b)},b.duration=Math.round(e-z),e=function(a){for(var e in a)if(a.hasOwnProperty(e)&&("outboundrtp"===a[e].type||"inboundrtp"===a[e].type)){var f=a[e];-1!==f.id.indexOf("video")?(f=g(f),isNaN(f)||(b.avgVideoBitrate=f)):-1!==f.id.indexOf("audio")&&(f=h(f),isNaN(f)||(b.avgAudioBitrate=f))}v=!1;c(b)},s=function(){var a=n.navigator.userAgent.toLowerCase().match(/Firefox\/([0-9\.]+)/i),c=null!==a&&27<=
parseFloat(a[1],10);s=function(){return c};return c},l&&l.getStats?s()?l.getStats(null,e,function(a){OT.warn("Error collecting stats",a);v=!1}):l.getStats(p):(v=!1,c(b)))};Object.defineProperty(this,"remoteStreams",{get:function(){var a;if(l){if(l.getRemoteStreams)a=l.getRemoteStreams();else if(l.remoteStreams)a=l.remoteStreams;else throw Error("Invalid Peer Connection object implements no method for retrieving remote streams");a=Array.prototype.slice.call(a)}else a=[];return a}})}}(window);
!function(){var n={};OT.PeerConnections={add:function(b,m,h){b=b.id+"_"+m;(m=n[b])||(m=n[b]={count:0,pc:new OT.PeerConnection(h)});m.count+=1;return m.pc},remove:function(b,m){var h=b.id+"_"+m,a=n[h];a&&(a.count-=1,0===a.count&&(a.pc.disconnect(),delete n[h]))}}}(window);
!function(){OT.PublisherPeerConnection=function(n,b,m,h){var a,c=!1,e=b._.subscriberMap[n.id+"_"+m],g,f,l;g=function(){this.destroy();this.trigger("disconnected",this)};f=function(a,c){this.trigger("error",null,a,this,c);this.destroy()};l=function(a,f){c||a!==OT.Raptor.Actions.CANDIDATE&&a!==OT.Raptor.Actions.OFFER&&a!==OT.Raptor.Actions.ANSWER&&a!==OT.Raptor.Actions.PRANSWER||(c=-1!==(a===OT.Raptor.Actions.CANDIDATE?f.candidate:f.sdp).indexOf("typ relay"));switch(a){case OT.Raptor.Actions.ANSWER:case OT.Raptor.Actions.PRANSWER:b.sessionInfo.p2pEnabled?
b._.jsepAnswerP2p(m,e,f.sdp):b._.jsepAnswer(m,f.sdp);break;case OT.Raptor.Actions.OFFER:this.trigger("connected");b.sessionInfo.p2pEnabled?b._.jsepOfferP2p(m,e,f.sdp):b._.jsepOffer(m,f.sdp);break;case OT.Raptor.Actions.CANDIDATE:b.sessionInfo.p2pEnabled?b._.jsepCandidateP2p(m,e,f):b._.jsepCandidate(m,f)}}.bind(this);OT.$.eventing(this);this.destroy=function(){a&&OT.PeerConnections.remove(n,m);a.off();a=null};this.processMessage=function(c,b){a.processMessage(c,b)};this.getStats=function(c,b){a.getStats(c,
b)};this.init=function(b){a=OT.PeerConnections.add(n,m,{iceServers:b});a.on({close:g,error:f},this);a.registerMessageDelegate(l);a.addLocalStream(h);Object.defineProperty(this,"remoteConnection",{value:n});Object.defineProperty(this,"hasRelayCandidates",{get:function(){return c}})}}}(window);
!function(){OT.SubscriberPeerConnection=function(n,b,m,h,a){var c,e=!1,g,f,l,r,p,u;g=function(){this.destroy();this.trigger("disconnected",this)};f=function(a){this.trigger("remoteStreamAdded",a,this)};l=function(a){this.trigger("remoteStreamRemoved",a,this)};r=function(a,c){this.trigger("error",null,a,this,c)};p=function(a,c){e||a!==OT.Raptor.Actions.CANDIDATE&&a!==OT.Raptor.Actions.OFFER&&a!==OT.Raptor.Actions.ANSWER&&a!==OT.Raptor.Actions.PRANSWER||(e=-1!==(a===OT.Raptor.Actions.CANDIDATE?c.candidate:
c.sdp).indexOf("typ relay"));switch(a){case OT.Raptor.Actions.ANSWER:case OT.Raptor.Actions.PRANSWER:this.trigger("connected");b._.jsepAnswerP2p(m.id,h.widgetId,c.sdp);break;case OT.Raptor.Actions.OFFER:b._.jsepOfferP2p(m.id,h.widgetId,c.sdp);break;case OT.Raptor.Actions.CANDIDATE:b._.jsepCandidateP2p(m.id,h.widgetId,c)}}.bind(this);u=function(a){var b="get"+(a?"Video":"Audio")+"Tracks";return function(a){var e=c.remoteStreams,f;if(0!==e.length&&e[0][b])for(var g=0,l=e.length;g<l;++g){f=e[g];f=f[b]();
for(var h=0,m=f.length;h<m;++h)f[h].enabled!==a&&(f[h].enabled=a)}}};OT.$.eventing(this);this.destroy=function(){c&&(0===c.unregisterMessageDelegate(p)&&(b&&b.connected&&m&&!m.destroyed&&b._.subscriberDestroy(m,h),this.subscribeToAudio(!1)),OT.PeerConnections.remove(n,m.streamId));c=null;this.off()};this.processMessage=function(a,b){c.processMessage(a,b)};this.getStats=function(a,b){c.getStats(a,b)};this.subscribeToAudio=u(!1);this.subscribeToVideo=u(!0);Object.defineProperty(this,"hasRelayCandidates",
{get:function(){return e}});this.init=function(){c=OT.PeerConnections.add(n,m.streamId,{});c.on({close:g,streamAdded:f,streamRemoved:l,error:r},this);var e=c.registerMessageDelegate(p);if(0<c.remoteStreams.length)c.remoteStreams.forEach(f,this);else if(1===e){var t;if(a.subscribeToVideo||a.subscribeToAudio)e=m.getChannelsOfType("audio"),t=m.getChannelsOfType("video"),t=e.map(function(c){return{id:c.id,type:c.type,active:a.subscribeToAudio}}).concat(t.map(function(c){return{id:c.id,type:c.type,active:a.subscribeToVideo,
restrictFrameRate:void 0!==a.restrictFrameRate?a.restrictFrameRate:!1}}));b._.subscriberCreate(m,h,t,function(a,b){a&&this.trigger("error",null,a.message,this,"Subscribe");c.setIceServers(OT.Raptor.parseIceServers(b))}.bind(this))}}}}(window);
!function(){OT.Chrome=function(n){var b={},m=function(h,a){a.parent=this;a.appendTo(n.parent);b[h]=a;Object.defineProperty(this,h,{get:function(){return b[h]}})};n.parent&&(OT.$.eventing(this),this.destroy=function(){this.off();this.hide();for(var h in b)b[h].destroy()},this.show=function(){for(var h in b)b[h].show()},this.hide=function(){for(var h in b)b[h].hide()},this.set=function(b,a){if("string"===typeof b&&a)m.call(this,b,a);else for(var c in b)b.hasOwnProperty(c)&&m.call(this,c,b[c]);return this})}}(window);
!function(){OT.Chrome.Behaviour||(OT.Chrome.Behaviour={});OT.Chrome.Behaviour.Widget=function(n,b){var m=b||{},h,a;n.setDisplayMode=function(c){c=c||"auto";h!==c&&(OT.$.removeClass(this.domElement,"OT_mode-"+h),OT.$.addClass(this.domElement,"OT_mode-"+c),a=h,h=c)};n.show=function(){this.setDisplayMode(a);if(m.onShow)m.onShow();return this};n.hide=function(){this.setDisplayMode("off");if(m.onHide)m.onHide();return this};n.destroy=function(){if(m.onDestroy)m.onDestroy(this.domElement);this.domElement&&
OT.$.removeElement(this.domElement);return n};n.appendTo=function(a){this.domElement=OT.$.createElement(m.nodeName||"div",m.htmlAttributes,m.htmlContent);if(m.onCreate)m.onCreate(this.domElement);"auto"!==m.mode?n.setDisplayMode(m.mode):(n.setDisplayMode("on"),setTimeout(function(){n.setDisplayMode(m.mode)},2E3));a.appendChild(this.domElement);return n}}}(window);
!function(){OT.Chrome.BackingBar=function(n){function b(){return"on"===m||"on"===h?"on":"mini"===m||"mini"===h?"mini":"mini-auto"===m||"mini-auto"===h?"mini-auto":"auto"===m||"auto"===h?"auto":"off"}var m=n.nameMode,h=n.muteMode,a;Object.defineProperty(this,"domElement",{get:function(){return a},set:function(c){a=c}});OT.Chrome.Behaviour.Widget(this,{mode:b(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}});this.setNameMode=function(a){m=a;this.setDisplayMode(b())};
this.setMuteMode=function(a){h=a;this.setDisplayMode(b())}}}(window);
!function(){OT.Chrome.NamePanel=function(n){var b=n.name,m=n.bugMode,h;b&&""!==b.trim().length||(b=null,n.mode="off");Object.defineProperty(this,"domElement",{get:function(){return h},set:function(a){h=a}});Object.defineProperty(this,"name",{set:function(a){b||this.setDisplayMode("auto");b=a;h.innerHTML=b}.bind(this)});this.setBugMode=function(a){m=a;"off"===a?OT.$.addClass(h,"OT_name-no-bug"):OT.$.removeClass(h,"OT_name-no-bug")};OT.Chrome.Behaviour.Widget(this,{mode:n.mode,nodeName:"h1",htmlContent:b,
htmlAttributes:{className:"OT_name OT_edge-bar-item"},onCreate:function(){this.setBugMode(m)}.bind(this)})}}(window);
!function(){OT.Chrome.MuteButton=function(n){var b,m=n.muted||!1,h,a,c;Object.defineProperty(this,"domElement",{get:function(){return h},set:function(a){h=a}});a=function(){m?OT.$.addClass(h,"OT_active"):OT.$.removeClass(h,"OT_active ")};c=function(){m=!m;a();m?this.parent.trigger("muted",this):this.parent.trigger("unmuted",this);return!1};Object.defineProperty(this,"muted",{get:function(){return m},set:function(c){m=c;a()}});OT.Chrome.Behaviour.Widget(this,{mode:n.mode,nodeName:"button",htmlContent:"Mute",
htmlAttributes:{className:m?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute"},onCreate:function(a){b=c.bind(this);a.addEventListener("click",b,!1)}.bind(this),onDestroy:function(a){b=null;a.removeEventListener("click",b,!1)}.bind(this)})}}(window);!function(){OT.Chrome.OpenTokButton=function(n){var b;Object.defineProperty(this,"domElement",{get:function(){return b},set:function(m){b=m}});OT.Chrome.Behaviour.Widget(this,{mode:n?n.mode:null,nodeName:"span",htmlContent:"OpenTok",htmlAttributes:{className:"OT_opentok OT_edge-bar-item"}})}}(window);
!function(){OT.Chrome.Archiving=function(n){var b=n.archiving,m=n.archivingStarted||"Archiving on",h=n.archivingEnded||"Archiving off",a=!0,c,e,g,f,l,r,p;Object.defineProperty(this,"domElement",{get:function(){return f},set:function(a){f=a}});r=function(a){g.innerText=a;c.setAttribute("title",a)};p=function(){l&&(clearTimeout(l),l=null);b?OT.$.addClass(e,"OT_active"):OT.$.removeClass(e,"OT_active");OT.$.removeClass(f,"OT_archiving-"+(b?"off":"on"));OT.$.addClass(f,"OT_archiving-"+(b?"on":"off"));
n.show&&b?(r(m),OT.$.addClass(g,"OT_mode-on"),OT.$.removeClass(g,"OT_mode-auto"),this.setDisplayMode("on"),l=setTimeout(function(){OT.$.addClass(g,"OT_mode-auto");OT.$.removeClass(g,"OT_mode-on")}.bind(this),5E3)):n.show&&!a?(OT.$.addClass(g,"OT_mode-on"),OT.$.removeClass(g,"OT_mode-auto"),this.setDisplayMode("on"),r(h),l=setTimeout(function(){this.setDisplayMode("off")}.bind(this),5E3)):this.setDisplayMode("off")}.bind(this);OT.Chrome.Behaviour.Widget(this,{mode:b&&n.show&&"on"||"off",nodeName:"h1",
htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate:function(){c=OT.$.createElement("div",{className:"OT_archiving-light-box"},"");e=OT.$.createElement("div",{className:"OT_archiving-light"},"");c.appendChild(e);g=OT.$.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},"");f.appendChild(c);f.appendChild(g);p()}});this.setShowArchiveStatus=function(a){n.show=a;f&&p.call(this)};this.setArchiving=function(c){b=c;a=!1;f&&p.call(this)}}}(window);
(function(){OT.StylableComponent=function(b,m){if(!b.trigger)throw Error("OT.StylableComponent is dependent on the mixin OT.$.eventing. Ensure that this is included in the object before StylableComponent.");var h=new n(m,function(a,c,e){e?b.trigger("styleValueChanged",a,c,e):b.trigger("styleValueChanged",a,c)});b.getStyle=function(a){return h.get(a)};b.setStyle=function(a,c,b){"string"!==typeof a?h.setAll(a,b):h.set(a,c);return this}};var n=function(b,m){var h={},a,c,e,g;a="showMicButton showSpeakerButton nameDisplayMode buttonDisplayMode backgroundImageURI bugDisplayMode".split(" ");
c={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],bugDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1]};e=function(a,b){return"backgroundImageURI"===a||c.hasOwnProperty(a)&&-1!==c[a].indexOf(b)};g=function(a){switch(a){case "true":return!0;case "false":return!1;default:return a}};this.getAll=function(){var c=OT.$.clone(h),b;for(b in c)0>a.indexOf(b)&&
delete c[b];return c};this.get=function(a){return a?h[a]:this.getAll()};this.setAll=function(a,c){var b,p,n;for(n in a)p=g(a[n]),e(n,p)?(b=h[n],p!==b&&(h[n]=p,c||m(n,p,b))):OT.warn("Style.setAll::Invalid style property passed "+n+" : "+p);return this};this.set=function(a,c){OT.debug("Publisher.setStyle: "+a.toString());var b=g(c),n;if(!e(a,b))return OT.warn("Style.set::Invalid style property passed "+a+" : "+b),this;n=h[a];b!==n&&(h[a]=b,m(a,c,n));return this};b&&this.setAll(b,!0)}})(window);
!function(){OT.Microphone=function(n,b){var m,h=50;Object.defineProperty(this,"muted",{get:function(){return m},set:function(a){if(m!==a){m=a;a=n.getAudioTracks();for(var c=0,b=a.length;c<b;++c)a[c].enabled=!m}}});Object.defineProperty(this,"gain",{get:function(){return h},set:function(a){OT.warn("OT.Microphone.gain IS NOT YET IMPLEMENTED");h=a}});void 0!==b?this.muted=!0===b:n.getAudioTracks().length?this.muted=!n.getAudioTracks()[0].enabled:this.muted=!1}}(window);
!function(){OT.generateSimpleStateMachine=function(n,b,m){var h=b.slice(),a=OT.$.clone(m);return function(c){function b(a,e){c({message:a,newState:e,currentState:g,previousState:f})}var g=n,f=null;this.set=function(c){var m;-1!==h.indexOf(c)?a[g]&&-1!==a[g].indexOf(c)?m=!0:(b("'"+g+"' cannot transition to '"+c+"'",c),m=!1):(b("'"+c+"' is not a valid state",c),m=!1);m&&(f=g,g=c)};Object.defineProperties(this,{current:{get:function(){return g}},subscribing:{get:function(){return"Subscribing"===g}}})}}}(window);
!function(){OT.SubscribingState=OT.generateSimpleStateMachine("NotSubscribing","NotSubscribing Init ConnectingToPeer BindingRemoteStream Subscribing Failed".split(" "),{NotSubscribing:["NotSubscribing","Init"],Init:["NotSubscribing","ConnectingToPeer","BindingRemoteStream"],ConnectingToPeer:["NotSubscribing","BindingRemoteStream","Failed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed"],Subscribing:["NotSubscribing","Failed"],Failed:[]});Object.defineProperty(OT.SubscribingState.prototype,
"attemptingToSubscribe",{get:function(){return-1!==["Init","ConnectingToPeer","BindingRemoteStream"].indexOf(this.current)}})}(window);
!function(){OT.PublishingState=OT.generateSimpleStateMachine("NotPublishing","NotPublishing GetUserMedia BindingMedia MediaBound PublishingToSession Publishing Failed".split(" "),{NotPublishing:["NotPublishing","GetUserMedia"],GetUserMedia:["BindingMedia","Failed","NotPublishing"],BindingMedia:["MediaBound","Failed","NotPublishing"],MediaBound:["NotPublishing","PublishingToSession","Failed"],PublishingToSession:["NotPublishing","Publishing","Failed"],Publishing:["NotPublishing","MediaBound","Failed"],
Failed:[]});Object.defineProperties(OT.PublishingState.prototype,{attemptingToPublish:{get:function(){return-1!==["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)}},publishing:{get:function(){return"Publishing"===this.current}}})}(window);
!function(){var n={audio:!0,video:!0};OT.Publisher=function(){if(OT.checkSystemRequirements()){var b=OT.Publisher.nextId(),m,h,a,c,e,g,f,l={},r=!1,p,u,s,t,v=new OT.Analytics,z,D=[1,7,15,30],x={},w,C,J;z={"320x240":{width:320,height:240},"640x480":{width:640,height:480},"1280x720":{width:1280,height:720}};w={timeStamp:OT.$.now()};OT.$.eventing(this);OT.StylableComponent(this,{showMicButton:!0,showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",bugDisplayMode:"auto",backgroundImageURI:null});
var A=function(a,e,g,l){v.logEvent({action:a,variation:e,payload_type:g,payload:l,session_id:f?f.sessionId:null,connection_id:f&&f.connected?f.connection.connectionId:null,partner_id:f?f.apiKey:OT.APIKEY,streamId:c?c.id:null,widget_id:b,widget_type:"Publisher"})},K=function(a){var e={widget_type:"Publisher",stream_type:"WebRTC",sessionId:f?f.sessionId:null,connectionId:f&&f.connected?f.connection.connectionId:null,partnerId:f?f.apiKey:OT.APIKEY,streamId:c?c.id:null,widgetId:b,version:OT.properties.version,
media_server_name:f?f.sessionInfo.messagingServer:null,p2pFlag:f?f.sessionInfo.p2pEnabled:!1,duration:u?(new Date).getTime()-u.getTime():0,remote_connection_id:a};l[a].getStats(w,function(a){var c;if(a)for(c in a)e[c]=a[c];v.logQOS(e)})},T=function(){OT.debug("OT.Publisher.onLoaded");C.set("MediaBound");h.loading=!1;r=!0;"off"===this.getStyle("bugDisplayMode")&&A("bugDisplayMode","createChrome","mode","off");this.getStyle("showArchiveStatus")||A("showArchiveStatus","createChrome","mode","off");t=
(new OT.Chrome({parent:h.domElement})).set({backingBar:new OT.Chrome.BackingBar({nameMode:this.getStyle("nameDisplayMode"),muteMode:O.call(this,this.getStyle("showMicButton"))}),name:new OT.Chrome.NamePanel({name:p.name,mode:this.getStyle("nameDisplayMode"),bugMode:this.getStyle("bugDisplayMode")}),muteButton:new OT.Chrome.MuteButton({muted:!1===p.publishAudio,mode:O.call(this,this.getStyle("showMicButton"))}),opentokButton:new OT.Chrome.OpenTokButton({mode:this.getStyle("bugDisplayMode")}),archive:new OT.Chrome.Archiving({show:this.getStyle("showArchiveStatus"),
archiving:!1})}).on({muted:this.publishAudio.bind(this,!1),unmuted:this.publishAudio.bind(this,!0)});this.trigger("initSuccess");this.trigger("loaded",this)},y=function(a){A("publish","Failure","reason","Publisher PeerConnection Error: "+a);C.set("Failed");this.trigger("publishComplete",new OT.Error(OT.ExceptionCodes.P2P_CONNECTION_FAILED,"Publisher PeerConnection Error: "+a));OT.handleJsException("Publisher PeerConnection Error: "+a,OT.ExceptionCodes.P2P_CONNECTION_FAILED,{session:f,target:this})},
P=function(c){OT.debug("OT.Publisher.onStreamAvailable");C.set("BindingMedia");g&&(g.stop(),g=null);g=c;s=new OT.Microphone(g,!p.publishAudio);this.publishVideo(p.publishVideo&&0<g.getVideoTracks().length);this.dispatchEvent(new OT.Event(OT.Event.names.ACCESS_ALLOWED,!1));a=new OT.VideoElement({attributes:{muted:!0}});a.on({streamBound:T,loadError:y,error:U},this).bindToStream(g);h.video=a},F=function(a){OT.error("OT.Publisher.onStreamAvailableError "+a.name+": "+a.message);C.set("Failed");this.trigger("publishComplete",
new OT.Error(OT.ExceptionCodes.UNABLE_TO_PUBLISH,a.message));h&&h.destroy();A("publish","Failure","reason","GetUserMedia:Publisher failed to access camera/mic: "+a.message);OT.handleJsException("Publisher failed to access camera/mic: "+a.message,OT.ExceptionCodes.UNABLE_TO_PUBLISH,{session:f,target:this})},Q=function(a){OT.error("OT.Publisher.onStreamAvailableError Permission Denied");C.set("Failed");this.trigger("publishComplete",new OT.Error(OT.ExceptionCodes.UNABLE_TO_PUBLISH,"Publisher Access Denied: Permission Denied"+
(a.message?": "+a.message:"")));A("publish","Failure","reason","GetUserMedia:Publisher Access Denied: Permission Denied");var c=OT.$.browserVersion(),b=new OT.Event(OT.Event.names.ACCESS_DENIED);this.dispatchEvent(b,function(){b.isDefaultPrevented()||("Chrome"===c.browser?(h&&h.addError("",null,"OT_publisher-denied-chrome"),E?OT.Dialogs.AllowDeny.Chrome.deniedNow():OT.Dialogs.AllowDeny.Chrome.previouslyDenied(window.location.hostname)):"Firefox"===c.browser&&(h&&h.addError("","Click the reload button in the URL bar to change camera & mic settings.",
"OT_publisher-denied-firefox"),OT.Dialogs.AllowDeny.Firefox.denied().on({refresh:function(){window.location.reload()}})))})},M,R,E=!1,Y=function(){E=!0;A("accessDialog","Opened","","");var a=OT.$.browserVersion();this.dispatchEvent(new OT.Event(OT.Event.names.ACCESS_DIALOG_OPENED,!0),function(c){c.isDefaultPrevented()||("Chrome"===a.browser?M=OT.Dialogs.AllowDeny.Chrome.initialPrompt():"Firefox"===a.browser&&(R=setTimeout(function(){M=OT.Dialogs.AllowDeny.Firefox.maybeDenied()},7E3)))})},N=function(){A("accessDialog",
"Closed","","");R&&(clearTimeout(R),R=null);M&&(M.close(),M=null);this.dispatchEvent(new OT.Event(OT.Event.names.ACCESS_DIALOG_CLOSED,!1))},U=function(a,c){OT.error("OT.Publisher.onVideoError");var b=c+(a?" ("+a+")":"");A("stream",null,"reason","Publisher while playing stream: "+b);C.set("Failed");C.attemptingToPublish?this.trigger("publishComplete",new OT.Error(OT.ExceptionCodes.UNABLE_TO_PUBLISH,b)):this.trigger("error",b);OT.handleJsException("Publisher error playing stream: "+b,OT.ExceptionCodes.UNABLE_TO_PUBLISH,
{session:f,target:this})},Z=function(a){OT.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection");this.cleanupSubscriber(a.remoteConnection.id)},fa=function(a,c,b,e){A("publish","Failure","reason|hasRelayCandidates",(e?e:"")+[":Publisher PeerConnection with connection "+(b&&b.remoteConnection&&b.remoteConnection.id)+" failed: "+c,b.hasRelayCandidates].join("|"));OT.handleJsException("Publisher PeerConnection Error: "+c,OT.ExceptionCodes.UNABLE_TO_PUBLISH,{session:f,target:this});
clearInterval(x[b.remoteConnection.id]);delete x[b.remoteConnection.id];delete l[b.remoteConnection.id]},L=function(a){c=a;c.on("destroyed",this.disconnect,this);C.set("Publishing");u=new Date;this.trigger("publishComplete",null,this);this.dispatchEvent(new OT.StreamEvent("streamCreated",a,null,!1));A("publish","Success","streamType:streamId","WebRTC:"+e)}.bind(this),S=function(a){var c=l[a.id];if(!c){var b=OT.$.now();A("createPeerConnection","Attempt","","");a.on("destroyed",this.cleanupSubscriber.bind(this,
a.id));c=l[a.id]=new OT.PublisherPeerConnection(a,f,e,g);c.on({connected:function(){A("createPeerConnection","Success","pcc|hasRelayCandidates",[parseInt(OT.$.now()-b,10),c.hasRelayCandidates].join("|"));x[a.id]=setInterval(function(){K(a.id)},3E4)},disconnected:Z,error:fa},this);c.init(J)}return c},O=function(a){if(!1===a)return"off";a=this.getStyle("buttonDisplayMode");return!1===a?"on":a},X=function(){t&&(t.destroy(),t=null);this.disconnect();s=null;a&&(a.destroy(),a=null);g&&(g.stop(),g=null);
h&&(h.destroy(),h=null);this.session&&this._.unpublishFromSession(this.session,"reset");for(var b in x)clearInterval(x[b]),delete x[b];c=m=null;r=!1;f=null;C.set("NotPublishing")}.bind(this);this.publish=function(a,c){OT.debug("OT.Publisher: publish");(C.attemptingToPublish||C.publishing)&&X();C.set("GetUserMedia");p=OT.$.defaults(c||{},{publishAudio:!0,publishVideo:!0,mirror:!0});p.constraints?OT.warn("You have passed your own constraints not using ours"):(p.constraints=OT.$.clone(n),p.resolution&&
(void 0===p.resolution||z.hasOwnProperty(p.resolution)?(p.videoDimensions=z[p.resolution],p.constraints.video={mandatory:{},optional:[{minWidth:p.videoDimensions.width},{maxWidth:p.videoDimensions.width},{minHeight:p.videoDimensions.height},{maxHeight:p.videoDimensions.height}]}):OT.warn("Invalid resolution passed to the Publisher. Got: "+p.resolution+' expecting one of "'+Object.keys(z).join('","')+'"')),void 0!==p.frameRate&&-1===D.indexOf(p.frameRate)?(OT.warn("Invalid frameRate passed to the publisher got: "+
p.frameRate+" expecting one of "+D.join(",")),delete p.frameRate):p.frameRate&&(p.constraints.video.optional||("object"!==typeof p.constraints.video&&(p.constraints.video={}),p.constraints.video.optional=[]),p.constraints.video.optional.push({minFrameRate:p.frameRate}),p.constraints.video.optional.push({maxFrameRate:p.frameRate})));p.style&&this.setStyle(p.style,null,!0);p.name&&(p.name=p.name.toString());p.classNames="OT_root OT_publisher";OT.onLoad(function(){h=new OT.WidgetView(a,p);m=h.domId;
OT.$.shouldAskForDevices(function(a){a.video||(OT.warn("Setting video constraint to false, there are no video sources"),p.constraints.video=!1);a.audio||(OT.warn("Setting audio constraint to false, there are no audio sources"),p.constraints.audio=!1);OT.$.getUserMedia(p.constraints,P.bind(this),F.bind(this),Y.bind(this),N.bind(this),Q.bind(this))}.bind(this))},this);return this};this.publishAudio=function(a){p.publishAudio=a;s&&(s.muted=!a);t&&(t.muteButton.muted=!a);f&&c&&c.setChannelActiveState("audio",
a);return this};this.publishVideo=function(a){var b=p.publishVideo;p.publishVideo=a;f&&c&&p.publishVideo!==b&&c.setChannelActiveState("video",a);if(g)for(var b=g.getVideoTracks(),e=0,l=b.length;e<l;++e)b[e].enabled=a;h&&(h.showPoster=!a);return this};this.recordQOS=function(){for(var a in l)K(a)};this.destroy=function(a,c){X();!0!==c&&this.dispatchEvent(new OT.DestroyedEvent(OT.Event.names.PUBLISHER_DESTROYED,this,a),this.off.bind(this));return this};this.disconnect=function(){for(var a in l)this.cleanupSubscriber(a)};
this.cleanupSubscriber=function(a){var c=l[a];clearInterval(x[a]);delete x[a];c&&(c.destroy(),delete l[a],A("disconnect","PeerConnection","subscriberConnection",a))};this.processMessage=function(a,c,b){OT.debug("OT.Publisher.processMessage: Received "+a+" from "+c.id);OT.debug(b);switch(a){case "unsubscribe":this.cleanupSubscriber(b.content.connection.id);break;default:S.call(this,c).processMessage(a,b)}};this.getImgData=function(){return r?a.imgData:(OT.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),
null)};this._={publishToSession:function(c){this.session=c;var b=function(){var b,f;if(this.session){C.set("PublishingToSession");var g=function(a,c,b){a?(A("publish","Failure","reason","Publish:"+OT.ExceptionCodes.UNABLE_TO_PUBLISH+":"+a.message),C.attemptingToPublish&&this.trigger("publishComplete",new OT.Error(OT.ExceptionCodes.UNABLE_TO_PUBLISH,a.message))):(e=c,J=OT.Raptor.parseIceServers(b))}.bind(this);p.videoDimensions?(b=Math.min(p.videoDimensions.width,a.videoWidth||640),f=Math.min(p.videoDimensions.height,
a.videoHeight||480)):(b=a.videoWidth||640,f=a.videoHeight||480);c._.streamCreate(p&&p.name?p.name:"",OT.VideoOrientation.ROTATED_NORMAL,b,f,p.publishAudio,p.publishVideo,p.frameRate,g)}};if(r)b.call(this);else this.on("initSuccess",b,this);A("publish","Attempt","streamType","WebRTC");return this}.bind(this),unpublishFromSession:function(a,c){if(!this.session||a.id!==this.session.id)return OT.warn("The publisher "+this.guid+" is trying to unpublish from a session "+a.id+" it is not attached to ("+
(this.session&&this.session.id||"no this.session")+")"),this;a.connected&&this.stream&&a._.streamDestroy(this.stream.id);this.disconnect();this.session=null;C.set("MediaBound");A("unpublish","Success","sessionId",a.id);this._.streamDestroyed(c);return this}.bind(this),streamDestroyed:function(a){if(0>["reset"].indexOf(a)){var b=new OT.StreamEvent("streamDestroyed",c,a,!0);a=function(){b.isDefaultPrevented()||this.destroy()}.bind(this);this.dispatchEvent(b,a)}}.bind(this),archivingStatus:function(a){t&&
t.archive.setArchiving(a);return a}.bind(this)};this.detectDevices=function(){OT.warn("Fixme: Haven't implemented detectDevices")};this.detectMicActivity=function(){OT.warn("Fixme: Haven't implemented detectMicActivity")};this.getEchoCancellationMode=function(){OT.warn("Fixme: Haven't implemented getEchoCancellationMode");return"fullDuplex"};this.setMicrophoneGain=function(){OT.warn("Fixme: Haven't implemented setMicrophoneGain")};this.getMicrophoneGain=function(){OT.warn("Fixme: Haven't implemented getMicrophoneGain");
return.5};this.setCamera=function(){OT.warn("Fixme: Haven't implemented setCamera")};this.setMicrophone=function(){OT.warn("Fixme: Haven't implemented setMicrophone")};Object.defineProperties(this,{id:{get:function(){return m},enumerable:!0},element:{get:function(){return h.domElement},enumerable:!0},guid:{get:function(){return b},enumerable:!0},stream:{get:function(){return c},set:function(a){L(a)},enumerable:!0},streamId:{get:function(){return e},enumerable:!0},targetElement:{get:function(){return a.domElement}},
domId:{get:function(){return m}},session:{get:function(){return f},set:function(a){f=a},enumerable:!0},isWebRTC:{get:function(){return!0}},loading:{get:function(){return h&&h.loading}},videoWidth:{get:function(){return a.videoWidth},enumerable:!0},videoHeight:{get:function(){return a.videoHeight},enumerable:!0}});Object.defineProperty(this._,"webRtcStream",{get:function(){return g}});this.on("styleValueChanged",function(a,c){if(t)switch(a){case "nameDisplayMode":t.name.setDisplayMode(c);t.backingBar.nameMode=
c;break;case "showArchiveStatus":A("showArchiveStatus","styleChange","mode",c?"on":"off"),t.archive.setShowArchiveStatus(c)}},this);C=new OT.PublishingState(function(a){OT.error("Publisher State Change Failed: ",a.message);OT.debug(a)})}else OT.upgradeSystemRequirements()};OT.Publisher.nextId=OT.$.uuid}(window);
!function(n){OT.Subscriber=function(b,m){var h=OT.$.uuid(),a=b||h,c,e,g,f,l,r,p=m.session,u,s,t,v=OT.$.clone(m),z=new OT.Analytics,D=50,x,w,C,J;C={timeStamp:OT.$.now()};if(p){OT.$.eventing(this);OT.StylableComponent(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0});var A=function(a,c,b,e){z.logEvent({action:a,variation:c,payload_type:b,payload:e,stream_id:f?f.id:null,session_id:p?p.sessionId:null,connection_id:p&&p.connected?p.connection.connectionId:
null,partner_id:p&&p.connected?p.sessionInfo.partnerId:null,widget_id:h,widget_type:"Subscriber"})},K=function(){if(x.subscribing&&p&&p.connected){var a={widget_type:"Subscriber",stream_type:"WebRTC",session_id:p?p.sessionId:null,connectionId:p?p.connection.connectionId:null,media_server_name:p?p.sessionInfo.messagingServer:null,p2pFlag:p?p.sessionInfo.p2pEnabled:!1,partner_id:p?p.apiKey:null,stream_id:f.id,widget_id:h,version:OT.properties.version,duration:parseInt(OT.$.now()-u,10),remote_connection_id:f.connection.connectionId};
r.getStats(C,function(c){var b;if(c)for(b in c)a[b]=c[b];z.logQOS(a)})}},T=function(){!x.subscribing&&e&&(OT.debug("OT.Subscriber.onLoaded"),x.set("Subscribing"),u=OT.$.now(),A("createPeerConnection","Success","pcc|hasRelayCandidates",[parseInt(u-s,10),r&&r.hasRelayCandidates].join("|")),t=setInterval(K,3E4),w&&(w=null,this.subscribeToVideo(!1)),c.loading=!1,Y.call(this),this.trigger("subscribeComplete",null,this),this.trigger("loaded",this),A("subscribe","Success","streamId",f.id))},y=function(){OT.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection");
x.attemptingToSubscribe?(x.set("Failed"),this.trigger("subscribeComplete",new OT.Error(null,"ClientDisconnected"))):x.subscribing&&x.set("Failed");this.disconnect()},P=function(a,b,e,f){x.attemptingToSubscribe?(A("createPeerConnection","Failure","reason|hasRelayCandidates",["Subscriber PeerConnection Error: "+b,r&&r.hasRelayCandidates].join("|")),x.set("Failed"),this.trigger("subscribeComplete",new OT.Error(null,b))):x.subscribing&&(x.set("Failed"),this.trigger("error",b));this.disconnect();A("subscribe",
"Failure","reason",(f?f:"")+":Subscriber PeerConnection Error: "+b);OT.handleJsException("Subscriber PeerConnection Error: "+b,OT.ExceptionCodes.P2P_CONNECTION_FAILED,{session:p,target:this});c&&c.addError("The stream was unable to connect due to a network error.","Make sure your connection isn't blocked by a firewall.")},F=function(a){OT.debug("OT.Subscriber.onRemoteStreamAdded");x.set("BindingRemoteStream");this.subscribeToAudio(v.subscribeToAudio);var b=w;this.subscribeToVideo(v.subscribeToVideo);
w=b;b=new OT.VideoElement;b.setAudioVolume(D);b.on({streamBound:T,loadError:P,error:P},this);b.bindToStream(a);e=c.video=b;e.orientation={width:f.videoDimensions.width,height:f.videoDimensions.height,videoOrientation:f.videoDimensions.orientation};A("createPeerConnection","StreamAdded","","");this.trigger("streamAdded",this)},Q=function(a){OT.debug("OT.Subscriber.onStreamRemoved");e.stream===a&&(e.destroy(),e=null);this.trigger("streamRemoved",this)},M=function(){this.disconnect()},R=function(a){switch(a.changedProperty){case "videoDimensions":e.orientation=
{width:a.newValue.width,height:a.newValue.height,videoOrientation:a.newValue.orientation};break;case "hasVideo":c&&(c.showPoster=!(f.hasVideo&&v.subscribeToVideo))}},E=function(a){if(!1===a)return"off";a=this.getStyle("buttonDisplayMode");return!1===a?"on":a},Y=function(){"off"===this.getStyle("bugDisplayMode")&&A("bugDisplayMode","createChrome","mode","off");g=(new OT.Chrome({parent:c.domElement})).set({backingBar:new OT.Chrome.BackingBar({nameMode:this.getStyle("nameDisplayMode"),muteMode:E.call(this,
this.getStyle("showMuteButton"))}),name:new OT.Chrome.NamePanel({name:v.name,mode:this.getStyle("nameDisplayMode"),bugMode:this.getStyle("bugDisplayMode")}),muteButton:new OT.Chrome.MuteButton({muted:v.muted,mode:E.call(this,this.getStyle("showMuteButton"))}),opentokButton:new OT.Chrome.OpenTokButton({mode:this.getStyle("bugDisplayMode")}),archive:new OT.Chrome.Archiving({show:this.getStyle("showArchiveStatus"),archiving:!1})}).on({muted:function(){N.call(this,!0)},unmuted:function(){N.call(this,
!1)}},this)};this.recordQOS=function(){K()};this.subscribe=function(e){OT.debug("OT.Subscriber: subscribe to "+e.id);if(x.subscribing)return OT.error("OT.Subscriber.Subscribe: Cannot subscribe, already subscribing."),!1;x.set("Init");if(!e)return OT.error("OT.Subscriber: No stream parameter."),!1;if(f)return OT.error("OT.Subscriber: Already subscribed"),!1;f=e;f.on({updated:R,destroyed:M},this);l=e.connection.id;v.name=v.name||f.name;v.classNames="OT_root OT_subscriber";v.style&&this.setStyle(v.style,
null,!0);v.audioVolume&&this.setAudioVolume(v.audioVolume);v.subscribeToAudio=OT.$.castToBoolean(v.subscribeToAudio,!0);v.subscribeToVideo=OT.$.castToBoolean(v.subscribeToVideo,!0);c=new OT.WidgetView(b,v);a=c.domId;!v.subscribeToVideo&&"Chrome"===OT.$.browser()&&(w=!0,v.subscribeToVideo=!0);s=OT.$.now();if(f.connection.id!==p.connection.id)A("createPeerConnection","Attempt","",""),x.set("ConnectingToPeer"),r=new OT.SubscriberPeerConnection(f.connection,p,f,this,v),r.on({disconnected:y,error:P,remoteStreamAdded:F,
remoteStreamRemoved:Q},this),r.init();else{A("createPeerConnection","Attempt","","");e=p.getPublisherForStream(f);if(!e||!e._.webRtcStream)return this.trigger("subscribeComplete",new OT.Error(null,"InvalidStreamID")),this;F.call(this,p.getPublisherForStream(f)._.webRtcStream)}A("subscribe","Attempt","streamId",f.id);return this};this.destroy=function(b,e){"streamDestroyed"===b&&x.attemptingToSubscribe&&this.trigger("subscribeComplete",new OT.Error(null,"InvalidStreamID"));clearInterval(t);t=null;
this.disconnect();g&&(g.destroy(),g=null);c&&(c.destroy(),c=null);f&&!f.destroyed&&A("unsubscribe",null,"streamId",f.id);v=p=f=a=null;!0!==e&&this.dispatchEvent(new OT.DestroyedEvent(OT.Event.names.SUBSCRIBER_DESTROYED,this,b),this.off.bind(this));return this};this.disconnect=function(){x.set("NotSubscribing");e&&(e.destroy(),e=null);r&&(r.destroy(),r=null,A("disconnect","PeerConnection","streamId",f.id))};this.processMessage=function(a,c,b){OT.debug("OT.Subscriber.processMessage: Received "+a+" message from "+
c.id);OT.debug(b);l!==c.id&&(l=c.id);r&&r.processMessage(a,b)};this.disableVideo=function(a){if(a)if("auto"===J)OT.info("Video has been re-enabled");else{OT.info("Video was not re-enabled because it was manually disabled");return}else OT.warn("Due to high packet loss and low bandwidth, video has been disabled");this.subscribeToVideo(a,"auto");this.dispatchEvent(new OT.Event(a?"videoEnabled":"videoDisabled"));A("updateQuality","video",a?"videoEnabled":"videoDisabled",!0)};this.getImgData=function(){return this.subscribing?
e.imgData:(OT.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null)};this.setAudioVolume=function(a){a=parseInt(a,10);if(isNaN(a))return OT.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),this;D=Math.max(0,Math.min(100,a));D!==a&&OT.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100");v.muted&&0<D&&(v.premuteVolume=a,N.call(this,!1));e&&e.setAudioVolume(D);return this};this.getAudioVolume=
function(){return v.muted?0:e?e.getAudioVolume():D};this.subscribeToAudio=function(a){a=OT.$.castToBoolean(a,!0);r&&(r.subscribeToAudio(a&&!v.subscribeMute),p&&f&&a!==v.subscribeToAudio&&f.setChannelActiveState("audio",a&&!v.subscribeMute));v.subscribeToAudio=a;return this};var N=function(a){g.muteButton.muted=a;if(a!==v.mute){if(0<=n.navigator.userAgent.toLowerCase().indexOf("chrome"))v.subscribeMute=v.muted=a,this.subscribeToAudio(v.subscribeToAudio);else if(a)v.premuteVolume=this.getAudioVolume(),
v.muted=!0,this.setAudioVolume(0);else if(v.premuteVolume||v.audioVolume)v.muted=!1,this.setAudioVolume(v.premuteVolume||v.audioVolume);v.mute=v.mute}};this.subscribeToVideo=function(a,b){if(w&&!0===a)w=!1;else{var e=OT.$.castToBoolean(a,!0);c&&(c.showPoster=!(e&&f.hasVideo),e&&c.video&&(c.loading=e,c.video.whenTimeIncrements(function(){c.loading=!1},this)));r&&(r.subscribeToVideo(e),p&&f&&(e!==v.subscribeToVideo||b!==J)&&f.setChannelActiveState("video",e,b));v.subscribeToVideo=e;J=b;return this}};
Object.defineProperties(this,{id:{get:function(){return a},enumerable:!0},element:{get:function(){return c.domElement},enumerable:!0},widgetId:{get:function(){return h}},stream:{get:function(){return f},enumerable:!0},streamId:{get:function(){return f?f.id:null},enumerable:!0},targetElement:{get:function(){return e?e.domElement:null}},subscribing:{get:function(){return x.subscribing},enumerable:!0},isWebRTC:{get:function(){return!0}},loading:{get:function(){return c&&c.loading}},session:{get:function(){return p}},
videoWidth:{get:function(){return e.videoWidth},enumerable:!0},videoHeight:{get:function(){return e.videoHeight},enumerable:!0}});this.restrictFrameRate=function(a){OT.debug("OT.Subscriber.restrictFrameRate("+a+")");A("restrictFrameRate",a.toString(),"streamId",f.id);p.sessionInfo.p2pEnabled&&OT.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session");"boolean"!==typeof a?OT.error("OT.Subscriber.restrictFrameRate: expected a boolean value got a "+typeof a):f.setRestrictFrameRate(a);
return this};this.on("styleValueChanged",function(a,c){if(g)switch(a){case "nameDisplayMode":g.name.setDisplayMode(c);break;case "showArchiveStatus":g.archive.setShowArchiveStatus(c)}},this);this._={archivingStatus:function(a){g&&g.archive.setArchiving(a)}};x=new OT.SubscribingState(function(a){OT.error("Subscriber State Change Failed: ",a.message);OT.debug(a)})}else OT.handleJsException("Subscriber must be passed a session option",2E3,{session:p,target:this})}}(window);
!function(){var n,b,m;OT.SessionInfo=function(a){var c=a[0];OT.log("SessionInfo Response:");OT.log(a);this.sessionId=c.session_id;this.partnerId=c.partner_id;this.sessionStatus=c.session_status;this.messagingServer=c.messaging_server_url;this.messagingURL=c.messaging_url;this.symphonyAddress=c.symphony_address;this.p2pEnabled=c.properties&&c.properties.p2p&&c.properties.p2p.preference&&"enabled"===c.properties.p2p.preference.value};OT.SessionInfo.get=function(a,c,e){var g=OT.properties.apiURLSSL+
"/session/"+a.id+"?extended=true",f=OT.$.now();a.logEvent("getSessionInfo","Attempt","api_url",OT.properties.apiURLSSL);OT.$.getJSON(g,{headers:{"X-TB-TOKEN-AUTH":a.token,"X-TB-VERSION":1}},function(g,h){if(g)console.log("getJSON said error:",g),m(a,e,new OT.Error(g.target&&g.target.status||g.code,g.message||"Could not connect to the OpenTok API Server."),h);else{a.logEvent("Instrumentation",null,"gsi",OT.$.now()-f);var p=n(h);!1===p?b(a,c,h):m(a,e,p,JSON.stringify(h))}})};var h={};h["404"]=OT.ExceptionCodes.INVALID_SESSION_ID;
h["409"]=OT.ExceptionCodes.INVALID_SESSION_ID;h["400"]=OT.ExceptionCodes.INVALID_SESSION_ID;h["403"]=OT.ExceptionCodes.AUTHENTICATION_ERROR;n=function(a){if(Array.isArray(a)){a=a.filter(function(a){return null!=a.error});if(0===a.length)return!1;var c=a[0].error.code;h[c.toString()]&&(c=h[c]);return{code:c,message:a[0].error.errorMessage&&a[0].error.errorMessage.message}}return{code:null,message:"Unknown error: getSessionInfo JSON response was badly formed"}};b=function(a,c,b){a.logEvent("getSessionInfo",
"Success","api_url",OT.properties.apiURLSSL);c(new OT.SessionInfo(b))};m=function(a,c,b,g){a.logEvent("Connect","Failure","errorMessage","GetSessionInfo:"+b.code+":"+b.message+":"+g);c(b,a)}}(window);
!function(){OT.Capabilities=function(n){this.publish=-1!==n.indexOf("publish")?1:0;this.subscribe=-1!==n.indexOf("subscribe")?1:0;this.forceUnpublish=-1!==n.indexOf("forceunpublish")?1:0;this.forceDisconnect=-1!==n.indexOf("forcedisconnect")?1:0;this.supportsWebRTC=OT.$.supportsWebRTC()?1:0;this.permittedTo=function(b){return this.hasOwnProperty(b)&&1===this[b]}}}(window);
!function(n){OT.Session=function(b,m){if(OT.checkSystemRequirements()){null==m&&(m=b,b=null);var h=!0,a=b,c,e=m,g,f=OT.$.uuid(),l,r=new OT.Analytics,p,u,s,t,v,z,D,x,w,C,J,A,K,T,y,P,F,Q,M;OT.$.eventing(this);var R=OT.$.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connections=new OT.Collection;this.streams=new OT.Collection;this.archives=new OT.Collection;p=function(a,c){R("disconnected");OT.error(a);this.trigger("sessionConnectFailed",new OT.Error(c||
OT.ExceptionCodes.CONNECT_FAILED,a));OT.handleJsException(a,c||OT.ExceptionCodes.CONNECT_FAILED,{session:this})};u=function(a){var c=a.reason;"networkTimedout"===c?(c="networkDisconnected",this.logEvent("Connect","TimeOutDisconnect","reason",a.reason)):this.logEvent("Connect","Disconnected","reason",a.reason);var b=new OT.SessionDisconnectEvent("sessionDisconnected",c);J.call(this);A.call(this,c);a=function(){K.call(this,b.reason);b.isDefaultPrevented()||T.call(this,b.reason)}.bind(this);this.dispatchEvent(b,
a)};s=function(a){a.id.match(/^symphony\./)||this.dispatchEvent(new OT.ConnectionEvent(OT.Event.names.CONNECTION_CREATED,a))};t=function(a,c){a.id.match(/^symphony\./)||a.id!==g.id&&this.dispatchEvent(new OT.ConnectionEvent(OT.Event.names.CONNECTION_DESTROYED,a,c))};v=function(a){a.connection.id!==this.connection.id&&this.dispatchEvent(new OT.StreamEvent(OT.Event.names.STREAM_CREATED,a,null,!1))};z=function(a){var c=a.target,b=a.changedProperty,e=a.newValue;"orientation"===b&&(b="videoDimensions",
e={width:e.width,height:e.height});this.dispatchEvent(new OT.StreamPropertyChangedEvent(OT.Event.names.STREAM_PROPERTY_CHANGED,c,b,a.oldValue,e))};D=function(a,c){if(a.connection.id===this.connection.id)OT.publishers.where({streamId:a.id}).forEach(function(a){a._.unpublishFromSession(this,c)}.bind(this));else{var b=new OT.StreamEvent("streamDestroyed",a,c,!0),e=function(){b.isDefaultPrevented()||OT.subscribers.where({streamId:a.id}).forEach(function(a){a.session.id===this.id&&a.stream&&a.destroy("streamDestroyed")},
this)}.bind(this);this.dispatchEvent(b,e)}};x=function(a){this.dispatchEvent(new OT.ArchiveEvent("archiveStarted",a))};w=function(a){this.dispatchEvent(new OT.ArchiveEvent("archiveDestroyed",a))};C=function(a){var c=a.target,b=a.newValue;"status"===a.changedProperty&&"stopped"===b?this.dispatchEvent(new OT.ArchiveEvent("archiveStopped",c)):this.dispatchEvent(new OT.ArchiveEvent("archiveUpdated",c))};J=function(){c=null;R("disconnected");this.connections.destroy();this.streams.destroy();this.archives.destroy()};
A=function(a){OT.publishers.where({session:this}).forEach(function(c){c.disconnect(a)});OT.subscribers.where({session:this}).forEach(function(a){a.disconnect()})};K=function(a){OT.publishers.where({session:this}).forEach(function(c){c._.streamDestroyed(a)})};T=function(a){OT.subscribers.where({session:this}).forEach(function(c){c.destroy(a)})};y=function(){OT.debug("OT.Session: connecting to Raptor");var a=OT.properties.messagingProtocol+"://"+this.sessionInfo.messagingServer+":"+OT.properties.messagingPort+
"/rumorwebsocketsv2";g=new OT.Raptor.Socket(f,a,OT.properties.symphonyAddresss||"symphony."+this.sessionInfo.messagingServer,OT.SessionDispatcher(this));var b=[a,navigator.userAgent,OT.properties.version,n.externalHost?"yes":"no"];g.connect(c,this.sessionInfo,function(a,c){a?(b.splice(0,0,a.message),this.logEvent("Connect","Failure","reason|webSocketServerUrl|userAgent|sdkVersion|chromeFrame",b.map(function(a){return a.replace("|","\\|")}).join("|")),p.call(this,a.message,a.code)):(OT.debug("OT.Session: Received session state from Raptor",
c),R("connected"),this.logEvent("Connect","Success","webSocketServerUrl|userAgent|sdkVersion|chromeFrame",b.map(function(a){return a.replace("|","\\|")}).join("|"),{connectionId:this.connection.id}),this.connection.on("destroyed",u,this),this.connections.on({add:s,remove:t},this),this.streams.on({add:v,remove:D,update:z},this),this.archives.on({add:x,remove:w,update:C},this),this.dispatchEvent(new OT.SessionConnectEvent(OT.Event.names.SESSION_CONNECTED),function(){this.connections._triggerAddEvents();
this.streams._triggerAddEvents();this.archives._triggerAddEvents()}.bind(this)))}.bind(this))};P=function(){this.is("connecting")&&OT.SessionInfo.get(this,F.bind(this),function(a){p.call(this,a.message+(a.code?" ("+a.code+")":""),a.code)}.bind(this))};F=function(c){this.is("connecting")&&(this.sessionInfo=c,this.sessionInfo.partnerId&&this.sessionInfo.partnerId!==a?(a=this.sessionInfo.partnerId,this.logEvent("Connect","Failure","reason","GetSessionInfo:"+OT.ExceptionCodes.AUTHENTICATION_ERROR+":Authentication Error: The API key does not match the token or session."),
p.call(this,"Authentication Error: The API key does not match the token or session.",OT.ExceptionCodes.AUTHENTICATION_ERROR)):y.call(this))};Q=function(a){return this.capabilities.permittedTo(a)}.bind(this);M=function(a,c,b){OT.dispatchError(a,c,b,this)}.bind(this);this.logEvent=function(c,b,g,h,m){c={action:c,variation:b,payload_type:g,payload:h,session_id:e,partner_id:a,widget_id:f,widget_type:"Controller"};this.connection&&this.connection.id?l=c.connection_id=this.connection.id:l&&(c.connection_id=
l);m&&(c=OT.$.extend(m,c));r.logEvent(c)};this.connect=function(g){null==b&&1<arguments.length&&("string"===typeof arguments[0]||"number"===typeof arguments[0])&&"string"===typeof arguments[1]&&(a=g.toString(),g=arguments[1]);var l=arguments[arguments.length-1];if(this.is("connecting","connected"))return OT.warn("OT.Session: Cannot connect, the session is already "+this.state),this;J.call(this);R("connecting");c=!OT.$.isFunction(g)&&g;h?h=!1:f=OT.$.uuid();l&&OT.$.isFunction(l)&&(this.once("sessionConnected",
l.bind(null,null)),this.once("sessionConnectFailed",l));if(null==a||OT.$.isFunction(a))return setTimeout(p.bind(this,"API Key is undefined. You must pass an API Key to initSession.",OT.ExceptionCodes.AUTHENTICATION_ERROR)),this;if(!e)return setTimeout(p.bind(this,"SessionID is undefined. You must pass a sessionID to initSession.",OT.ExceptionCodes.INVALID_SESSION_ID)),this;a=a.toString();0===OT.APIKEY.length&&(OT.APIKEY=a);this.logEvent("Connect","Attempt","userAgent|sdkVersion|chromeFrame",[navigator.userAgent,
OT.properties.version,n.externalHost?"yes":"no"].map(function(a){return a.replace("|","\\|")}).join("|"));P.call(this);return this};this.disconnect=function(){g&&g.isNot("disconnected")?(R("disconnecting"),g.disconnect()):J.call(this)};this.destroy=function(){this.streams.destroy();this.connections.destroy();this.archives.destroy();this.disconnect()};this.publish=function(c,b,g){"function"===typeof c&&(g=c,c=void 0);"function"===typeof b&&(g=b,b=void 0);if(this.isNot("connected"))return r.logError(1010,
"OT.exception","We need to be connected before you can publish",null,{action:"publish",variation:"Failure",payload_type:"reason",payload:"We need to be connected before you can publish",session_id:e,partner_id:a,widgetId:f,widget_type:"Controller"}),g&&OT.$.isFunction(g)&&M(OT.ExceptionCodes.NOT_CONNECTED,"We need to be connected before you can publish",g),null;if(!Q("publish"))return this.logEvent("publish","Failure","reason","This token does not allow publishing. The role must be at least `publisher` to enable this functionality"),
M(OT.ExceptionCodes.UNABLE_TO_PUBLISH,"This token does not allow publishing. The role must be at least `publisher` to enable this functionality",g),null;if(c&&"string"!==typeof c&&c.nodeType!==Node.ELEMENT_NODE)if(c instanceof OT.Publisher)"session"in c&&c.session&&"sessionId"in c.session&&(c.session.sessionId===this.sessionId?OT.warn("Cannot publish "+c.guid+" again to "+this.sessionId+". Please call session.unpublish(publisher) first."):OT.warn("Cannot publish "+c.guid+" publisher already attached to "+
c.session.sessionId+". Please call session.unpublish(publisher) first."));else{M(OT.ExceptionCodes.UNABLE_TO_PUBLISH,"Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher",g);return}else c=OT.initPublisher(c,b);c.once("publishComplete",function(a){a?M(OT.ExceptionCodes.UNABLE_TO_PUBLISH,"Session.publish :: "+a.message,g):g&&OT.$.isFunction(g)&&g.apply(null,arguments)});c._.publishToSession(this);return c};this.unpublish=function(a){a?a._.unpublishFromSession(this,
"unpublished"):OT.error("OT.Session.unpublish: publisher parameter missing.")};this.subscribe=function(a,c,b,e){if(this.connection&&this.connection.connectionId)if(a){if(a.hasOwnProperty("streamId"))return"function"===typeof c&&(e=c,c=void 0),"function"===typeof b&&(e=b,b=void 0),c=new OT.Subscriber(c,OT.$.extend(b||{},{session:this})),c.once("subscribeComplete",function(a){a?M(OT.ExceptionCodes.UNABLE_TO_SUBSCRIBE,"Session.subscribe :: "+a.message,e):e&&OT.$.isFunction(e)&&e.apply(null,arguments)}),
OT.subscribers.add(c),c.subscribe(a),c;M(OT.ExceptionCodes.UNABLE_TO_SUBSCRIBE,"Session.subscribe :: invalid stream object",e)}else M(OT.ExceptionCodes.UNABLE_TO_SUBSCRIBE,"Session.subscribe :: stream cannot be null",e);else M(OT.ExceptionCodes.UNABLE_TO_SUBSCRIBE,"Session.subscribe :: Connection required to subscribe",e)};this.unsubscribe=function(a){if(!a)throw OT.error("OT.Session.unsubscribe: subscriber cannot be null"),Error("OT.Session.unsubscribe: subscriber cannot be null");if(!a.stream)return OT.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),
!1;OT.debug("OT.Session.unsubscribe: subscriber "+a.id);a.destroy();return!0};this.getSubscribersForStream=function(a){return OT.subscribers.where({streamId:a.id})};this.getPublisherForStream=function(a){if("string"!==typeof a)if("object"===typeof a&&a&&a.hasOwnProperty("id"))a=a.id;else throw OT.error("Session.getPublisherForStream :: Invalid stream type"),Error("Session.getPublisherForStream :: Invalid stream type");return OT.publishers.where({streamId:a})[0]};this._={jsepCandidateP2p:function(a,
c,b){return g.jsepCandidateP2p(a,c,b)}.bind(this),jsepCandidate:function(a,c){return g.jsepCandidate(a,c)}.bind(this),jsepOffer:function(a,c){return g.jsepOffer(a,c)}.bind(this),jsepOfferP2p:function(a,c,b){return g.jsepOfferP2p(a,c,b)}.bind(this),jsepAnswer:function(a,c){return g.jsepAnswer(a,c)}.bind(this),jsepAnswerP2p:function(a,c,b){return g.jsepAnswerP2p(a,c,b)}.bind(this),dispatchSignal:function(a,c,b){a=new OT.SignalEvent(c,b,a);a.target=this;this.trigger(OT.Event.names.SIGNAL,a);c&&this.dispatchEvent(a)}.bind(this),
subscriberCreate:function(a,c,b,e){return g.subscriberCreate(a.id,c.widgetId,b,e)}.bind(this),subscriberDestroy:function(a,c){return g.subscriberDestroy(a.id,c.widgetId)}.bind(this),subscriberUpdate:function(a,c,b){return g.subscriberUpdate(a.id,c.widgetId,b)}.bind(this),subscriberChannelUpdate:function(a,c,b,e){return g.subscriberChannelUpdate(a.id,c.widgetId,b.id,e)}.bind(this),streamCreate:function(a,c,b,e,f,l,h,m){g.streamCreate(a,c,b,e,f,l,h,OT.Config.get("bitrates","min",OT.APIKEY),OT.Config.get("bitrates",
"max",OT.APIKEY),m)}.bind(this),streamDestroy:function(a){g.streamDestroy(a)}.bind(this),streamChannelUpdate:function(a,c,b){g.streamChannelUpdate(a.id,c.id,b)}.bind(this)};this.signal=function(a,c){var b=a,e=c;OT.$.isFunction(b)&&(e=b,b=null);this.isNot("connected")?M(500,"Unable to send signal - you are not connected to the session.",e):(g.signal(b,e),a&&a.data&&"string"!==typeof a.data&&OT.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string."),
this.logEvent("signal","send","type",a&&a.data?typeof a.data:"null"))};this.forceDisconnect=function(a,c){this.isNot("connected")?M(OT.ExceptionCodes.NOT_CONNECTED,"Cannot call forceDisconnect(). You are not connected to the session.",c):Q("forceDisconnect")?g.forceDisconnect("string"===typeof a?a:a.id,function(a){a?M(OT.ExceptionCodes.UNABLE_TO_FORCE_DISCONNECT,"This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality",c):c&&OT.$.isFunction(c)&&
c.apply(null,arguments)}):M(OT.ExceptionCodes.UNABLE_TO_FORCE_DISCONNECT,"This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality",c)};this.forceUnpublish=function(a,c){if(this.isNot("connected"))M(OT.ExceptionCodes.NOT_CONNECTED,"Cannot call forceUnpublish(). You are not connected to the session.",c);else if(Q("forceUnpublish")){var b="string"===typeof a?this.streams.get(a):a;g.forceUnpublish(b.id,function(a){a?M(OT.ExceptionCodes.UNABLE_TO_FORCE_UNPUBLISH,
"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",c):c&&OT.$.isFunction(c)&&c.apply(null,arguments)})}else M(OT.ExceptionCodes.UNABLE_TO_FORCE_UNPUBLISH,"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",c)};this.getStateManager=function(){OT.warn("Fixme: Have not implemented session.getStateManager")};OT.$.defineGetters(this,{apiKey:function(){return a},token:function(){return c},
connected:function(){return this.is("connected")},connection:function(){return g&&g.id?this.connections.get(g.id):null},sessionId:function(){return e},id:function(){return e},capabilities:function(){var a=this.connection;return a?a.permissions:new OT.Capabilities([])}.bind(this)},!0)}else OT.upgradeSystemRequirements()}}(window);!function(){var n=document.createElement("link");n.type="text/css";n.media="screen";n.rel="stylesheet";n.href=OT.properties.cssURL;(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}(window);
!function(){"function"===typeof define&&define.amd&&define("TB",[],function(){return TB})}(window);!function(n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):"undefined"!=typeof window?window.io=n():"undefined"!=typeof global?global.io=n():"undefined"!=typeof self&&(self.io=n())}(function(){return function b(m,h,a){function c(f,g){if(!h[f]){if(!m[f]){var r="function"==typeof require&&require;if(!g&&r)return r(f,!0);if(e)return e(f,!0);throw Error("Cannot find module '"+f+"'");}r=h[f]={exports:{}};m[f][0].call(r.exports,function(a){var b=m[f][1][a];
return c(b?b:a)},r,r.exports,b,m,h,a)}return h[f].exports}for(var e="function"==typeof require&&require,g=0;g<a.length;g++)c(a[g]);return c}({1:[function(b,m,h){m.exports=b("./lib/")},{"./lib/":2}],2:[function(b,m,h){function a(a,b){"object"==typeof a&&(b=a,a=void 0);b=b||{};var e=c(a),h=e.source,m=e.id;b.forceNew||!1===b.multiplex?(f("ignoring socket cache for %s",h),h=g(h,b)):(l[m]||(f("new io instance for %s",h),l[m]=g(h,b)),h=l[m]);return h.socket(e.path)}var c=b("./url"),e=b("socket.io-parser"),
g=b("./manager"),f=b("debug")("socket.io-client");m.exports=h=a;var l=h.managers={};h.protocol=e.protocol;h.connect=a;h.Manager=b("./manager");h.Socket=b("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:8,"socket.io-parser":39}],3:[function(b,m,h){function a(c,b){if(!(this instanceof a))return new a(c,b);"object"==typeof c&&(b=c,c=void 0);b=b||{};b.path=b.path||"/socket.io";this.nsps={};this.subs=[];this.opts=b;this.reconnection(!1!==b.reconnection);this.reconnectionAttempts(b.reconnectionAttempts||
Infinity);this.reconnectionDelay(b.reconnectionDelay||1E3);this.reconnectionDelayMax(b.reconnectionDelayMax||5E3);this.timeout(null==b.timeout?2E4:b.timeout);this.readyState="closed";this.uri=c;this.attempts=this.connected=0;this.encoding=!1;this.packetBuffer=[];this.encoder=new g.Encoder;this.decoder=new g.Decoder;this.open()}b("./url");var c=b("engine.io-client"),e=b("./socket");h=b("emitter");var g=b("socket.io-parser"),f=b("./on"),l=b("bind");b("object-component");var r=b("debug")("socket.io-client:manager");
m.exports=a;h(a.prototype);a.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};a.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};a.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;return this};a.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;
this._reconnectionDelayMax=a;return this};a.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};a.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||(this.openReconnect=!0,this.reconnect())};a.prototype.open=a.prototype.connect=function(a){r("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;r("opening %s",this.uri);var b=this.engine=c(this.uri,this.opts),e=this;this.readyState=
"opening";var g=f(b,"open",function(){e.onopen();a&&a()}),l=f(b,"error",function(c){r("connect_error");e.cleanup();e.readyState="closed";e.emit("connect_error",c);if(a){var b=Error("Connection error");b.data=c;a(b)}e.maybeReconnectOnOpen()});if(!1!==this._timeout){var h=this._timeout;r("connect attempt will timeout after %d",h);var m=setTimeout(function(){r("connect attempt timed out after %d",h);g.destroy();b.close();b.emit("error","timeout");e.emit("connect_timeout",h)},h);this.subs.push({destroy:function(){clearTimeout(m)}})}this.subs.push(g);
this.subs.push(l);return this};a.prototype.onopen=function(){r("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(f(a,"data",l(this,"ondata")));this.subs.push(f(this.decoder,"decoded",l(this,"ondecoded")));this.subs.push(f(a,"error",l(this,"onerror")));this.subs.push(f(a,"close",l(this,"onclose")))};a.prototype.ondata=function(a){this.decoder.add(a)};a.prototype.ondecoded=function(a){this.emit("packet",a)};a.prototype.onerror=function(a){r("error",a);
this.emit("error",a)};a.prototype.socket=function(a){var c=this.nsps[a];if(!c){c=new e(this,a);this.nsps[a]=c;var b=this;c.on("connect",function(){b.connected++})}return c};a.prototype.destroy=function(a){--this.connected||this.close()};a.prototype.packet=function(a){r("writing packet %j",a);var c=this;c.encoding?c.packetBuffer.push(a):(c.encoding=!0,this.encoder.encode(a,function(a){for(var b=0;b<a.length;b++)c.engine.write(a[b]);c.encoding=!1;c.processPacketQueue()}))};a.prototype.processPacketQueue=
function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};a.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.decoder.destroy()};a.prototype.close=a.prototype.disconnect=function(){this.skipReconnect=!0;this.engine.close()};a.prototype.onclose=function(a){r("close");this.cleanup();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};
a.prototype.reconnect=function(){if(this.reconnecting)return this;var a=this;this.attempts++;if(this.attempts>this._reconnectionAttempts)r("reconnect failed"),this.emit("reconnect_failed"),this.reconnecting=!1;else{var c=this.attempts*this.reconnectionDelay(),c=Math.min(c,this.reconnectionDelayMax());r("will wait %dms before reconnect attempt",c);this.reconnecting=!0;var b=setTimeout(function(){r("attempting reconnect");a.emit("reconnect_attempt");a.open(function(c){c?(r("reconnect attempt error"),
a.reconnecting=!1,a.reconnect(),a.emit("reconnect_error",c.data)):(r("reconnect success"),a.onreconnect())})},c);this.subs.push({destroy:function(){clearTimeout(b)}})}};a.prototype.onreconnect=function(){var a=this.attempts;this.attempts=0;this.reconnecting=!1;this.emit("reconnect",a)}},{"./on":4,"./socket":5,"./url":6,bind:7,debug:8,emitter:9,"engine.io-client":10,"object-component":36,"socket.io-parser":39}],4:[function(b,m,h){m.exports=function(a,c,b){a.on(c,b);return{destroy:function(){a.removeListener(c,
b)}}}},{}],5:[function(b,m,h){function a(a,c){this.io=a;this.nsp=c;this.json=this;this.ids=0;this.acks={};this.open();this.buffer=[];this.connected=!1;this.disconnected=!0}var c=b("socket.io-parser");h=b("emitter");var e=b("to-array"),g=b("./on"),f=b("bind"),l=b("debug")("socket.io-client:socket"),r=b("has-binary-data");b("indexof");m.exports=a;var p={connect:1,disconnect:1,error:1},u=h.prototype.emit;h(a.prototype);a.prototype.open=a.prototype.connect=function(){if(this.connected)return this;var a=
this.io;a.open();this.subs=[g(a,"open",f(this,"onopen")),g(a,"error",f(this,"onerror")),g(a,"packet",f(this,"onpacket")),g(a,"close",f(this,"onclose"))];if("open"==this.io.readyState)this.onopen();return this};a.prototype.send=function(){var a=e(arguments);a.unshift("message");this.emit.apply(this,a);return this};a.prototype.emit=function(a){if(p.hasOwnProperty(a))return u.apply(this,arguments),this;var b=e(arguments),f=c.EVENT;r(b)&&(f=c.BINARY_EVENT);f={type:f,data:b};"function"==typeof b[b.length-
1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),f.id=this.ids++);this.packet(f);return this};a.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};a.prototype.onerror=function(a){this.emit("error",a)};a.prototype.onopen=function(){l("transport is open - connecting");"/"!=this.nsp&&this.packet({type:c.CONNECT})};a.prototype.onclose=function(a){l("close (%s)",a);this.connected=!1;this.disconnected=!0;this.emit("disconnect",a)};a.prototype.onpacket=function(a){if(a.nsp==
this.nsp)switch(a.type){case c.CONNECT:this.onconnect();break;case c.EVENT:this.onevent(a);break;case c.BINARY_EVENT:this.onevent(a);break;case c.ACK:this.onack(a);break;case c.BINARY_ACK:this.onack(a);break;case c.DISCONNECT:this.ondisconnect();break;case c.ERROR:this.emit("error",a.data)}};a.prototype.onevent=function(a){var c=a.data||[];l("emitting event %j",c);null!=a.id&&(l("attaching ack callback to event"),c.push(this.ack(a.id)));this.connected?u.apply(this,c):this.buffer.push(c)};a.prototype.ack=
function(a){var b=this,f=!1;return function(){if(!f){f=!0;var g=e(arguments);l("sending ack %j",g);var h=r(g)?c.BINARY_ACK:c.ACK;b.packet({type:h,id:a,data:g})}}};a.prototype.onack=function(a){l("calling ack %s with %j",a.id,a.data);this.acks[a.id].apply(this,a.data);delete this.acks[a.id]};a.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};a.prototype.emitBuffered=function(){for(var a=0;a<this.buffer.length;a++)u.apply(this,this.buffer[a]);
this.buffer=[]};a.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};a.prototype.destroy=function(){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.io.destroy(this)};a.prototype.close=a.prototype.disconnect=function(){if(!this.connected)return this;l("performing disconnect (%s)",this.nsp);this.packet({type:c.DISCONNECT});this.destroy();this.onclose("io client disconnect");return this}},{"./on":4,bind:7,debug:8,
emitter:9,"has-binary-data":31,indexof:35,"socket.io-parser":39,"to-array":42}],6:[function(b,m,h){var a="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c=b("parseuri"),e=b("debug")("socket.io-client:url");m.exports=function(b,f){var l=b;f=f||a.location;null==b&&(b=f.protocol+"//"+f.hostname);"string"==typeof b&&("/"==b.charAt(0)&&"undefined"!=typeof f&&(b=f.hostname+b),/^(https?|wss?):\/\//.test(b)||(e("protocol-less url %s",b),b="undefined"!=typeof f?f.protocol+"//"+b:"https://"+
b),e("parse %s",b),l=c(b));(/(http|ws)/.test(l.protocol)&&80==l.port||/(http|ws)s/.test(l.protocol)&&443==l.port)&&delete l.port;l.path=l.path||"/";l.id=l.protocol+l.host+(l.port?":"+l.port:"");l.href=l.protocol+"://"+l.host+(l.port?":"+l.port:"");return l}},{debug:8,parseuri:37}],7:[function(b,m,h){var a=[].slice;m.exports=function(c,b){"string"==typeof b&&(b=c[b]);if("function"!=typeof b)throw Error("bind() requires a function");var g=[].slice.call(arguments,2);return function(){return b.apply(c,
g.concat(a.call(arguments)))}}},{}],8:[function(b,m,h){function a(c){return a.enabled(c)?function(b){b instanceof Error&&(b=b.stack||b.message);var f=new Date,l=f-(a[c]||f);a[c]=f;b=c+" "+b+" +"+a.humanize(l);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}m.exports=a;a.names=[];a.skips=[];a.enable=function(c){try{localStorage.debug=c}catch(b){}for(var f=(c||"").split(/[\s,]+/),l=f.length,h=0;h<l;h++)c=f[h].replace("*",".*?"),"-"===c[0]?a.skips.push(new RegExp("^"+
c.substr(1)+"$")):a.names.push(new RegExp("^"+c+"$"))};a.disable=function(){a.enable("")};a.humanize=function(a){return 36E5<=a?(a/36E5).toFixed(1)+"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=a?(a/1E3|0)+"s":a+"ms"};a.enabled=function(c){for(var b=0,f=a.skips.length;b<f;b++)if(a.skips[b].test(c))return!1;b=0;for(f=a.names.length;b<f;b++)if(a.names[b].test(c))return!0;return!1};try{window.localStorage&&a.enable(localStorage.debug)}catch(c){}},{}],9:[function(b,m,h){function a(c){if(c){for(var b in a.prototype)c[b]=
a.prototype[b];return c}}var c=b("indexof");m.exports=a;a.prototype.on=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(c);return this};a.prototype.once=function(a,c){function b(){l.off(a,b);c.apply(this,arguments)}var l=this;this._callbacks=this._callbacks||{};c._off=b;this.on(a,b);return this};a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks=
{},this;var f=this._callbacks[a];if(!f)return this;if(1==arguments.length)return delete this._callbacks[a],this;var l=c(f,b._off||b);~l&&f.splice(l,1);return this};a.prototype.emit=function(a){this._callbacks=this._callbacks||{};var c=[].slice.call(arguments,1),b=this._callbacks[a];if(b)for(var b=b.slice(0),l=0,h=b.length;l<h;++l)b[l].apply(this,c);return this};a.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};a.prototype.hasListeners=function(a){return!!this.listeners(a).length}},
{indexof:35}],10:[function(b,m,h){m.exports=b("./lib/")},{"./lib/":11}],11:[function(b,m,h){m.exports=b("./socket");m.exports.parser=b("engine.io-parser")},{"./socket":12,"engine.io-parser":20}],12:[function(b,m,h){function a(b,e){if(!(this instanceof a))return new a(b,e);e=e||{};b&&"object"==typeof b&&(e=b,b=null);b&&(b=r(b),e.host=b.host,e.secure="https"==b.protocol||"wss"==b.protocol,e.port=b.port,b.query&&(e.query=b.query));this.secure=null!=e.secure?e.secure:c.location&&"https:"==location.protocol;
if(e.host){var f=e.host.split(":");e.hostname=f.shift();f.length&&(e.port=f.pop())}this.agent=e.agent||!1;this.hostname=e.hostname||(c.location?location.hostname:"localhost");this.port=e.port||(c.location&&location.port?location.port:this.secure?443:80);this.query=e.query||{};"string"==typeof this.query&&(this.query=u.decode(this.query));this.upgrade=!1!==e.upgrade;this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!e.forceJSONP;this.forceBase64=!!e.forceBase64;this.timestampParam=
e.timestampParam||"t";this.timestampRequests=e.timestampRequests;this.transports=e.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=e.policyPort||843;this.rememberUpgrade=e.rememberUpgrade||!1;this.open();this.binaryType=null;this.onlyBinaryUpgrades=e.onlyBinaryUpgrades}var c="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},e=b("./transports");h=b("emitter");var g=b("debug")("engine.io-client:socket"),f=b("indexof"),
l=b("engine.io-parser"),r=b("parseuri"),p=b("parsejson"),u=b("parseqs");m.exports=a;a.priorWebsocketSuccess=!1;h(a.prototype);a.protocol=l.protocol;a.Socket=a;a.Transport=b("./transport");a.transports=b("./transports");a.parser=b("engine.io-parser");a.prototype.createTransport=function(a){g('creating transport "%s"',a);var c=this.query,b={},f;for(f in c)c.hasOwnProperty(f)&&(b[f]=c[f]);b.EIO=l.protocol;b.transport=a;this.id&&(b.sid=this.id);return new e[a]({agent:this.agent,hostname:this.hostname,
port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this})};a.prototype.open=function(){var c;c=this.rememberUpgrade&&a.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";c=this.createTransport(c);c.open();this.setTransport(c)};a.prototype.setTransport=function(a){g("setting transport %s",
a.name);var c=this;this.transport&&(g("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){c.onDrain()}).on("packet",function(a){c.onPacket(a)}).on("error",function(a){c.onError(a)}).on("close",function(){c.onClose("transport close")})};a.prototype.probe=function(c){function b(){if(K.onlyBinaryUpgrades){var e=!this.supportsBinary&&K.transport.supportsBinary;u=u||e}u||(g('probe transport "%s" opened',c),r.send([{type:"ping",
data:"probe"}]),r.once("packet",function(b){u||("pong"==b.type&&"probe"==b.data?(g('probe transport "%s" pong',c),K.upgrading=!0,K.emit("upgrading",r),a.priorWebsocketSuccess="websocket"==r.name,g('pausing current transport "%s"',K.transport.name),K.transport.pause(function(){u||"closed"==K.readyState||"closing"==K.readyState||(g("changing transport and sending upgrade packet"),p(),K.setTransport(r),r.send([{type:"upgrade"}]),K.emit("upgrade",r),r=null,K.upgrading=!1,K.flush())})):(g('probe transport "%s" failed',
c),b=Error("probe error"),b.transport=r.name,K.emit("upgradeError",b)))}))}function e(){u||(u=!0,p(),r.close(),r=null)}function f(a){var b=Error("probe error: "+a);b.transport=r.name;e();g('probe transport "%s" failed because of error: %s',c,a);K.emit("upgradeError",b)}function h(){f("transport closed")}function l(){f("socket closed")}function m(a){r&&a.name!=r.name&&(g('"%s" works - aborting "%s"',a.name,r.name),e())}function p(){r.removeListener("open",b);r.removeListener("error",f);r.removeListener("close",
h);K.removeListener("close",l);K.removeListener("upgrading",m)}g('probing transport "%s"',c);var r=this.createTransport(c,{probe:1}),u=!1,K=this;a.priorWebsocketSuccess=!1;r.once("open",b);r.once("error",f);r.once("close",h);this.once("close",l);this.once("upgrading",m);r.open()};a.prototype.onOpen=function(){g("socket open");this.readyState="open";a.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){g("starting upgrade probes");
for(var c=0,b=this.upgrades.length;c<b;c++)this.probe(this.upgrades[c])}};a.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(g('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(p(a.data));break;case "pong":this.setPing();break;case "error":var c=Error("server error");c.code=a.data;this.emit("error",c);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else g('packet received with socket readyState "%s"',
this.readyState)};a.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};a.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var c=this;c.pingTimeoutTimer=setTimeout(function(){if("closed"!=
c.readyState)c.onClose("ping timeout")},a||c.pingInterval+c.pingTimeout)};a.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){g("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};a.prototype.ping=function(){this.sendPacket("ping")};a.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)if(this.callbackBuffer[a])this.callbackBuffer[a]();this.writeBuffer.splice(0,
this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0==this.writeBuffer.length?this.emit("drain"):this.flush()};a.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(g("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};a.prototype.write=a.prototype.send=function(a,c){this.sendPacket("message",
a,c);return this};a.prototype.sendPacket=function(a,c,b){a={type:a,data:c};this.emit("packetCreate",a);this.writeBuffer.push(a);this.callbackBuffer.push(b);this.flush()};a.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.onClose("forced close"),g("socket closing - telling transport to close"),this.transport.close();return this};a.prototype.onError=function(c){g("socket error %j",c);a.priorWebsocketSuccess=!1;this.emit("error",c);this.onClose("transport error",
c)};a.prototype.onClose=function(a,c){if("opening"==this.readyState||"open"==this.readyState){g('socket close with reason: "%s"',a);var b=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);setTimeout(function(){b.writeBuffer=[];b.callbackBuffer=[];b.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",a,c)}};a.prototype.filterUpgrades=function(a){for(var c=
[],b=0,e=a.length;b<e;b++)~f(this.transports,a[b])&&c.push(a[b]);return c}},{"./transport":13,"./transports":14,debug:8,emitter:9,"engine.io-parser":20,indexof:35,parsejson:28,parseqs:29,parseuri:37}],13:[function(b,m,h){function a(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket}var c=b("engine.io-parser");
b=b("emitter");m.exports=a;b(a.prototype);a.timestamps=0;a.prototype.onError=function(a,c){var b=Error(a);b.type="TransportError";b.description=c;this.emit("error",b);return this};a.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};a.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};a.prototype.send=function(a){if("open"==this.readyState)this.write(a);
else throw Error("Transport not open");};a.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};a.prototype.onData=function(a){this.onPacket(c.decodePacket(a,this.socket.binaryType))};a.prototype.onPacket=function(a){this.emit("packet",a)};a.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{emitter:9,"engine.io-parser":20}],14:[function(b,m,h){var a="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c=b("xmlhttprequest"),
e=b("./polling-xhr"),g=b("./polling-jsonp");b=b("./websocket");h.polling=function(b){var h=!1;if(a.location){var h="https:"==location.protocol,m=location.port;m||(m=h?443:80);h=b.hostname!=location.hostname||m!=b.port}b.xdomain=h;return"open"in new c(b)&&!b.forceJSONP?new e(b):new g(b)};h.websocket=b},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(b,m,h){function a(){}function c(c){g.call(this,c);this.query=this.query||{};r||(e.___eio||(e.___eio=[]),r=e.___eio);
this.index=r.length;var b=this;r.push(function(a){b.onData(a)});this.query.j=this.index;e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=a)})}var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},g=b("./polling");b=b("inherits");m.exports=c;var f=/\n/g,l=/\\n/g,r;b(c,g);c.prototype.supportsBinary=!1;c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),
this.form=null);g.prototype.doClose.call(this)};c.prototype.doPoll=function(){var a=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);c.async=!0;c.src=this.uri();c.onerror=function(c){a.onError("jsonp poll error",c)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b);this.script=c;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");
document.body.appendChild(a);document.body.removeChild(a)},100)};c.prototype.doWrite=function(a,c){function b(){e();c()}function e(){if(g.iframe)try{g.form.removeChild(g.iframe)}catch(a){g.onError("jsonp polling iframe removal error",a)}try{w=document.createElement('<iframe src="javascript:0" name="'+g.iframeId+'">')}catch(c){w=document.createElement("iframe"),w.name=g.iframeId,w.src="javascript:0"}w.id=g.iframeId;g.form.appendChild(w);g.iframe=w}var g=this;if(!this.form){var h=document.createElement("form"),
m=document.createElement("textarea"),r=this.iframeId="eio_iframe_"+this.index,w;h.className="socketio";h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";h.target=r;h.method="POST";h.setAttribute("accept-charset","utf-8");m.name="d";h.appendChild(m);document.body.appendChild(h);this.form=h;this.area=m}this.form.action=this.uri();e();a=a.replace(l,"\\\n");this.area.value=a.replace(f,"\\n");try{this.form.submit()}catch(C){}this.iframe.attachEvent?this.iframe.onreadystatechange=
function(){"complete"==g.iframe.readyState&&b()}:this.iframe.onload=b}},{"./polling":17,inherits:27}],16:[function(b,m,h){function a(){}function c(a){r.call(this,a);if(f.location){var c="https:"==location.protocol,b=location.port;b||(b=c?443:80);this.xd=a.hostname!=f.location.hostname||b!=a.port}}function e(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.create(a.isBinary,a.supportsBinary)}function g(){for(var a in e.requests)e.requests.hasOwnProperty(a)&&
e.requests[a].abort()}var f="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},l=b("xmlhttprequest"),r=b("./polling");h=b("emitter");var p=b("debug")("engine.io-client:polling-xhr");b=b("inherits");m.exports=c;m.exports.Request=e;b(c,r);c.prototype.supportsBinary=!0;c.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.agent=this.agent||!1;a.supportsBinary=this.supportsBinary;return new e(a)};c.prototype.doWrite=function(a,c){var b=this.request({method:"POST",data:a,
isBinary:"string"!==typeof a&&void 0!==a}),e=this;b.on("success",c);b.on("error",function(a){e.onError("xhr post error",a)});this.sendXhr=b};c.prototype.doPoll=function(){p("xhr poll");var a=this.request(),c=this;a.on("data",function(a){c.onData(a)});a.on("error",function(a){c.onError("xhr poll error",a)});this.pollXhr=a};h(e.prototype);e.prototype.create=function(a,c){var b=this.xhr=new l({agent:this.agent,xdomain:this.xd}),g=this;try{p("xhr open %s: %s",this.method,this.uri);b.open(this.method,
this.uri,this.async);c&&(b.responseType="arraybuffer");if("POST"==this.method)try{a?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(h){}"withCredentials"in b&&(b.withCredentials=!0);b.onreadystatechange=function(){var a;try{if(4!=b.readyState)return;200==b.status||1223==b.status?a="application/octet-stream"===b.getResponseHeader("Content-Type")?b.response:c?"ok":b.responseText:setTimeout(function(){g.onError(b.status)},
0)}catch(e){g.onError(e)}if(null!=a)g.onData(a)};p("xhr data %s",this.data);b.send(this.data)}catch(m){setTimeout(function(){g.onError(m)},0);return}f.document&&(this.index=e.requestsCount++,e.requests[this.index]=this)};e.prototype.onSuccess=function(){this.emit("success");this.cleanup()};e.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};e.prototype.onError=function(a){this.emit("error",a);this.cleanup()};e.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=
a;try{this.xhr.abort()}catch(c){}f.document&&delete e.requests[this.index];this.xhr=null}};e.prototype.abort=function(){this.cleanup()};f.document&&(e.requestsCount=0,e.requests={},f.attachEvent?f.attachEvent("onunload",g):f.addEventListener&&f.addEventListener("beforeunload",g))},{"./polling":17,debug:8,emitter:9,inherits:27,xmlhttprequest:19}],17:[function(b,m,h){function a(a){var b=a&&a.forceBase64;if(!l||b)this.supportsBinary=!1;c.call(this,a)}var c=b("../transport"),e=b("parseqs"),g=b("engine.io-parser"),
f=b("debug")("engine.io-client:polling");h=b("inherits");m.exports=a;var l=function(){return null!=(new (b("xmlhttprequest"))({agent:this.agent,xdomain:!1})).responseType}();h(a,c);a.prototype.name="polling";a.prototype.doOpen=function(){this.poll()};a.prototype.pause=function(a){function c(){f("paused");b.readyState="paused";a()}var b=this;this.readyState="pausing";if(this.polling||!this.writable){var e=0;this.polling&&(f("we are currently polling - waiting to pause"),e++,this.once("pollComplete",
function(){f("pre-pause polling complete");--e||c()}));this.writable||(f("we are currently writing - waiting to pause"),e++,this.once("drain",function(){f("pre-pause writing complete");--e||c()}))}else c()};a.prototype.poll=function(){f("polling");this.polling=!0;this.doPoll();this.emit("poll")};a.prototype.onData=function(a){var c=this;f("polling got data %s",a);g.decodePayload(a,this.socket.binaryType,function(a,b,e){if("opening"==c.readyState)c.onOpen();if("close"==a.type)return c.onClose(),!1;
c.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():f('ignoring poll - transport state "%s"',this.readyState))};a.prototype.doClose=function(){function a(){f("writing close packet");c.write([{type:"close"}])}var c=this;"open"==this.readyState?(f("transport open - closing"),a()):(f("transport not open - deferring close"),this.once("open",a))};a.prototype.write=function(a){var c=this;this.writable=!1;var b=function(){c.writable=!0;
c.emit("drain")},c=this;g.encodePayload(a,this.supportsBinary,function(a){c.doWrite(a,b)})};a.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",f="";!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+c.timestamps++);this.supportsBinary||a.sid||(a.b64=1);a=e.encode(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(f=":"+this.port);a.length&&(a="?"+a);return b+"://"+this.hostname+f+this.path+a}},{"../transport":13,debug:8,"engine.io-parser":20,
inherits:27,parseqs:29,xmlhttprequest:19}],18:[function(b,m,h){function a(a){a&&a.forceBase64&&(this.supportsBinary=!1);c.call(this,a)}var c=b("../transport"),e=b("engine.io-parser"),g=b("parseqs"),f=b("debug")("engine.io-client:websocket");h=b("inherits");var l=b("ws");m.exports=a;h(a,c);a.prototype.name="websocket";a.prototype.supportsBinary=!0;a.prototype.doOpen=function(){if(this.check()){var a=this.uri();this.ws=new l(a,void 0,{agent:this.agent});void 0===this.ws.binaryType&&(this.supportsBinary=
!1);this.ws.binaryType="arraybuffer";this.addEventListeners()}};a.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(c){a.onData(c.data)};this.ws.onerror=function(c){a.onError("websocket error",c)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(a.prototype.onData=function(a){var b=this;setTimeout(function(){c.prototype.onData.call(b,a)},0)});a.prototype.write=function(a){var c=
this;this.writable=!1;for(var b=0,g=a.length;b<g;b++)e.encodePacket(a[b],this.supportsBinary,function(a){try{c.ws.send(a)}catch(b){f("websocket closed before onclose event")}});setTimeout(function(){c.writable=!0;c.emit("drain")},0)};a.prototype.onClose=function(){c.prototype.onClose.call(this)};a.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};a.prototype.uri=function(){var a=this.query||{},c=this.secure?"wss":"ws",b="";this.port&&("wss"==c&&443!=this.port||"ws"==c&&80!=
this.port)&&(b=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=+new Date);this.supportsBinary||(a.b64=1);a=g.encode(a);a.length&&(a="?"+a);return c+"://"+this.hostname+b+this.path+a};a.prototype.check=function(){return!!l&&!("__initialize"in l&&this.name===a.prototype.name)}},{"../transport":13,debug:8,"engine.io-parser":20,inherits:27,parseqs:29,ws:30}],19:[function(b,m,h){var a=b("has-cors");m.exports=function(c){c=c.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!c||a))return new XMLHttpRequest}catch(b){}if(!c)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(g){}}},
{"has-cors":33}],20:[function(b,m,h){function a(a,c,b){if(!c)return h.encodeBase64Packet(a,b);var e=new FileReader;e.onload=function(){a.data=e.result;h.encodePacket(a,c,b)};return e.readAsArrayBuffer(a.data)}function c(a,c,b){var e=Array(a.length);b=l(a.length,b);for(var f=function(a,b,f){c(b,function(c,b){e[a]=b;f(c,e)})},g=0;g<a.length;g++)f(g,a[g],b)}var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:{};m=b("./keys");var g=b("arraybuffer.slice"),f=b("base64-arraybuffer"),
l=b("after"),r=b("utf8"),p=navigator.userAgent.match(/Android/i);h.protocol=2;var u=h.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=m(u),t={type:"error",data:"parser error"},v=b("blob");h.encodePacket=function(c,b,f){"function"==typeof b&&(f=b,b=!1);var g=void 0===c.data?void 0:c.data.buffer||c.data;if(e.ArrayBuffer&&g instanceof ArrayBuffer){if(b){g=c.data;b=new Uint8Array(g);g=new Uint8Array(1+g.byteLength);g[0]=u[c.type];for(c=0;c<b.length;c++)g[c+1]=b[c];c=f(g.buffer)}else c=
h.encodeBase64Packet(c,f);return c}if(v&&g instanceof e.Blob)return b?p?c=a(c,b,f):(b=new Uint8Array(1),b[0]=u[c.type],c=new v([b.buffer,c.data]),c=f(c)):c=h.encodeBase64Packet(c,f),c;b=u[c.type];void 0!==c.data&&(b+=r.encode(String(c.data)));return f(""+b)};h.encodeBase64Packet=function(a,c){var b="b"+h.packets[a.type];if(v&&a.data instanceof v){var f=new FileReader;f.onload=function(){var a=f.result.split(",")[1];c(b+a)};return f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,
new Uint8Array(a.data))}catch(l){g=new Uint8Array(a.data);for(var m=Array(g.length),p=0;p<g.length;p++)m[p]=g[p];g=String.fromCharCode.apply(null,m)}b+=e.btoa(g);return c(b)};h.decodePacket=function(a,c){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return h.decodeBase64Packet(a.substr(1),c);a=r.decode(a);var b=a.charAt(0);return Number(b)==b&&s[b]?1<a.length?{type:s[b],data:a.substring(1)}:{type:s[b]}:t}var b=(new Uint8Array(a))[0],e=g(a,1);v&&"blob"===c&&(e=new v([e]));return{type:s[b],
data:e}};h.decodeBase64Packet=function(a,c){var b=s[a.charAt(0)];if(!e.ArrayBuffer)return{type:b,data:{base64:!0,data:a.substr(1)}};var g=f.decode(a.substr(1));"blob"===c&&v&&(g=new v([g]));return{type:b,data:g}};h.encodePayload=function(a,b,e){"function"==typeof b&&(e=b,b=null);if(b)return v&&!p?h.encodePayloadAsBlob(a,e):h.encodePayloadAsArrayBuffer(a,e);if(!a.length)return e("0:");c(a,function(a,c){h.encodePacket(a,b,function(a){c(null,a.length+":"+a)})},function(a,c){return e(c.join(""))})};h.decodePayload=
function(a,c,b){if("string"!=typeof a)return h.decodePayloadAsBinary(a,c,b);"function"===typeof c&&(b=c,c=null);var e;if(""==a)return b(t,0,1);e="";for(var f,g,l=0,m=a.length;l<m;l++)if(g=a.charAt(l),":"!=g)e+=g;else{if(""==e||e!=(f=Number(e)))return b(t,0,1);g=a.substr(l+1,f);if(e!=g.length)return b(t,0,1);if(g.length){e=h.decodePacket(g,c);if(t.type==e.type&&t.data==e.data)return b(t,0,1);if(!1===b(e,l+f,m))return}l+=f;e=""}if(""!=e)return b(t,0,1)};h.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));
c(a,function(a,c){h.encodePacket(a,!0,function(a){return c(null,a)})},function(a,c){var e=c.reduce(function(a,c){var b;b="string"===typeof c?c.length:c.byteLength;return a+b.toString().length+b+2},0),f=new Uint8Array(e),g=0;c.forEach(function(a){var c="string"===typeof a,b=a;if(c){for(var b=new Uint8Array(a.length),e=0;e<a.length;e++)b[e]=a.charCodeAt(e);b=b.buffer}c?f[g++]=0:f[g++]=1;a=b.byteLength.toString();for(e=0;e<a.length;e++)f[g++]=parseInt(a[e]);f[g++]=255;b=new Uint8Array(b);for(e=0;e<b.length;e++)f[g++]=
b[e]});return b(f.buffer)})};h.encodePayloadAsBlob=function(a,b){c(a,function(a,c){h.encodePacket(a,!0,function(a){var b=new Uint8Array(1);b[0]=1;if("string"===typeof a){for(var e=new Uint8Array(a.length),f=0;f<a.length;f++)e[f]=a.charCodeAt(f);a=e.buffer;b[0]=0}for(var e=(a instanceof ArrayBuffer?a.byteLength:a.size).toString(),g=new Uint8Array(e.length+1),f=0;f<e.length;f++)g[f]=parseInt(e[f]);g[e.length]=255;v&&(a=new v([b.buffer,g.buffer,a]),c(null,a))})},function(a,c){return b(new v(c))})};h.decodePayloadAsBinary=
function(a,c,b){"function"===typeof c&&(b=c,c=null);for(var e=[];0<a.byteLength;){for(var f=new Uint8Array(a),l=0===f[0],m="",p=1;255!=f[p];p++)m+=f[p];a=g(a,2+m.length);m=parseInt(m);f=g(a,0,m);if(l)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(r){for(l=new Uint8Array(f),f="",p=0;p<l.length;p++)f+=String.fromCharCode(l[p])}e.push(f);a=g(a,m)}var s=e.length;e.forEach(function(a,e){b(h.decodePacket(a,c),e,s)})}},{"./keys":21,after:22,"arraybuffer.slice":23,"base64-arraybuffer":24,blob:25,
utf8:26}],21:[function(b,m,h){m.exports=Object.keys||function(a){var c=[],b=Object.prototype.hasOwnProperty,g;for(g in a)b.call(a,g)&&c.push(g);return c}},{}],22:[function(b,m,h){function a(){}m.exports=function(c,b,g){function f(a,c){if(0>=f.count)throw Error("after called too many times");--f.count;a?(h=!0,b(a),b=g):0!==f.count||h||b(null,c)}var h=!1;g=g||a;f.count=c;return 0===c?b():f}},{}],23:[function(b,m,h){m.exports=function(a,b,e){var g=a.byteLength;b=b||0;e=e||g;if(a.slice)return a.slice(b,
e);0>b&&(b+=g);0>e&&(e+=g);e>g&&(e=g);if(b>=g||b>=e||0===g)return new ArrayBuffer(0);a=new Uint8Array(a);for(var g=new Uint8Array(e-b),f=0;b<e;b++,f++)g[f]=a[b];return g.buffer}},{}],24:[function(b,m,h){(function(a){h.encode=function(b){b=new Uint8Array(b);var e,g=b.length,f="";for(e=0;e<g;e+=3)f+=a[b[e]>>2],f+=a[(b[e]&3)<<4|b[e+1]>>4],f+=a[(b[e+1]&15)<<2|b[e+2]>>6],f+=a[b[e+2]&63];2===g%3?f=f.substring(0,f.length-1)+"=":1===g%3&&(f=f.substring(0,f.length-2)+"==");return f};h.decode=function(b){var e=
.75*b.length,g=b.length,f=0,h,m,p,u;"="===b[b.length-1]&&(e--,"="===b[b.length-2]&&e--);for(var s=new ArrayBuffer(e),t=new Uint8Array(s),e=0;e<g;e+=4)h=a.indexOf(b[e]),m=a.indexOf(b[e+1]),p=a.indexOf(b[e+2]),u=a.indexOf(b[e+3]),t[f++]=h<<2|m>>4,t[f++]=(m&15)<<4|p>>2,t[f++]=(p&3)<<6|u&63;return s}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],25:[function(b,m,h){function a(a,b){b=b||{};for(var e=new c,g=0;g<a.length;g++)e.append(a[g]);return b.type?e.getBlob(b.type):e.getBlob()}
b="undefined"!==typeof self?self:"undefined"!==typeof window?window:{};var c=b.BlobBuilder||b.WebKitBlobBuilder||b.MSBlobBuilder||b.MozBlobBuilder,e;try{e=2==(new Blob(["hi"])).size}catch(g){e=!1}h=c&&c.prototype.append&&c.prototype.getBlob;e=e?b.Blob:h?a:void 0;m.exports=e},{}],26:[function(b,m,h){var a="undefined"!==typeof self?self:"undefined"!==typeof window?window:{};(function(b){function e(a){for(var b=[],c=0,e=a.length,f,g;c<e;)f=a.charCodeAt(c++),55296<=f&&56319>=f&&c<e?(g=a.charCodeAt(c++),
56320==(g&64512)?b.push(((f&1023)<<10)+(g&1023)+65536):(b.push(f),c--)):b.push(f);return b}function g(){if(v>=t)throw Error("Invalid byte index");var a=s[v]&255;v++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function f(){var a,b,c,e;if(v>t)throw Error("Invalid byte index");if(v==t)return!1;a=s[v]&255;v++;if(0==(a&128))return a;if(192==(a&224)){b=g();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=g();c=g();a=(a&15)<<12|b<<6|
c;if(2048<=a)return a;throw Error("Invalid continuation byte");}if(240==(a&248)&&(b=g(),c=g(),e=g(),a=(a&15)<<18|b<<12|c<<6|e,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var l="object"==typeof h&&h,r="object"==typeof m&&m&&m.exports==l&&m,p="object"==typeof a&&a;if(p.global===p||p.window===p)b=p;var u=String.fromCharCode,s,t,v,p={version:"2.0.0",encode:function(a){a=e(a);for(var b=a.length,c=-1,f,g="";++c<b;){f=a[c];if(0==(f&4294967168))f=u(f);else{var h="";0==(f&4294965248)?
h=u(f>>6&31|192):0==(f&4294901760)?(h=u(f>>12&15|224),h+=u(f>>6&63|128)):0==(f&4292870144)&&(h=u(f>>18&7|240),h+=u(f>>12&63|128),h+=u(f>>6&63|128));f=h+=u(f&63|128)}g+=f}return g},decode:function(a){s=e(a);t=s.length;v=0;a=[];for(var b;!1!==(b=f());)a.push(b);b=a.length;for(var c=-1,g,h="";++c<b;)g=a[c],65535<g&&(g-=65536,h+=u(g>>>10&1023|55296),g=56320|g&1023),h+=u(g);return h}};if(l&&!l.nodeType)if(r)r.exports=p;else{b={}.hasOwnProperty;for(var z in p)b.call(p,z)&&(l[z]=p[z])}else b.utf8=p})(this)},
{}],27:[function(b,m,h){m.exports="function"===typeof Object.create?function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var e=function(){};e.prototype=b.prototype;a.prototype=new e;a.prototype.constructor=a}},{}],28:[function(b,m,h){var a="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c=/^[\],:{}\s]*$/,e=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,g=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
f=/(?:^|:|,)(?:\s*\[)+/g,l=/^\s+/,r=/\s+$/;m.exports=function(b){if("string"!=typeof b||!b)return null;b=b.replace(l,"").replace(r,"");if(a.JSON&&JSON.parse)return JSON.parse(b);if(c.test(b.replace(e,"@").replace(g,"]").replace(f,"")))return(new Function("return "+b))()}},{}],29:[function(b,m,h){h.encode=function(a){var b="",e;for(e in a)a.hasOwnProperty(e)&&(b.length&&(b+="&"),b+=encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return b};h.decode=function(a){var b={};a=a.split("&");for(var e=
0,g=a.length;e<g;e++){var f=a[e].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],30:[function(b,m,h){function a(a,b,f){return b?new c(a,b):new c(a)}b=function(){return this}();var c=b.WebSocket||b.MozWebSocket;m.exports=c?a:null;c&&(a.prototype=c.prototype)},{}],31:[function(b,m,h){var a="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c=b("isarray");m.exports=function(b){function g(b){if(!b)return!1;if(a.Buffer&&Buffer.isBuffer(b)||a.ArrayBuffer&&
b instanceof ArrayBuffer||a.Blob&&b instanceof Blob||a.File&&b instanceof File)return!0;if(c(b))for(var e=0;e<b.length;e++){if(g(b[e]))return!0}else if(b&&"object"==typeof b)for(e in b.toJSON&&(b=b.toJSON()),b)if(g(b[e]))return!0;return!1}return g(b)}},{isarray:32}],32:[function(b,m,h){m.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],33:[function(b,m,h){b=b("global");try{m.exports="XMLHttpRequest"in b&&"withCredentials"in new b.XMLHttpRequest}catch(a){m.exports=
!1}},{global:34}],34:[function(b,m,h){m.exports=function(){return this}()},{}],35:[function(b,m,h){var a=[].indexOf;m.exports=function(b,e){if(a)return b.indexOf(e);for(var g=0;g<b.length;++g)if(b[g]===e)return g;return-1}},{}],36:[function(b,m,h){var a=Object.prototype.hasOwnProperty;h.keys=Object.keys||function(b){var e=[],g;for(g in b)a.call(b,g)&&e.push(g);return e};h.values=function(b){var e=[],g;for(g in b)a.call(b,g)&&e.push(b[g]);return e};h.merge=function(b,e){for(var g in e)a.call(e,g)&&
(b[g]=e[g]);return b};h.length=function(a){return h.keys(a).length};h.isEmpty=function(a){return 0==h.length(a)}},{}],37:[function(b,m,h){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");m.exports=
function(b){b=a.exec(b||"");for(var g={},f=14;f--;)g[c[f]]=b[f]||"";return g}},{}],38:[function(b,m,h){function a(a){return c.Buffer&&Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer}var c="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},e=b("isarray");h.deconstructPacket=function(a){function b(a){if(!a)return a;if(c.Buffer&&Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer){var g={_placeholder:!0,num:h.length};h.push(a);return g}if(e(a)){for(var g=Array(a.length),
m=0;m<a.length;m++)g[m]=b(a[m]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(m in a)g[m]=b(a[m]);return g}return a}var h=[];a.data=b(a.data);a.attachments=h.length;return{packet:a,buffers:h}};h.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder)return b[a.num];if(e(a))for(var g=0;g<a.length;g++)a[g]=c(a[g]);else if(a&&"object"==typeof a)for(g in a)a[g]=c(a[g]);return a}a.data=c(a.data);a.attachments=void 0;return a};h.removeBlobs=function(b,f){function h(b,g,t){if(!b)return b;
if(c.Blob&&b instanceof Blob||c.File&&b instanceof File){m++;var v=new FileReader;v.onload=function(){t?t[g]=this.result:p=this.result;--m||f(p)};v.readAsArrayBuffer(b)}if(e(b))for(v=0;v<b.length;v++)h(b[v],v,b);else if(b&&"object"==typeof b&&!a(b))for(var z in b)h(b[z],z,b)}var m=0,p=b;h(p);m||f(p)}},{isarray:40}],39:[function(b,m,h){function a(){}function c(a){var b,c=!1;b=""+a.type;if(h.BINARY_EVENT==a.type||h.BINARY_ACK==a.type)b+=a.attachments,b+="-";a.nsp&&"/"!=a.nsp&&(c=!0,b+=a.nsp);null!=
a.id&&(c&&(b+=",",c=!1),b+=a.id);null!=a.data&&(c&&(b+=","),b+=p.stringify(a.data));r("encoded %j as %s",a,b);return b}function e(a,b){u.removeBlobs(a,function(a){var e=u.deconstructPacket(a);a=c(e.packet);e=e.buffers;e.unshift(a);b(e)})}function g(){this.reconstructor=null}function f(a){this.reconPack=a;this.buffers=[]}var l="undefined"!==typeof self?self:"undefined"!==typeof window?window:{},r=b("debug")("socket.io-parser"),p=b("json3");b("isarray");m=b("emitter");var u=b("./binary");h.protocol=
3;h.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");h.CONNECT=0;h.DISCONNECT=1;h.EVENT=2;h.ACK=3;h.ERROR=4;h.BINARY_EVENT=5;h.BINARY_ACK=6;h.Encoder=a;a.prototype.encode=function(a,b){r("encoding packet %j",a);if(h.BINARY_EVENT==a.type||h.BINARY_ACK==a.type)e(a,b);else{var f=c(a);b([f])}};h.Decoder=g;m(g.prototype);g.prototype.add=function(a){if("string"==typeof a){a:{var b={},c=0;b.type=Number(a.charAt(0));if(null==h.types[b.type])a={type:h.ERROR,data:"parser error"};
else{if(h.BINARY_EVENT==b.type||h.BINARY_ACK==b.type){for(b.attachments="";"-"!=a.charAt(++c);)b.attachments+=a.charAt(c);b.attachments=Number(b.attachments)}if("/"==a.charAt(c+1))for(b.nsp="";++c;){var e=a.charAt(c);if(","==e)break;b.nsp+=e;if(c+1==a.length)break}else b.nsp="/";e=a.charAt(c+1);if(""!=e&&Number(e)==e){for(b.id="";++c;){e=a.charAt(c);if(null==e||Number(e)!=e){--c;break}b.id+=a.charAt(c);if(c+1==a.length)break}b.id=Number(b.id)}if(a.charAt(++c))try{b.data=p.parse(a.substr(c))}catch(g){a=
{type:h.ERROR,data:"parser error"};break a}r("decoded %s as %j",a,b);a=b}}h.BINARY_EVENT==a.type||h.BINARY_ACK==a.type?(this.reconstructor=new f(a),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(l.Buffer&&Buffer.isBuffer(a)||l.ArrayBuffer&&a instanceof ArrayBuffer||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");
else throw Error("Unknown type: "+a);};g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};f.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=u.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};f.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":38,debug:8,emitter:9,isarray:40,json3:41}],40:[function(b,m,h){m.exports=
b(32)},{}],41:[function(b,m,h){(function(a){function b(a){if(b[a]!==l)return b[a];var f;if("bug-string-char-index"==a)f="a"!="a"[0];else if("json"==a)f=b("json-stringify")&&b("json-parse");else{var g;if("json-stringify"==a){f=p.stringify;var h="function"==typeof f&&u;if(h){(g=function(){return 1}).toJSON=g;try{h="0"===f(0)&&"0"===f(new Number)&&'""'==f(new String)&&f(e)===l&&f(l)===l&&f()===l&&"1"===f(g)&&"[1]"==f([g])&&"[null]"==f([l])&&"null"==f(null)&&"[null,null,null]"==f([l,e,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==
f({a:[g,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===f(null,g)&&"[\n 1,\n 2\n]"==f([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==f(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==f(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==f(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==f(new Date(-1))}catch(m){h=!1}}f=h}if("json-parse"==a){f=p.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){g=f('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var r=5==g.a.length&&1===g.a[0];if(r){try{r=
!f('"\t"')}catch(s){}if(r)try{r=1!==f("01")}catch(t){}if(r)try{r=1!==f("1.")}catch(v){}}}}catch(w){r=!1}f=r}}return b[a]=!!f}var e={}.toString,g,f,l,m="object"==typeof JSON&&JSON,p="object"==typeof h&&h&&!h.nodeType&&h;p&&m?(p.stringify=m.stringify,p.parse=m.parse):p=a.JSON=m||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(s){}if(!b("json")){var t=
b("bug-string-char-index");if(!u)var v=Math.floor,z=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(a,b){return z[b]+365*(a-1970)+v((a-1969+(b=+(1<b)))/4)-v((a-1901+b)/100)+v((a-1601+b)/400)};(g={}.hasOwnProperty)||(g=function(a){var b={},c;(b.__proto__=null,b.__proto__={toString:1},b).toString!=e?g=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a}:(c=b.constructor,g=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===
b[a])});b=null;return g.call(this,a)});var x={"boolean":1,number:1,string:1,undefined:1};f=function(a,b){var c=0,h,l,m;(h=function(){this.valueOf=0}).prototype.valueOf=0;l=new h;for(m in l)g.call(l,m)&&c++;h=l=null;c?f=2==c?function(a,b){var c={},f="[object Function]"==e.call(a),h;for(h in a)f&&"prototype"==h||g.call(c,h)||!(c[h]=1)||!g.call(a,h)||b(h)}:function(a,b){var c="[object Function]"==e.call(a),f,h;for(f in a)c&&"prototype"==f||!g.call(a,f)||(h="constructor"===f)||b(f);(h||g.call(a,f="constructor"))&&
b(f)}:(l="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),f=function(a,b){var c="[object Function]"==e.call(a),f,h;if(h=!c&&"function"!=typeof a.constructor)h=typeof a.hasOwnProperty,h="object"==h?!!a.hasOwnProperty:!x[h];h=h?a.hasOwnProperty:g;for(f in a)c&&"prototype"==f||!h.call(a,f)||b(f);for(c=l.length;f=l[--c];h.call(a,f)&&b(f));});return f(a,b)};if(!b("json-stringify")){var w={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},
C=function(a,b){return("000000"+(b||0)).slice(-a)},J=function(a){var b='"',c=0,e=a.length,f=10<e&&t,g;for(f&&(g=a.split(""));c<e;c++){var h=a.charCodeAt(c);switch(h){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=w[h];break;default:if(32>h){b+="\\u00"+C(2,h.toString(16));break}b+=f?g[c]:t?a.charAt(c):a[c]}}return b+'"'},A=function(a,b,c,h,m,p,r){var s,t,u,w,x,y,z,E,F;try{s=b[a]}catch(K){}if("object"==typeof s&&s)if(t=e.call(s),"[object Date]"!=t||g.call(s,"toJSON"))"function"==typeof s.toJSON&&
("[object Number]"!=t&&"[object String]"!=t&&"[object Array]"!=t||g.call(s,"toJSON"))&&(s=s.toJSON(a));else if(s>-1/0&&s<1/0){if(D){w=v(s/864E5);for(t=v(w/365.2425)+1970-1;D(t+1,0)<=w;t++);for(u=v((w-D(t,0))/30.42);D(t,u+1)<=w;u++);w=1+w-D(t,u);x=(s%864E5+864E5)%864E5;y=v(x/36E5)%24;z=v(x/6E4)%60;E=v(x/1E3)%60;x%=1E3}else t=s.getUTCFullYear(),u=s.getUTCMonth(),w=s.getUTCDate(),y=s.getUTCHours(),z=s.getUTCMinutes(),E=s.getUTCSeconds(),x=s.getUTCMilliseconds();s=(0>=t||1E4<=t?(0>t?"-":"+")+C(6,0>t?
-t:t):C(4,t))+"-"+C(2,u+1)+"-"+C(2,w)+"T"+C(2,y)+":"+C(2,z)+":"+C(2,E)+"."+C(3,x)+"Z"}else s=null;c&&(s=c.call(b,a,s));if(null===s)return"null";t=e.call(s);if("[object Boolean]"==t)return""+s;if("[object Number]"==t)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==t)return J(""+s);if("object"==typeof s){for(a=r.length;a--;)if(r[a]===s)throw TypeError();r.push(s);F=[];b=p;p+=m;if("[object Array]"==t){u=0;for(a=s.length;u<a;u++)t=A(u,s,c,h,m,p,r),F.push(t===l?"null":t);a=F.length?m?"[\n"+p+F.join(",\n"+
p)+"\n"+b+"]":"["+F.join(",")+"]":"[]"}else f(h||s,function(a){var b=A(a,s,c,h,m,p,r);b!==l&&F.push(J(a)+":"+(m?" ":"")+b)}),a=F.length?m?"{\n"+p+F.join(",\n"+p)+"\n"+b+"}":"{"+F.join(",")+"}":"{}";r.pop();return a}};p.stringify=function(a,b,c){var f,g,h,l;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==(l=e.call(b)))g=b;else if("[object Array]"==l){h={};for(var m=0,p=b.length,r;m<p;r=b[m++],(l=e.call(r),"[object String]"==l||"[object Number]"==l)&&(h[r]=1));}if(c)if("[object Number]"==
(l=e.call(c))){if(0<(c-=c%1))for(f="",10<c&&(c=10);f.length<c;f+=" ");}else"[object String]"==l&&(f=10>=c.length?c:c.slice(0,10));return A("",(r={},r[""]=a,r),g,h,f,"",[])}}if(!b("json-parse")){var K=String.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},y,P,F=function(){y=P=null;throw SyntaxError();},Q=function(){for(var a=P,b=a.length,c,e,f,g,h;y<b;)switch(h=a.charCodeAt(y),h){case 9:case 10:case 13:case 32:y++;break;case 123:case 125:case 91:case 93:case 58:case 44:return c=
t?a.charAt(y):a[y],y++,c;case 34:c="@";for(y++;y<b;)if(h=a.charCodeAt(y),32>h)F();else if(92==h)switch(h=a.charCodeAt(++y),h){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=T[h];y++;break;case 117:e=++y;for(f=y+4;y<f;y++)h=a.charCodeAt(y),48<=h&&57>=h||97<=h&&102>=h||65<=h&&70>=h||F();c+=K("0x"+a.slice(e,y));break;default:F()}else{if(34==h)break;h=a.charCodeAt(y);for(e=y;32<=h&&92!=h&&34!=h;)h=a.charCodeAt(++y);c+=a.slice(e,y)}if(34==a.charCodeAt(y))return y++,c;F();default:e=
y;45==h&&(g=!0,h=a.charCodeAt(++y));if(48<=h&&57>=h){for(48==h&&(h=a.charCodeAt(y+1),48<=h&&57>=h)&&F();y<b&&(h=a.charCodeAt(y),48<=h&&57>=h);y++);if(46==a.charCodeAt(y)){for(f=++y;f<b&&(h=a.charCodeAt(f),48<=h&&57>=h);f++);f==y&&F();y=f}h=a.charCodeAt(y);if(101==h||69==h){h=a.charCodeAt(++y);43!=h&&45!=h||y++;for(f=y;f<b&&(h=a.charCodeAt(f),48<=h&&57>=h);f++);f==y&&F();y=f}return+a.slice(e,y)}g&&F();if("true"==a.slice(y,y+4))return y+=4,!0;if("false"==a.slice(y,y+5))return y+=5,!1;if("null"==a.slice(y,
y+4))return y+=4,null;F()}return"$"},M=function(a){var b,c;"$"==a&&F();if("string"==typeof a){if("@"==(t?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;c||(c=!0)){a=Q();if("]"==a)break;c&&(","==a?(a=Q(),"]"==a&&F()):F());","==a&&F();b.push(M(a))}return b}if("{"==a){for(b={};;c||(c=!0)){a=Q();if("}"==a)break;c&&(","==a?(a=Q(),"}"==a&&F()):F());","!=a&&"string"==typeof a&&"@"==(t?a.charAt(0):a[0])&&":"==Q()||F();b[a.slice(1)]=M(Q())}return b}F()}return a},R=function(a,b,c){c=E(a,b,c);c===
l?delete a[b]:a[b]=c},E=function(a,b,c){var g=a[b],h;if("object"==typeof g&&g)if("[object Array]"==e.call(g))for(h=g.length;h--;)R(g,h,c);else f(g,function(a){R(g,a,c)});return c.call(a,b,g)};p.parse=function(a,b){var c,f;y=0;P=""+a;c=M(Q());"$"!=Q()&&F();y=P=null;return b&&"[object Function]"==e.call(b)?E((f={},f[""]=c,f),"",b):c}}}})(this)},{}],42:[function(b,m,h){m.exports=function(a,b){for(var e=[],g=(b=b||0)||0;g<a.length;g++)e[g-b]=a[g];return e}},{}]},{},[1])(1)});window.google=window.google||{};google.maps=google.maps||{};
(function(){var n=google.maps.modules={};google.maps.__gjsload__=function(b,h){n[b]=h};google.maps.Load=function(m){delete google.maps.Load;m([.009999999776482582,[[["https://mts0.googleapis.com/vt?lyrs=m@264000000&src=api&hl=en-US&","https://mts1.googleapis.com/vt?lyrs=m@264000000&src=api&hl=en-US&"],null,null,null,null,"m@264000000",["https://mts0.google.com/vt?lyrs=m@264000000&src=api&hl=en-US&","https://mts1.google.com/vt?lyrs=m@264000000&src=api&hl=en-US&"]],[["https://khms0.googleapis.com/kh?v=150&hl=en-US&",
"https://khms1.googleapis.com/kh?v=150&hl=en-US&"],null,null,null,1,"150",["https://khms0.google.com/kh?v=150&hl=en-US&","https://khms1.google.com/kh?v=150&hl=en-US&"]],[["https://mts0.googleapis.com/vt?lyrs=h@264000000&src=api&hl=en-US&","https://mts1.googleapis.com/vt?lyrs=h@264000000&src=api&hl=en-US&"],null,null,null,null,"h@264000000",["https://mts0.google.com/vt?lyrs=h@264000000&src=api&hl=en-US&","https://mts1.google.com/vt?lyrs=h@264000000&src=api&hl=en-US&"]],[["https://mts0.googleapis.com/vt?lyrs=t@132,r@264000000&src=api&hl=en-US&",
"https://mts1.googleapis.com/vt?lyrs=t@132,r@264000000&src=api&hl=en-US&"],null,null,null,null,"t@132,r@264000000",["https://mts0.google.com/vt?lyrs=t@132,r@264000000&src=api&hl=en-US&","https://mts1.google.com/vt?lyrs=t@132,r@264000000&src=api&hl=en-US&"]],null,null,[["https://cbks0.googleapis.com/cbk?","https://cbks1.googleapis.com/cbk?"]],[["https://khms0.googleapis.com/kh?v=84&hl=en-US&","https://khms1.googleapis.com/kh?v=84&hl=en-US&"],null,null,null,null,"84",["https://khms0.google.com/kh?v=84&hl=en-US&",
"https://khms1.google.com/kh?v=84&hl=en-US&"]],[["https://mts0.googleapis.com/mapslt?hl=en-US&","https://mts1.googleapis.com/mapslt?hl=en-US&"]],[["https://mts0.googleapis.com/mapslt/ft?hl=en-US&","https://mts1.googleapis.com/mapslt/ft?hl=en-US&"]],[["https://mts0.googleapis.com/vt?hl=en-US&","https://mts1.googleapis.com/vt?hl=en-US&"]],[["https://mts0.googleapis.com/mapslt/loom?hl=en-US&","https://mts1.googleapis.com/mapslt/loom?hl=en-US&"]],[["https://mts0.googleapis.com/mapslt?hl=en-US&","https://mts1.googleapis.com/mapslt?hl=en-US&"]],
[["https://mts0.googleapis.com/mapslt/ft?hl=en-US&","https://mts1.googleapis.com/mapslt/ft?hl=en-US&"]],[["https://mts0.googleapis.com/mapslt/loom?hl=en-US&","https://mts1.googleapis.com/mapslt/loom?hl=en-US&"]]],["en-US","US",null,0,null,null,"https://maps.gstatic.com/mapfiles/","https://csi.gstatic.com","https://maps.googleapis.com","https://maps.googleapis.com"],["https://maps.gstatic.com/intl/en_us/mapfiles/api-3/17/2","3.17.2"],[4171704896],1,null,null,null,null,null,"",null,null,1,"https://khms.googleapis.com/mz?v=150&",
null,"https://earthbuilder.googleapis.com","https://earthbuilder.googleapis.com",null,"https://mts.googleapis.com/vt/icon",[["https://mts0.googleapis.com/vt","https://mts1.googleapis.com/vt"],["https://mts0.googleapis.com/vt","https://mts1.googleapis.com/vt"],[null,[[0,"m",264E6]],[null,"en-US","US",null,18,null,null,null,null,null,null,[[47],[37,[["smartmaps"]]]]],0],[null,[[0,"m",264E6]],[null,"en-US","US",null,18,null,null,null,null,null,null,[[47],[37,[["smartmaps"]]]]],3],[null,[[0,"m",264E6]],
[null,"en-US","US",null,18,null,null,null,null,null,null,[[50],[37,[["smartmaps"]]]]],0],[null,[[0,"m",264E6]],[null,"en-US","US",null,18,null,null,null,null,null,null,[[50],[37,[["smartmaps"]]]]],3],[null,[[4,"t",132],[0,"r",132E6]],[null,"en-US","US",null,18,null,null,null,null,null,null,[[5],[37,[["smartmaps"]]]]],0],[null,[[4,"t",132],[0,"r",132E6]],[null,"en-US","US",null,18,null,null,null,null,null,null,[[5],[37,[["smartmaps"]]]]],3],[null,null,[null,"en-US","US",null,18],0],[null,null,[null,
"en-US","US",null,18],3],[null,null,[null,"en-US","US",null,18],6],[null,null,[null,"en-US","US",null,18],0],["https://mts0.google.com/vt","https://mts1.google.com/vt"],"/maps/vt"],2,500,"https://geo0.ggpht.com/cbk?cb_client=maps_sv.uv_api_demo https://www.gstatic.com/landmark/tour https://www.gstatic.com/landmark/config /maps/preview/reveal?authuser=0 /maps/preview/log204 /gen204?tbm=map https://static.panoramio.com.storage.googleapis.com/photos/".split(" ")],b)};var b=(new Date).getTime();document.write('<script src="https://maps.gstatic.com/intl/en_us/mapfiles/api-3/17/2/main.js" type="text/javascript">\x3c/script>')})();
